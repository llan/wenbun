var H=Object.getPrototypeOf;var I=Reflect.get;var S=i=>{throw TypeError(i)};var j=(i,u,e)=>u.has(i)||S("Cannot "+e);var s=(i,u,e)=>(j(i,u,"read from private field"),e?e.call(i):u.get(i)),d=(i,u,e)=>u.has(i)?S("Cannot add the same private member more than once"):u instanceof WeakSet?u.add(i):u.set(i,e);var v=(i,u,e)=>(j(i,u,"access private method"),e);var q=(i,u,e)=>I(H(i),e,u);import{s as w,u as A,a as J,g as p,b as c,i as l}from"./D5KdzY0j.js";var h,o,f,b,n,g,m;const x=class x extends Map{constructor(e){super();d(this,n);d(this,h,new Map);d(this,o,w(0));d(this,f,w(0));d(this,b,A||-1);if(e){for(var[t,r]of e)super.set(t,r);s(this,f).v=super.size}}has(e){var t=s(this,h),r=t.get(e);if(r===void 0){var a=super.get(e);if(a!==void 0)r=v(this,n,g).call(this,0),t.set(e,r);else return p(s(this,o)),!1}return p(r),!0}forEach(e,t){v(this,n,m).call(this),super.forEach(e,t)}get(e){var t=s(this,h),r=t.get(e);if(r===void 0){var a=super.get(e);if(a!==void 0)r=v(this,n,g).call(this,0),t.set(e,r);else{p(s(this,o));return}}return p(r),super.get(e)}set(e,t){var _;var r=s(this,h),a=r.get(e),C=super.get(e),D=super.set(e,t),z=s(this,o);if(a===void 0)a=v(this,n,g).call(this,0),r.set(e,a),c(s(this,f),super.size),l(z);else if(C!==t){l(a);var E=z.reactions===null?null:new Set(z.reactions),F=E===null||!((_=a.reactions)!=null&&_.every(G=>E.has(G)));F&&l(z)}return D}delete(e){var t=s(this,h),r=t.get(e),a=super.delete(e);return r!==void 0&&(t.delete(e),c(s(this,f),super.size),c(r,-1),l(s(this,o))),a}clear(){if(super.size!==0){super.clear();var e=s(this,h);c(s(this,f),0);for(var t of e.values())c(t,-1);l(s(this,o)),e.clear()}}keys(){return p(s(this,o)),super.keys()}values(){return v(this,n,m).call(this),super.values()}entries(){return v(this,n,m).call(this),super.entries()}[Symbol.iterator](){return this.entries()}get size(){return p(s(this,f)),super.size}};h=new WeakMap,o=new WeakMap,f=new WeakMap,b=new WeakMap,n=new WeakSet,g=function(e){return A===s(this,b)?w(e):J(e)},m=function(){p(s(this,o));var e=s(this,h);if(s(this,f).v!==e.size){for(var t of q(x.prototype,this,"keys").call(this))if(!e.has(t)){var r=v(this,n,g).call(this,0);e.set(t,r)}}for([,r]of s(this,h))p(r)};let B=x;export{B as S};
