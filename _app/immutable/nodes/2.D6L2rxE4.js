import"../chunks/CWj6FrbW.js";import"../chunks/SiSAkwjt.js";import{ak as le,p as ne,a9 as w,al as ce,am as R,an as ve,f as g,a as de,t as C,b as p,c as ue,X as E,n as c,i as e,e as _,j as d,s as o,d as i,r,w as pe}from"../chunks/C2k6CbEI.js";import{i as U}from"../chunks/Crl2Bchr.js";import{e as _e,i as ge}from"../chunks/DJAOMF32.js";import{T as be,s as A}from"../chunks/GdbsWXTA.js";import{s as fe}from"../chunks/B3jgN6p-.js";import{i as we}from"../chunks/CBMlR3ml.js";import{b as m}from"../chunks/DcoJXAFg.js";import{A as me}from"../chunks/BxxS8XqS.js";import"../chunks/BSb8eFOk.js";function ke(L,u){e(u).profile.loginGoogle(e(u))}function ye(L,u,k){window.confirm("Are you sure you want to stay logged out? You might need to sync manually later")&&(e(u).profile.updateLoginStatus(void 0),d(k,e(u).profile.isAutomaticallyLoggedOut()))}var he=g('<a class="deck-card svelte-142wub4"><div class="left"><span class="deck-card-title svelte-142wub4"> </span> <span class="deck-card-subtitle svelte-142wub4"> </span></div> <div class="right svelte-142wub4"><span class="deck-count-learn-relearn svelte-142wub4" title="learning"> </span> <span class="deck-count-review svelte-142wub4" title="review"> </span> <span class="deck-count-new svelte-142wub4" title="new"> </span> <span class="deck-count-previously-studied svelte-142wub4" title="previously studied"> </span></div></a>'),xe=g('<span class="update-circle svelte-142wub4"></span>'),Ce=g('<a class="a-button svelte-142wub4">Add New Deck</a>'),Ae=g('<div class="deck-card-container svelte-142wub4"><!> <a class="deck-card-button svelte-142wub4" title="Deck Info" aria-label="Deck Info"><i class="fa-solid fa-list"></i></a></div>'),Le=g('<div class="deck-list-container svelte-142wub4"></div>'),Se=g(`<div class="auto-logout-info-container svelte-142wub4"><div><i class="fa-solid fa-circle-info" style="color: #3E92CC;"></i> <p>You are <b>unexpectedly logged out</b> due to session expiration or server issue.
                    Try logging in again.</p> <p class="note svelte-142wub4">(*Please report to the developer if this happens frequently.)</p> <div><button class="button svelte-142wub4"><i class="fa-brands fa-google"></i>&nbsp;
                        Log in with Google</button> <button class="button invert svelte-142wub4"><i class="fa-solid fa-ban"></i>&nbsp;
                        Stay Logged Out</button></div></div></div>`),De=g('<!> <div class="main-container svelte-142wub4"><div class="top-container svelte-142wub4"><a class="a-button svelte-142wub4" style="background-color: #A0D0F0;"><div style="display: flex; align-items: center; justify-content: space-between;"><span>Changelog</span> <span style="opacity: 0.4; font-weight: bold;"> </span></div> <!></a> <!></div> <div class="hr svelte-142wub4"></div> <!></div>',1);function qe(L,u){ne(u,!1);const k=w(),y=w(),Y=(s,a=pe)=>{var v=he(),l=i(v),n=i(l),b=i(n,!0);r(n);var f=o(n,2),$=i(f,!0);r(f),r(l);var q=o(l,2),W=i(q),Z=i(W,!0);r(W);var N=o(W,2),ee=i(N,!0);r(N);var j=o(N,2),ae=i(j,!0);r(j);var I=o(j,2),te=i(I,!0);r(I),r(q),r(v),C((se,re,ie,oe)=>{A(v,"href",`${m??""}/overview?id=${a(),c(()=>a().id)??""}`),_(b,(a(),c(()=>a().title))),fe(f,(a(),c(()=>`--subtitle-color: ${a().color??"#00000080"}`))),_($,(a(),c(()=>a().subtitle))),_(Z,se),_(ee,re),_(ae,ie),_(te,oe)},[()=>(e(t),a(),c(()=>e(t).getLearningRelearningCardsCount(a().id)||"")),()=>(e(t),a(),c(()=>e(t).getScheduledReviewCardsCount(a().id)||"")),()=>(e(t),a(),c(()=>e(t).getScheduledNewOrWarmUpCardsCount(a().id)||"")),()=>(e(t),a(),c(()=>e(t).getScheduledPreviouslyStudiedCardsCount(a().id)||""))],E),p(s,v)};let t=w(new me),h=w(!1),S=w(!1);ce(async()=>{await e(t).init(),d(t,e(t)),d(S,e(t).isNewUpdateExist()),F();const s=await e(t).initProfile();d(h,e(t).profile.isAutomaticallyLoggedOut()),s&&d(t,e(t)),d(S,e(t).isNewUpdateExist())});function F(){"serviceWorker"in navigator&&navigator.serviceWorker.register(`${m}/service-worker.js`).then(s=>{}).catch(s=>console.error("SW registration failed:",s))}R(()=>e(t),()=>{d(k,Object.keys(e(t).deckData))}),R(()=>e(h),()=>{d(y,e(h))}),ve(),we();var B=De(),G=de(B);be(G,{title:"WenBun (beta)",noBack:!0});var P=o(G,2),D=i(P),x=i(D),O=i(x),T=o(i(O),2),M=i(T);r(T),r(O);var V=o(O,2);{var X=s=>{var a=xe();p(s,a)};U(V,s=>{e(S)&&s(X)})}r(x);var z=o(x,2);{var H=s=>{var a=Ce();C(()=>A(a,"href",`${m??""}/deck-browser/`)),p(s,a)};U(z,s=>{e(y)||s(H)})}r(D);var J=o(D,4);{var K=s=>{var a=Le();_e(a,5,()=>e(k),ge,(v,l)=>{var n=Ae(),b=i(n),f=E(()=>(e(t),e(l),c(()=>e(t).getDeckInfo(e(l)))));Y(b,()=>e(f));var $=o(b,2);r(n),C(()=>A($,"href",`${m??""}/deck?id=${e(l)??""}`)),p(v,n)}),r(a),p(s,a)},Q=s=>{var a=Se(),v=i(a),l=o(i(v),6),n=i(l);n.__click=[ke,t];var b=o(n,2);b.__click=[ye,t,h],r(l),r(v),r(a),p(s,a)};U(J,s=>{e(y)?s(Q,!1):s(K)})}r(P),C(s=>{A(x,"href",`${m??""}/about/`),_(M,`v${s??""}`)},[()=>(e(t),c(()=>e(t).getCurrentAppVersion()))],E),p(L,B),ue()}le(["click"]);export{qe as component};
