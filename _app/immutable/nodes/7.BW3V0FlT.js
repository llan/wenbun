var xt=Object.defineProperty;var St=(r,t,i)=>t in r?xt(r,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):r[t]=i;var De=(r,t,i)=>St(r,typeof t!="symbol"?t+"":t,i);import"../chunks/CWj6FrbW.js";import"../chunks/Bwjk16kZ.js";import{a as Tt,d as ot,o as lt,s as ee}from"../chunks/Bm5w9rKm.js";import{h as $e,n as At,$ as Rt,aZ as Et,a_ as It,k as Gt,z as Nt,y as Ut,v as Wt,a6 as zt,B as Dt,a4 as Ft,a$ as Pt,b0 as Mt,e as Ht,W,b1 as Ot,b2 as Lt,b3 as qt,b4 as Bt,Q as Zt,ai as Ee,a7 as ct,s as be,an as Yt,b as v,aa as z,ag as y,ah as h,af as I,g as e,ac as Ce,ad as A,ae as dt,ab as Fe,ay as ut,E as N,a8 as et,a9 as jt,b5 as Xt,Y as tt,aX as Kt,o as _e,b6 as Qt}from"../chunks/CppPYvqM.js";import{i as O}from"../chunks/BmZSK_NP.js";import{e as vt,i as ft}from"../chunks/CboPmxil.js";import{s as se,c as Jt}from"../chunks/WtSHSpat.js";import{w as gt}from"../chunks/BlbU_EYf.js";import{i as Vt}from"../chunks/DR_ajWpe.js";import{p as Qe}from"../chunks/B8WkJiGh.js";import{b as mt}from"../chunks/BSi2MV8y.js";import{g as x,C as $t,h as ea,T as at,p as ta,A as aa,c as rt,i as ra,W as ne}from"../chunks/BwqE_mTR.js";import{s as U,T as ia}from"../chunks/BgD2c6e2.js";import{s as na}from"../chunks/pvgapcXO.js";import{H as sa}from"../chunks/DcL13wi7.js";function Ke(r,t,i){$e&&At();var n=r,s=zt,_,T=Rt()?Et:It;Gt(()=>{T(s,s=t())&&(_&&Nt(_),_=Ut(()=>i(n)))}),$e&&(n=Wt)}const oa=()=>performance.now(),ve={tick:r=>requestAnimationFrame(r),now:()=>oa(),tasks:new Set};function ht(){const r=ve.now();ve.tasks.forEach(t=>{t.c(r)||(ve.tasks.delete(t),t.f())}),ve.tasks.size!==0&&ve.tick(ht)}function la(r){let t;return ve.tasks.size===0&&ve.tick(ht),{promise:new Promise(i=>{ve.tasks.add(t={c:r,f:i})}),abort(){ve.tasks.delete(t)}}}function qe(r,t){gt(()=>{r.dispatchEvent(new CustomEvent(t))})}function ca(r){if(r==="float")return"cssFloat";if(r==="offset")return"cssOffset";if(r.startsWith("--"))return r;const t=r.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(i=>i[0].toUpperCase()+i.slice(1)).join("")}function it(r){const t={},i=r.split(";");for(const n of i){const[s,_]=n.split(":");if(!s||_===void 0)break;const T=ca(s.trim());t[T]=_.trim()}return t}const da=r=>r;function nt(r,t,i,n){var s=(r&Lt)!==0,_=(r&qt)!==0,T=s&&_,b=(r&Ot)!==0,f=T?"both":s?"in":"out",D,S=t.inert,te=t.style.overflow,C,g;function a(){return gt(()=>D??(D=i()(t,(n==null?void 0:n())??{},{direction:f})))}var l={is_global:b,in(){var c;if(t.inert=S,!s){g==null||g.abort(),(c=g==null?void 0:g.reset)==null||c.call(g);return}_||C==null||C.abort(),qe(t,"introstart"),C=Je(t,a(),g,1,()=>{qe(t,"introend"),C==null||C.abort(),C=D=void 0,t.style.overflow=te})},out(c){if(!_){c==null||c(),D=void 0;return}t.inert=!0,qe(t,"outrostart"),g=Je(t,a(),C,0,()=>{qe(t,"outroend"),c==null||c()})},stop:()=>{C==null||C.abort(),g==null||g.abort()}},R=Dt;if((R.transitions??(R.transitions=[])).push(l),s&&Tt){var L=b;if(!L){for(var E=R.parent;E&&(E.f&Ft)!==0;)for(;(E=E.parent)&&(E.f&Pt)===0;);L=!E||(E.f&Mt)!==0}L&&Ht(()=>{W(()=>l.in())})}}function Je(r,t,i,n,s){var _=n===1;if(Bt(t)){var T,b=!1;return Zt(()=>{if(!b){var R=t({direction:_?"in":"out"});T=Je(r,R,i,n,s)}}),{abort:()=>{b=!0,T==null||T.abort()},deactivate:()=>T.deactivate(),reset:()=>T.reset(),t:()=>T.t()}}if(i==null||i.deactivate(),!(t!=null&&t.duration))return s(),{abort:Ee,deactivate:Ee,reset:Ee,t:()=>n};const{delay:f=0,css:D,tick:S,easing:te=da}=t;var C=[];if(_&&i===void 0&&(S&&S(0,1),D)){var g=it(D(0,1));C.push(g,g)}var a=()=>1-n,l=r.animate(C,{duration:f,fill:"forwards"});return l.onfinish=()=>{l.cancel();var R=(i==null?void 0:i.t())??1-n;i==null||i.abort();var L=n-R,E=t.duration*Math.abs(L),c=[];if(E>0){var ae=!1;if(D)for(var we=Math.ceil(E/16.666666666666668),Z=0;Z<=we;Z+=1){var oe=R+L*te(Z/we),Y=it(D(oe,1-oe));c.push(Y),ae||(ae=Y.overflow==="hidden")}ae&&(r.style.overflow="hidden"),a=()=>{var F=l.currentTime;return R+L*te(F/E)},S&&la(()=>{if(l.playState!=="running")return!1;var F=a();return S(F,1-F),!0})}l=r.animate(c,{duration:E,fill:"forwards"}),l.onfinish=()=>{a=()=>n,S==null||S(n,1-n),s()}},{abort:()=>{l&&(l.cancel(),l.effect=null,l.onfinish=Ee)},deactivate:()=>{s=Ee},reset:()=>{n===0&&(S==null||S(1,0))},t:()=>a()}}const ua=({url:r})=>({deckId:r.searchParams.get("id")||"",isExtraStudy:r.searchParams.get("isExtraStudy")==="true",cardIds:r.searchParams.get("cardIds")||encodeURIComponent("[]")}),ar=Object.freeze(Object.defineProperty({__proto__:null,load:ua},Symbol.toStringTag,{value:"Module"}));class va{constructor(t,i=!0){De(this,"audios");De(this,"currentIndex",0);De(this,"isPlaying",!1);De(this,"onEnded",this.handleEnded.bind(this));this.audios=t.map(n=>{const s=new Audio(n);return s.preload="auto",i&&s.load(),s})}handleEnded(){this.audios[this.currentIndex].removeEventListener("ended",this.onEnded),this.currentIndex++,this.currentIndex<this.audios.length?this.playCurrent():(this.isPlaying=!1,this.currentIndex=0)}playCurrent(){const t=this.audios[this.currentIndex];t.addEventListener("ended",this.onEnded),t.currentTime=0,t.play().catch(i=>{console.warn("Playback failed:",i),this.stop()})}play(){this.audios.length!==0&&(this.isPlaying&&this.stop(),this.isPlaying=!0,this.currentIndex=0,this.playCurrent())}stop(){if(!this.isPlaying)return;this.isPlaying=!1;const t=this.audios[this.currentIndex];t.pause(),t.currentTime=0,t.removeEventListener("ended",this.onEnded),this.currentIndex=0}}const fa={[x.Again]:"Fail",[x.Hard]:"Hard",[x.Good]:"Good",[x.Easy]:"Easy"},ga={[x.Again]:"again",[x.Hard]:"hard",[x.Good]:"good",[x.Easy]:"easy"},ma={[x.Again]:"fa fa-solid fa-face-frown",[x.Hard]:"fa fa-solid fa-face-meh",[x.Good]:"fa fa-solid fa-face-smile",[x.Easy]:"fa fa-solid fa-star"};var Ve;(r=>{function t(n){const s=n.correctStrokeCount===0?1/0:n.incorrectStrokeCount/n.correctStrokeCount;return s<.25||n.incorrectStrokeCount<=2?x.Good:s<.75||n.incorrectStrokeCount<=4?x.Hard:x.Again}r.getGrade=t;function i(n){switch(n){case x.Again:return"Again";case x.Hard:return"Hard";case x.Good:return"Good";default:return"Unknown"}}r.gradeToLabel=i})(Ve||(Ve={}));var ha=(r,t)=>t(),_a=z('<button class="audio-button svelte-4rg8" aria-label="Play Audio"><i class="fa-solid fa-volume-low svelte-4rg8"></i></button>'),Ca=z('<div class="new-element-indicator svelte-4rg8">New Card</div>'),wa=z("<div>Warm Up</div>"),pa=z('<div class="new-element-indicator is-hidden svelte-4rg8"></div>'),ya=z('<span class="svelte-4rg8"> </span>'),ba=z('<span class="empty-character-box svelte-4rg8">&#x3000;</span>'),ka=z('<!> <div class="character-box-container svelte-4rg8"></div>',1),xa=(r,t)=>t(),Sa=z('<button><i></i> <span class="svelte-4rg8"> </span></button>'),Ta=z('<div class="character-writer svelte-4rg8"><div class="meaning svelte-4rg8"> </div> <div><div class="reading svelte-4rg8"> </div> <!></div> <div class="character-container svelte-4rg8"><div class="grid-background svelte-4rg8"><svg xmlns="http://www.w3.org/2000/svg" id="grid-background-target" class="svelte-4rg8"><line x1="0" y1="0" class="svelte-4rg8"></line><line y1="0" x2="0" class="svelte-4rg8"></line><line y1="0" class="svelte-4rg8"></line><line x1="0" class="svelte-4rg8"></line></svg></div> <div class="bottom-container svelte-4rg8"><!></div> <!></div></div>');function Aa(r,t){var Ue;ct(t,!0);let i=be(500),n=be(500),s="#DDD";const _=500,T=new Audio(`${mt}/assets/sounds/correct-choice-43861.mp3`);let b=be(Yt([])),f=be(!1),D=be(!1),S=be(!1);function te(){return parseFloat(getComputedStyle(document.documentElement).fontSize)}function C(){const d=te()*3*2;v(i,Math.min(document.documentElement.clientWidth-d,500),!0),v(n,e(i),!0)}let g=Qe(t,"isRequestManualGrade",15),a=Qe(t,"autoReviewData",15),l=be(0),R=(Ue=t.characterData)==null?void 0:Ue.meanings.join("; ");function L(d){for(const u of d)if(u.startsWith(at))return ta(u.substring(at.length))}function E(){var d;v(D,!0),!e(S)&&(t.cardConfig.isFirstTime?(v(l,(e(l)+1)%t.characterData.characters.length),window.setTimeout(()=>{ae(e(l))},_)):(T.play(),v(l,e(l)+1),e(l)==((d=t.characterData)==null?void 0:d.characters.length)?(t.onComplete({...a()}),v(f,!0),window.setTimeout(()=>{Z()},_)):window.setTimeout(()=>{ae(e(l))},_)))}let c;function ae(d){if(e(S)||!t.characterData)return;c&&(t.cardConfig.isFirstTime||c.cancelQuiz(),c.hideCharacter(),c.hideOutline());const u=L(t.characterData.tags[d]??[]);c=sa.create("grid-background-target",t.characterData.characters[d],{width:e(i),height:e(n),padding:5,showCharacter:!1,showOutline:t.cardConfig.isShowOutline,highlightOnComplete:!1,strokeColor:t.app.getChineseToneColor(u)??"#555",drawingWidth:$t,onComplete:()=>{E()}}),t.cardConfig.isFirstTime?(setTimeout(()=>{e(D)||Z()},_),setTimeout(()=>{c.animateCharacter({onComplete:()=>{setTimeout(()=>{c.hideOutline(),c.hideCharacter(),E()},_)}})},_)):c.quiz({onMistake:()=>{a(a().incorrectStrokeCount++,!0),a(a().totalStrokeCount++,!0)},onCorrectStroke:()=>{a(a().correctStrokeCount++,!0),a(a().totalStrokeCount++,!0)}})}function we(){var u;const d=(u=t.characterData)==null?void 0:u.audioUrl;d&&v(b,d.map(Q=>{const ge=Q.map(me=>ea(t.cardConfig.lang,me));return new va(ge)}),!0)}function Z(){const d=Math.floor(Math.random()*e(b).length),u=e(b)[d];u.stop(),u.play()}function oe(){if(t.cardConfig.isWarmUp){window.alert("Can't change grade during warm-up, since grading doesn't affect scheduling in this phase.");return}g(!g())}function Y(d=0){const u=t.cardConfig.warmUpCount??0,Q=t.cardConfig.warmUpMaxCount;return`${Math.round((u+d)/Q*100)}%`}lt(()=>(a({correctStrokeCount:0,incorrectStrokeCount:0,totalStrokeCount:0}),C(),we(),window.addEventListener("resize",C),ae(0),()=>{v(S,!0),window.removeEventListener("resize",C)}));var F=Ta(),fe=y(F),Pe=y(fe,!0);h(fe);var w=I(fe,2);let le;var Ie=y(w),ce=y(Ie,!0);h(Ie);var Be=I(Ie,2);{var Ze=d=>{var u=_a();u.__click=[ha,Z],A(d,u)};O(Be,d=>{e(b).length>0&&d(Ze)})}h(w);var Me=I(w,2),Ge=y(Me),ke=y(Ge),pe=y(ke);U(pe,"stroke",s);var xe=I(pe);U(xe,"stroke",s);var ye=I(xe);U(ye,"stroke",s);var Se=I(ye);U(Se,"stroke",s),h(ke),h(Ge);var Ne=I(Ge,2),Ye=y(Ne);{var je=d=>{var u=ka(),Q=Fe(u);{var ge=m=>{var k=Ca();A(m,k)},me=(m,k)=>{{var j=M=>{var J=wa();let P,p;Ce((G,K)=>{P=se(J,1,"new-element-indicator svelte-4rg8",null,P,G),p=na(J,"",p,K)},[()=>({"is-complete":e(f)}),()=>({"--progress":Y(),"--next-progress":Y(1)})]),A(M,J)},X=M=>{var J=pa();A(M,J)};O(m,M=>{t.cardConfig.isWarmUp?M(j):M(X,!1)},k)}};O(Q,m=>{t.cardConfig.isFirstTime?m(ge):m(me,!1)})}var o=I(Q,2);vt(o,21,()=>t.characterData.characters,ft,(m,k,j)=>{var X=ut(),M=Fe(X);{var J=p=>{var G=ya(),K=y(G,!0);h(G),Ce(()=>ee(K,e(k))),A(p,G)},P=p=>{var G=ba();A(p,G)};O(M,p=>{j<e(l)||t.cardConfig.isFirstTime?p(J):p(P,!1)})}A(m,X)}),h(o),A(d,u)};O(Ye,d=>{var u;(u=t.characterData)!=null&&u.characters&&d(je)})}h(Ne);var He=I(Ne,2);{var Oe=d=>{var u=Sa();let Q;u.__click=[xa,oe];var ge=y(u),me=I(ge,2),o=y(me,!0);h(me),h(u),Ce(m=>{Q=se(u,1,`auto-review-indicator-container ${ga[t.autoGrade]}`,"svelte-4rg8",Q,m),se(ge,1,Jt(ma[t.autoGrade]),"svelte-4rg8"),ee(o,fa[t.autoGrade])},[()=>({blinking:g(),animated:g(),"echo-once":!g()})]),A(d,u)};O(He,d=>{t.autoGrade&&d(Oe)})}h(Me),h(F),Ce(d=>{var u;ee(Pe,R),le=se(w,1,"reading-container svelte-4rg8",null,le,d),ee(ce,(u=t.characterData)==null?void 0:u.reading),U(ke,"width",e(i)),U(ke,"height",e(n)),U(pe,"x2",e(i)),U(pe,"y2",e(n)),U(xe,"x1",e(i)),U(xe,"y2",e(n)),U(ye,"x1",e(i)/2),U(ye,"x2",e(i)/2),U(ye,"y2",e(n)),U(Se,"y1",e(n)/2),U(Se,"x2",e(i)),U(Se,"y2",e(n)/2)},[()=>({"is-hidden":!t.app.getConfig().zh.alwaysShowReading&&!e(f)&&!t.cardConfig.isFirstTime})]),A(r,F),dt()}ot(["click"]);const Ra=r=>r;function Ea(r){const t=r-1;return t*t*t+1}function st(r){const t=typeof r=="string"&&r.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[r,"px"]}function Ia(r,{delay:t=0,duration:i=400,easing:n=Ra}={}){const s=+getComputedStyle(r).opacity;return{delay:t,duration:i,easing:n,css:_=>`opacity: ${_*s}`}}function Ga(r,{delay:t=0,duration:i=400,easing:n=Ea,x:s=0,y:_=0,opacity:T=0}={}){const b=getComputedStyle(r),f=+b.opacity,D=b.transform==="none"?"":b.transform,S=f*(1-T),[te,C]=st(s),[g,a]=st(_);return{delay:t,duration:i,easing:n,css:(l,R)=>`
			transform: ${D} translate(${(1-l)*te}${C}, ${(1-l)*g}${a});
			opacity: ${f-S*R}`}}function Na(r){const t=r-1;return t*t*t+1}var Ua=z('<button><div class="review-button-inner svelte-1irkfzg"><div class="review-time svelte-1irkfzg"> </div> <div class="review-label svelte-1irkfzg"> </div></div></button>'),Wa=z('<div class="bottom-container svelte-1irkfzg"><div></div></div>'),za=z(`<div class="svelte-1irkfzg">You have done today's review.</div>`),Da=z('<div class="counter svelte-1irkfzg"><span class="underlined svelte-1irkfzg"><!></span></div>'),Fa=z('<div class="counter svelte-1irkfzg"><span> </span> <span> </span> <span> </span> <span> </span></div>'),Pa=z('<!> <div class="character-writer-container svelte-1irkfzg"><!></div> <!>',1),Ma=z('<!> <div class="container svelte-1irkfzg"><!> <!></div>',1);function rr(r,t){ct(t,!1);const i=N(),n=N(),s=(o,m=Ee,k)=>{let j=_e(()=>Qt(k==null?void 0:k(),""));var X=Wa(),M=y(X);vt(M,5,m,ft,(J,P)=>{var p=Ua();let G;p.__click=function(...B){var H;(H=e(P).onclick)==null||H.apply(this,B)};var K=y(p),q=y(K),re=y(q,!0);h(q);var V=I(q,2),$=y(V,!0);h(V),h(K),h(p),Ce(B=>{G=se(p,1,(e(P),W(()=>`review-button ${e(P).className||""}`)),"svelte-1irkfzg",G,B),ee(re,(e(P),W(()=>e(P).sublabel||" "))),ee($,(e(P),W(()=>e(P).label||" ")))},[()=>({"is-complete":e(P).isComplete})],_e),A(J,p)}),h(M),h(X),Ce(()=>se(M,1,`review-button-container ${e(j)}`,"svelte-1irkfzg")),nt(1,X,()=>Ga,()=>_),nt(2,X,()=>Ia,()=>T),A(o,X)},_={delay:100,y:-100,duration:300,easing:Na},T={duration:200};let b=Qe(t,"data",8),f=b().deckId||"",D=b().cardIds||encodeURIComponent("[]"),S=JSON.parse(decodeURIComponent(D)),te=b().isExtraStudy?"Extra Study":"Review",C=N(),g=N(!1),a=N(new aa);lt(async()=>{var o,m,k,j;await e(a).init(),Z=(m=(o=e(a).deckData[f])==null?void 0:o.tags)==null?void 0:m.includes(rt.ZH_YUE),await E.init(Z?"yue":"zh"),v(a,e(a)),we=(j=(k=e(a).deckData[f])==null?void 0:k.tags)==null?void 0:j.includes(rt.ZH_TRAD),v(oe,e(a).isAutoGrading()),v(g,!0),b().isExtraStudy&&e(a).extraStudyHandler.registerReviewCardIdsOverride(S),ce()});let l=N(!1),R=N(!1),L=N(!1),E=new ra,c=N(void 0),ae=N(!1),we=!1,Z=!1,oe=N(!1),Y=N(void 0),F=N(!1),fe=N(0);const Pe=["Fail","Hard","Good","Easy"];let w=N(void 0),le=N({1:"",2:"",3:"",4:""});function Ie(){v(l,!1),v(ae,!1),v(Y,void 0),v(F,!1)}function ce(){Ie(),v(L,!0);const o=e(a).getNextCard(f);if(o===void 0){v(R,!0);return}e(a).getCard(f,o,!0)&&(v(L,!1),v(w,o),v(le,e(a).getRatingScheduledTimeStr(f,o)),v(c,e(a).getWenbunCustomState(f,o)),Xt(fe))}function Be(){e(a).startWarmUp(f,e(w)),v(ae,!0),v(w,e(w)),v(le,e(a).getRatingScheduledTimeStr(f,e(w))),v(c,e(a).getWenbunCustomState(f,e(w)))}function Ze(o){const m=e(a).getCardWord(f,o),k=e(a).getConfig();return E.getCharacterWriterData(m,{convertToTraditional:we,mandarinReading:k.zh.mandarinReading,isCantonese:Z,isPlayAudio:k.zh.playAudio})}function Me(o){const m=e(a).getWarmUpCount(f,o),k=e(n)&&m===0;return{isFirstTime:e(i),isWarmUp:e(n)&&!He(o),warmUpCount:m,warmUpMaxCount:e(a).getMaxWarmUpCount(),isShowOutline:e(i)||k,lang:Z?"yue":"zh"}}function Ge(o){v(l,!0),e(oe)&&v(Y,Ve.getGrade(o))}async function ke(o){e(a).rateCard(f,e(w),o),await e(a).save(),ce()}function pe(o){switch(o){case x.Easy:return"review-button-easy";case x.Good:return"review-button-good";case x.Hard:return"review-button-hard";case x.Again:return"review-button-fail"}}async function xe(){e(a).addIgnoredMark(f,e(w)),await e(a).save(),ce()}function ye(){e(a).extraStudyHandler.rateAgain(e(w)),ce()}function Se(){e(a).extraStudyHandler.rateGood(e(w)),ce()}async function Ne(){e(a).storeAutoGradeLog(e(C).correctStrokeCount,e(C).incorrectStrokeCount,e(Y)),e(a).rateCard(f,e(w),e(Y)),await e(a).save(),ce()}function Ye(o){v(Y,o),v(F,!1)}async function je(){e(a).warmUpNext(f,e(w)),await e(a).save(),ce()}function He(o,m){const k=e(a).getWarmUpCount(f,o);return k===void 0?!0:k>=e(a).getMaxWarmUpCount()}et(()=>(e(c),ne),()=>{v(i,e(c)===ne.New)}),et(()=>(e(c),ne),()=>{v(n,e(c)===ne.WarmUp)}),jt(),Vt();var Oe=Ma(),Ue=Fe(Oe);ia(Ue,{get title(){return te},get backUrl(){return`${mt??""}/`}});var d=I(Ue,2),u=y(d);{var Q=o=>{var m=za();A(o,m)};O(u,o=>{e(R)&&o(Q)})}var ge=I(u,2);{var me=o=>{var m=Pa(),k=Fe(m);Ke(k,()=>e(fe),p=>{var G=ut(),K=Fe(G);{var q=V=>{var $=Da(),B=y($),H=y(B);Ke(H,()=>e(w),We=>{var de=Kt();Ce(Te=>ee(de,Te),[()=>(e(a),W(()=>e(a).extraStudyHandler.getCardsCount()||""))],_e),A(We,de)}),h(B),h($),A(V,$)},re=V=>{var $=Fa(),B=y($);let H;var We=y(B,!0);h(B);var de=I(B,2);let Te;var he=y(de,!0);h(de);var Ae=I(de,2);let Le;var Xe=y(Ae,!0);h(Ae);var ie=I(Ae,2);let Re;var ze=y(ie,!0);h(ie),h($),Ce((ue,_t,Ct,wt,pt,yt,bt,kt)=>{H=se(B,1,"deck-count-learn-relearn svelte-1irkfzg",null,H,ue),ee(We,_t),Te=se(de,1,"deck-count-review svelte-1irkfzg",null,Te,Ct),ee(he,wt),Le=se(Ae,1,"deck-count-new svelte-1irkfzg",null,Le,pt),ee(Xe,yt),Re=se(ie,1,"deck-count-previously-studied svelte-1irkfzg",null,Re,bt),ee(ze,kt)},[()=>({underlined:e(c)===ne.Learning||e(c)===ne.Relearning}),()=>(e(a),W(()=>e(a).getLearningRelearningCardsCount(f)||"")),()=>({underlined:e(c)===ne.ReviewYoung||e(c)===ne.ReviewMature}),()=>(e(a),W(()=>e(a).getScheduledReviewCardsCount(f)||"")),()=>({underlined:e(c)===ne.New}),()=>(e(a),W(()=>e(a).getScheduledNewOrWarmUpCardsCount(f)||"")),()=>({underlined:e(c)===ne.PreviouslyStudied}),()=>(e(a),W(()=>e(a).getScheduledPreviouslyStudiedCardsCount(f)||""))],_e),A(V,$)};O(K,V=>{tt(b()),W(()=>b().isExtraStudy)?V(q):V(re,!1)})}A(p,G)});var j=I(k,2),X=y(j);Ke(X,()=>[e(w),e(ae),e(L)],p=>{const G=_e(()=>(e(w),W(()=>Ze(e(w))))),K=_e(()=>(e(w),W(()=>Me(e(w)))));Aa(p,{get app(){return e(a)},get characterData(){return e(G)},onComplete:q=>Ge(q),get cardConfig(){return e(K)},get autoGrade(){return e(Y)},get isRequestManualGrade(){return e(F)},set isRequestManualGrade(q){v(F,q)},get autoReviewData(){return e(C)},set autoReviewData(q){v(C,q)},$$legacy:!0})}),h(j);var M=I(j,2);{var J=p=>{s(p,()=>[{label:"Ignore",sublabel:"(Don't Learn)",className:"review-button-fail",isComplete:!0,onclick:()=>xe()},{label:""},{label:""},{label:"Learn",className:"review-button-easy",isComplete:!0,onclick:()=>Be()}])},P=(p,G)=>{{var K=re=>{s(re,()=>[{label:""},{label:""},{label:""},{label:"Next",className:"review-button-easy",isComplete:e(l),onclick:()=>je()}])},q=(re,V)=>{{var $=H=>{s(H,()=>[{label:"Again",sublabel:"(Put Back)",className:"review-button-fail",isComplete:e(l),onclick:()=>ye()},{label:""},{label:""},{label:"Good",className:"review-button-easy",isComplete:e(l),onclick:()=>Se()}])},B=(H,We)=>{{var de=he=>{s(he,()=>[{label:""},{label:""},{label:""},{label:"Next",className:"review-button-easy",isComplete:e(l),onclick:()=>Ne()}])},Te=(he,Ae)=>{{var Le=ie=>{var Re=_e(()=>(e(le),e(l),W(()=>Pe.map((ze,ue)=>({label:ze,sublabel:e(le)[ue+1],className:pe(ue+1),isComplete:e(l),onclick:()=>Ye(ue+1)})))));s(ie,()=>e(Re),()=>"pulsing")},Xe=ie=>{var Re=_e(()=>(e(le),e(l),W(()=>Pe.map((ze,ue)=>({label:ze,sublabel:e(le)[ue+1],className:pe(ue+1),isComplete:e(l),onclick:()=>ke(ue+1)})))));s(ie,()=>e(Re))};O(he,ie=>{e(oe)&&e(F)?ie(Le):ie(Xe,!1)},Ae)}};O(H,he=>{e(oe)&&!e(F)?he(de):he(Te,!1)},We)}};O(re,H=>{tt(b()),W(()=>b().isExtraStudy)?H($):H(B,!1)},V)}};O(p,re=>{e(n),e(w),e(fe),W(()=>e(n)&&!He(e(w),e(fe)))?re(K):re(q,!1)},G)}};O(M,p=>{e(i)?p(J):p(P,!1)})}A(o,m)};O(ge,o=>{e(g)&&e(w)!==void 0&&!e(R)&&o(me)})}h(d),A(r,Oe),dt()}ot(["click"]);export{rr as component,ar as universal};
