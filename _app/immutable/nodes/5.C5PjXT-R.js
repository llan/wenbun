import"../chunks/CWj6FrbW.js";import"../chunks/C9SiBo4C.js";import{d as R,o as aa,s as x}from"../chunks/C2FOGMiU.js";import{O as ea,P as g,S as z,T as W,W as D,X as ta,Y as d,g as a,b as c,Z as t,_ as e,V as M,a2 as sa,a0 as ia}from"../chunks/XIoSnaTS.js";import{i as ra}from"../chunks/DAhYkV_L.js";import{A as la,D as h,l as oa,e as X,i as Y,a as da}from"../chunks/C5zbToTu.js";import{s as ca}from"../chunks/new4gNWg.js";import{s as na}from"../chunks/C51PpzTX.js";import{b as va}from"../chunks/CXtgs1k7.js";import{i as pa}from"../chunks/DEcBvPEb.js";import{b as _a}from"../chunks/DSrDDK85.js";import{T as fa}from"../chunks/CgsJgLrP.js";import{S as ua}from"../chunks/D4SJP2w-.js";var ma=($,n,s)=>n(a(s)),ka=z("<option> </option>"),ba=($,n,s)=>n(a(s).id),wa=z('<div class="deck-card-container svelte-dfzxow"><div class="deck-card svelte-dfzxow"><div class="left"><span class="deck-card-title svelte-dfzxow"> </span> <span class="deck-card-subtitle svelte-dfzxow"> </span></div> <div class="right"><span class="deck-card-count svelte-dfzxow"> </span></div></div> <button title="Add deck" aria-label="Add deck"><i class="fa-solid fa-plus"></i></button></div>'),xa=z('<div class="top-container svelte-dfzxow"><div class="filter-container"><span class="filter-label">Filter:</span> <select class="filter-select svelte-dfzxow"><option></option><!></select></div></div> <div class="deck-list-container svelte-dfzxow"></div>',1),ga=z('<!> <div class="main-container svelte-dfzxow"><!></div>',1);function Ia($,n){ea(n,!1);let s=g(new la),S=new ua,L=g(!1),_=g(""),y=g(h);aa(async()=>{await a(s).init(),await Z(),c(s,a(s)),c(L,!0)});async function Z(){await Promise.allSettled(h.map(async i=>{const o=await oa(i.src);o&&S.set(i.id,{cardCount:o.length})}))}async function j(i){await a(s).addDeck(i),c(s,a(s))}function E(i){i.trim()?c(y,h.filter(o=>`${o.title} ${o.subtitle}`.toLowerCase().includes(i.toLowerCase()))):c(y,h)}pa();var T=ga(),B=W(T);fa(B,{title:"Browse Decks",get backUrl(){return`${_a??""}/`}});var F=d(B,2),G=t(F);{var H=i=>{var o=xa(),f=W(o),I=t(f),u=d(t(I),2);M(()=>{a(_),sa(()=>{})}),u.__change=[ma,E,_];var A=t(u);A.value=A.__value="";var J=d(A);X(J,1,()=>da,Y,(v,r,m,k)=>{var l=ka(),p=t(l,!0);e(l);var b={};M(()=>{x(p,a(r)),b!==(b=a(r))&&(l.value=(l.__value=a(r))??"")}),D(v,l)}),e(u),e(I),e(f);var P=d(f,2);X(P,5,()=>a(y),Y,(v,r)=>{var m=wa(),k=t(m),l=t(k),p=t(l),b=t(p,!0);e(p);var C=d(p,2),K=t(C,!0);e(C),e(l);var q=d(l,2),O=t(q),N=t(O);e(O),e(q),e(k);var U=d(k,2);let V;U.__click=[ba,j,r],e(m),M((w,Q)=>{x(b,a(r).title),na(C,`--subtitle-color: ${a(r).color??"#00000080"}`),x(K,a(r).subtitle),x(N,`${w??""} cards`),V=ca(U,1,"deck-add-button svelte-dfzxow",null,V,Q)},[()=>{var w;return((w=S.get(a(r).id))==null?void 0:w.cardCount)??0},()=>({invisible:a(s).decks.includes(a(r).id)})],ia),D(v,m)}),e(P),va(u,()=>a(_),v=>c(_,v)),D(i,o)};ra(G,i=>{a(L)&&i(H)})}e(F),D($,T),ta()}R(["change","click"]);export{Ia as component};
