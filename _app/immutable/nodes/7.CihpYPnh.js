import"../chunks/CWj6FrbW.js";import"../chunks/DOgQlnTX.js";import{s as ne,d as We,o as Xe}from"../chunks/Bsyno7US.js";import{O as Ve,S as n,Z as d,_ as v,Y as r,ag as Ke,$ as et,V as T,W as s,X as Ie,P as x,Q as oe,R as tt,T as ie,g as e,b as h,ai as _,ah as Y,d as y,y as b,a1 as at}from"../chunks/CrjiG-ry.js";import{i as Me}from"../chunks/ePQMPTo3.js";import{S as ot,A as it,_ as U,N as l,d as R,e as rt,i as st,f as re}from"../chunks/CpOp4MQJ.js";import{T as nt,r as S,b as Ne}from"../chunks/570LOwQf.js";import{s as se}from"../chunks/CtOg9Xys.js";import{b as k,a as J}from"../chunks/BXlXC3Gj.js";import{b as Q}from"../chunks/CNlPLey3.js";import{i as lt}from"../chunks/DXlXy1gr.js";import{b as vt}from"../chunks/I4VfLNXk.js";var dt=n('<div class="settings-item"><label class="settings-label svelte-k8ruu5"><div><div class="settings-label-title"> </div> <div class="settings-label-help svelte-k8ruu5"> </div></div> <div class="settings-children"><!></div></label></div>');function f(z,u){Ve(u,!0);const A=ot[u.key]??{label:"",help:""};var V=dt(),P=d(V),a=d(P),L=d(a),W=d(L,!0);v(L);var Z=r(L,2),X=d(Z,!0);v(Z),v(a);var F=r(a,2),K=d(F);Ke(K,()=>u.children??et),v(F),v(P),v(V),T(()=>{ne(W,A.label),ne(X,A.help)}),s(z,V),Ie()}var ut=(z,u)=>u(),ct=(z,u)=>u(),pt=(z,u)=>u(),_t=(z,u)=>u(),ft=n('<textarea class="profile-textarea svelte-1t4a6o"></textarea> <button class="button svelte-1t4a6o">import</button> <div class="settings-label-help svelte-1t4a6o" style="margin: 1em 0">To manually export the profile data, copy the text above and store it somewhere safe.<br/> To manually import the profile data, paste the text into the textbox and click the import button.</div> <button class="button svelte-1t4a6o">Reset Debug Profile</button>',1),ht=(z,u)=>h(u,!e(u)),mt=(z,u)=>e(u).downloadProfile(),yt=(z,u)=>u(),bt=n('<input type="number" class="svelte-1t4a6o"/>'),gt=n('<input type="number" class="svelte-1t4a6o"/>'),$t=n("<select><option>Mix</option><option>After Reviews</option><option>Before Reviews</option></select>"),Pt=n('<input type="number" class="svelte-1t4a6o"/>'),St=n("<select><option>Mix</option><option>After Reviews</option><option>Before Reviews</option></select>"),wt=n('<input type="text"/>'),kt=n('<input type="text"/>'),Ct=n('<div style="display: flex; flex-direction: row; align-items: center; gap: 0.5em;"><input type="number" step="0.01" class="svelte-1t4a6o"/></div>'),xt=n('<input type="checkbox" class="svelte-1t4a6o"/>'),Rt=n('<input type="checkbox" class="svelte-1t4a6o"/>'),zt=n("<textarea></textarea>"),Tt=n('<input type="checkbox" class="svelte-1t4a6o"/>'),Dt=n("<select><option>Pinyin (wén)</option><option>Numeric (wen2)</option><option>Zhuyin (ㄨㄣˊ)</option></select>"),At=n('<input type="checkbox" class="svelte-1t4a6o"/>'),Lt=(z,u,A)=>u(e(A)),Ft=n("<option> </option>"),Ot=n("<div><div>Load Preset</div> <div><select></select></div></div>"),Bt=n('<input type="color" class="svelte-1t4a6o"/>'),Mt=n('<input type="color" class="svelte-1t4a6o"/>'),Nt=n('<input type="color" class="svelte-1t4a6o"/>'),Vt=n('<input type="color" class="svelte-1t4a6o"/>'),It=n('<input type="color" class="svelte-1t4a6o"/>'),jt=n(`<div class="top-settings-section svelte-1t4a6o"><button class="button svelte-1t4a6o">Save</button> <button class="button svelte-1t4a6o">Discard Changes</button></div> <div class="settings-section svelte-1t4a6o"><div class="section-title svelte-1t4a6o">Profile</div> <div class="section-container svelte-1t4a6o"><!> <button class="button svelte-1t4a6o">manual import/export</button> <button class="button svelte-1t4a6o"><i class="fa-solid fa-download"></i>&nbsp;
                    export profile data (download)</button> <button class="button svelte-1t4a6o"><i class="fa-solid fa-upload"></i>&nbsp;
                    import profile data (upload)</button></div></div> <div class="settings-section svelte-1t4a6o"><div class="section-title svelte-1t4a6o">Learning</div> <div class="section-container svelte-1t4a6o"><!> <!> <!> <!> <!></div></div> <div class="settings-section svelte-1t4a6o"><div class="section-title svelte-1t4a6o">FSRS</div> <div class="section-container svelte-1t4a6o"><!> <!> <!> <!> <!> <!></div></div> <div class="settings-section svelte-1t4a6o"><div class="section-title svelte-1t4a6o">Chinese</div> <div class="section-container svelte-1t4a6o"><!> <!> <!> <!> <!> <!> <!> <!> <!></div></div> <div class="settings-section svelte-1t4a6o"><div class="section-container svelte-1t4a6o"><a class="button svelte-1t4a6o" href="https://github.com/ray-pH/wenbun" aria-label="GitHub Repository" target="_blank"><i class="fa-brands fa-github"></i>&nbsp;
                    GitHub Repository</a> <a class="button svelte-1t4a6o" href="https://discord.gg/pVUuqJqywt" aria-label="GitHub Repository" target="_blank"><i class="fa-brands fa-discord"></i>&nbsp;
                    Discord Community Server</a></div></div>`,1),Gt=n('<!> <div class="main-container svelte-1t4a6o"><!></div>',1);function ta(z,u){Ve(u,!1);const A=x(),V=x();let P=x(new it),a=x(),L=x();Xe(async()=>{await e(P).init(),h(a,U.cloneDeep(e(P).getConfig())),h(L,U.cloneDeep(e(a))),h(j,e(a).learningSteps.join(" ")),h(G,e(a).previouslyStudiedLearningSteps.join(" ")),h(H,e(a).FSRSParams.join(",")),h(M,e(P).exportProfile()),h(ee,e(M)),h(P,e(P))});async function W(){await e(P).saveConfig(e(a)),h(L,U.cloneDeep(e(a)))}function Z(){h(a,U.cloneDeep(e(L)))}async function X(){window.confirm("Are you sure you want to reset to the debug profile?")&&(await e(P).debug(),h(P,e(P)))}let F=x("");function K(m){const O=re[m];O&&_(a,e(a).zh.toneColors=O),h(F,"")}let j=x(""),G=x(""),H=x(""),le=x(!1),M=x(""),ee=x("");function je(){e(P).tryImportProfile(e(M)).then(m=>{ve(m)})}function Ge(){e(P).tryUploadProfile().then(m=>{ve(m)})}function ve(m){m?window.alert("Successfully imported profile data"):window.alert("Failed to import profile data")}function He(){return new Promise(m=>{if(!e(A))m(!0);else{const O=window.confirm("You have unsaved changes. Are you sure you want to leave?");m(O)}})}oe(()=>(e(a),e(L)),()=>{h(A,!U.isEqual(e(a),e(L)))}),oe(()=>(e(a),e(j),e(G),e(H)),()=>{if(e(a)){const m=e(j).split(" ").map(c=>c.trim()).filter(c=>c);m.length<4&&m.every(c=>c.match(/^\d+[m|d]$/))&&_(a,e(a).learningSteps=m);const N=e(G).split(" ").map(c=>c.trim()).filter(c=>c);N.length<4&&N.every(c=>c.match(/^\d+[m|d]$/))&&_(a,e(a).previouslyStudiedLearningSteps=N);const I=e(H).split(",").map(c=>c.trim()).filter(c=>c);I.length===21&&I.every(c=>!isNaN(parseFloat(c)))&&_(a,e(a).FSRSParams=I.map(c=>parseFloat(c)))}}),oe(()=>(e(M),e(ee)),()=>{h(V,e(M)!==e(ee))}),tt(),lt();var de=Gt(),ue=ie(de);nt(ue,{title:"Settings",get backUrl(){return`${vt??""}/`},isSettings:!0,backConfirmCallback:He});var ce=r(ue,2),Ue=d(ce);{var Ze=m=>{var O=jt(),N=ie(O),q=d(N);q.__click=[ut,W];var I=r(q,2);I.__click=[ct,Z],v(N);var E=r(N,2),c=r(d(E),2),pe=d(c);{var qe=i=>{var p=ft(),t=ie(p);Ne(t);var o=r(t,2);o.__click=[pt,je];var g=r(o,4);g.__click=[_t,X],T(()=>o.disabled=!e(V)),k(t,()=>e(M),$=>h(M,$)),s(i,p)};Me(pe,i=>{e(le)&&i(qe)})}var _e=r(pe,2);_e.__click=[ht,le];var fe=r(_e,2);fe.__click=[mt,P];var Ee=r(fe,2);Ee.__click=[yt,Ge],v(c),v(E);var te=r(E,2),he=r(d(te),2),me=d(he);f(me,{key:"newCardPerDay",children:(i,p)=>{var t=bt();S(t),k(t,()=>e(a).newCardPerDay,o=>_(a,e(a).newCardPerDay=o)),s(i,t)},$$slots:{default:!0}});var ye=r(me,2);f(ye,{key:"maxReviewsPerDay",children:(i,p)=>{var t=gt();S(t),k(t,()=>e(a).maxReviewsPerDay,o=>_(a,e(a).maxReviewsPerDay=o)),s(i,t)},$$slots:{default:!0}});var be=r(ye,2);f(be,{key:"newCardOrder",children:(i,p)=>{var t=$t();T(()=>{e(a),Y(()=>{})});var o=d(t),g={},$=r(o),C={},w=r($),D={};v(t),T(()=>{g!==(g=(b(l),y(()=>l.Mix)))&&(o.value=(o.__value=(b(l),y(()=>l.Mix)))??""),C!==(C=(b(l),y(()=>l.AfterReviews)))&&($.value=($.__value=(b(l),y(()=>l.AfterReviews)))??""),D!==(D=(b(l),y(()=>l.BeforeReviews)))&&(w.value=(w.__value=(b(l),y(()=>l.BeforeReviews)))??"")}),Q(t,()=>e(a).newCardOrder,B=>_(a,e(a).newCardOrder=B)),s(i,t)},$$slots:{default:!0}});var ge=r(be,2);f(ge,{key:"newPreviouslyStudiedCardPerDay",children:(i,p)=>{var t=Pt();S(t),k(t,()=>e(a).newPreviouslyStudiedCardPerDay,o=>_(a,e(a).newPreviouslyStudiedCardPerDay=o)),s(i,t)},$$slots:{default:!0}});var Ye=r(ge,2);f(Ye,{key:"newPreviouslyStudiedCardOrder",children:(i,p)=>{var t=St();T(()=>{e(a),Y(()=>{})});var o=d(t),g={},$=r(o),C={},w=r($),D={};v(t),T(()=>{g!==(g=(b(l),y(()=>l.Mix)))&&(o.value=(o.__value=(b(l),y(()=>l.Mix)))??""),C!==(C=(b(l),y(()=>l.AfterReviews)))&&($.value=($.__value=(b(l),y(()=>l.AfterReviews)))??""),D!==(D=(b(l),y(()=>l.BeforeReviews)))&&(w.value=(w.__value=(b(l),y(()=>l.BeforeReviews)))??"")}),Q(t,()=>e(a).newPreviouslyStudiedCardOrder,B=>_(a,e(a).newPreviouslyStudiedCardOrder=B)),s(i,t)},$$slots:{default:!0}}),v(he),v(te);var ae=r(te,2),$e=r(d(ae),2),Pe=d($e);f(Pe,{key:"learningSteps",children:(i,p)=>{var t=wt();S(t),se(t,1,"svelte-1t4a6o",null,{},{invalid:!1}),k(t,()=>e(j),o=>h(j,o)),s(i,t)},$$slots:{default:!0}});var Se=r(Pe,2);f(Se,{key:"previouslyStudiedLearningSteps",children:(i,p)=>{var t=kt();S(t),se(t,1,"svelte-1t4a6o",null,{},{invalid:!1}),k(t,()=>e(G),o=>h(G,o)),s(i,t)},$$slots:{default:!0}});var we=r(Se,2);f(we,{key:"desiredRetention",children:(i,p)=>{var t=Ct(),o=d(t);S(o),v(t),k(o,()=>e(a).desiredRetention,g=>_(a,e(a).desiredRetention=g)),s(i,t)},$$slots:{default:!0}});var ke=r(we,2);f(ke,{key:"enableShortTerm",children:(i,p)=>{var t=xt();S(t),J(t,()=>e(a).enableShortTerm,o=>_(a,e(a).enableShortTerm=o)),s(i,t)},$$slots:{default:!0}});var Ce=r(ke,2);f(Ce,{key:"enableFuzz",children:(i,p)=>{var t=Rt();S(t),J(t,()=>e(a).enableFuzz,o=>_(a,e(a).enableFuzz=o)),s(i,t)},$$slots:{default:!0}});var Je=r(Ce,2);f(Je,{key:"FSRSParams",children:(i,p)=>{var t=zt();Ne(t),se(t,1,"",null,{},{invalid:!1}),k(t,()=>e(H),o=>h(H,o)),s(i,t)},$$slots:{default:!0}}),v($e),v(ae);var xe=r(ae,2),Re=r(d(xe),2),ze=d(Re);f(ze,{key:"zhAlwaysShowReading",children:(i,p)=>{var t=Tt();S(t),J(t,()=>e(a).zh.alwaysShowReading,o=>_(a,e(a).zh.alwaysShowReading=o)),s(i,t)},$$slots:{default:!0}});var Te=r(ze,2);f(Te,{key:"zhMandarinReading",children:(i,p)=>{var t=Dt();T(()=>{e(a),Y(()=>{})});var o=d(t),g={},$=r(o),C={},w=r($),D={};v(t),T(()=>{g!==(g=(b(R),y(()=>R.Pinyin)))&&(o.value=(o.__value=(b(R),y(()=>R.Pinyin)))??""),C!==(C=(b(R),y(()=>R.PinyinNumeric)))&&($.value=($.__value=(b(R),y(()=>R.PinyinNumeric)))??""),D!==(D=(b(R),y(()=>R.Zhuyin)))&&(w.value=(w.__value=(b(R),y(()=>R.Zhuyin)))??"")}),Q(t,()=>e(a).zh.mandarinReading,B=>_(a,e(a).zh.mandarinReading=B)),s(i,t)},$$slots:{default:!0}});var De=r(Te,2);f(De,{key:"zhIsColorBasedOnTone",children:(i,p)=>{var t=At();S(t),J(t,()=>e(a).zh.isColorBasedOnTone,o=>_(a,e(a).zh.isColorBasedOnTone=o)),s(i,t)},$$slots:{default:!0}});var Ae=r(De,2);f(Ae,{key:"zhToneColors",children:(i,p)=>{var t=Ot(),o=r(d(t),2),g=d(o);T(()=>{e(F),Y(()=>{})}),g.__change=[Lt,K,F],rt(g,5,()=>(b(re),y(()=>Object.keys(re))),st,($,C)=>{var w=Ft(),D=d(w,!0);v(w);var B={};T(()=>{ne(D,e(C)),B!==(B=e(C))&&(w.value=(w.__value=e(C))??"")}),s($,w)}),v(g),v(o),v(t),Q(g,()=>e(F),$=>h(F,$)),s(i,t)},$$slots:{default:!0}});var Le=r(Ae,2);f(Le,{key:"zhTone1",children:(i,p)=>{var t=Bt();S(t),k(t,()=>e(a).zh.toneColors[0],o=>_(a,e(a).zh.toneColors[0]=o)),s(i,t)},$$slots:{default:!0}});var Fe=r(Le,2);f(Fe,{key:"zhTone2",children:(i,p)=>{var t=Mt();S(t),k(t,()=>e(a).zh.toneColors[1],o=>_(a,e(a).zh.toneColors[1]=o)),s(i,t)},$$slots:{default:!0}});var Oe=r(Fe,2);f(Oe,{key:"zhTone3",children:(i,p)=>{var t=Nt();S(t),k(t,()=>e(a).zh.toneColors[2],o=>_(a,e(a).zh.toneColors[2]=o)),s(i,t)},$$slots:{default:!0}});var Be=r(Oe,2);f(Be,{key:"zhTone4",children:(i,p)=>{var t=Vt();S(t),k(t,()=>e(a).zh.toneColors[3],o=>_(a,e(a).zh.toneColors[3]=o)),s(i,t)},$$slots:{default:!0}});var Qe=r(Be,2);f(Qe,{key:"zhToneNeutral",children:(i,p)=>{var t=It();S(t),k(t,()=>e(a).zh.toneColors[4],o=>_(a,e(a).zh.toneColors[4]=o)),s(i,t)},$$slots:{default:!0}}),v(Re),v(xe),at(2),T(()=>{q.disabled=!e(A),I.disabled=!e(A)}),s(m,O)};Me(Ue,m=>{e(a)&&m(Ze)})}v(ce),s(z,de),Ie()}We(["click","change"]);export{ta as component};
