import"../chunks/CWj6FrbW.js";import"../chunks/CHpnjp_b.js";import{d as aa,o as ea,s as h}from"../chunks/3DT1RaQV.js";import{p as ta,_ as w,f as x,a as H,b as D,c as sa,s as c,h as a,i as n,d as i,r as t,t as L,a3 as ia,a2 as ra}from"../chunks/CvbXAzr3.js";import{i as la}from"../chunks/C7DlhgQh.js";import{e as J,i as K}from"../chunks/CeWMhBIq.js";import{s as oa}from"../chunks/DP3PND5f.js";import{s as ca}from"../chunks/8xkcVM4Q.js";import{b as na}from"../chunks/IfUQBNlN.js";import{i as da}from"../chunks/7MZX7QCZ.js";import{b as va}from"../chunks/Cq2_jRpj.js";import{A as pa}from"../chunks/GI3Q6ud1.js";import{D as $,l as _a,a as ba}from"../chunks/3UKrroMZ.js";import{T as ma}from"../chunks/DT6wTx3i.js";import{S as ua}from"../chunks/CkDQLKjo.js";var fa=(y,d,s)=>d(a(s)),ka=x("<option> </option>"),ga=(y,d,s)=>d(a(s).id),ha=x('<div class="deck-card-container svelte-4bbi26"><div class="deck-card svelte-4bbi26"><div class="left"><span class="deck-card-title svelte-4bbi26"> </span> <span class="deck-card-subtitle svelte-4bbi26"> </span></div> <div class="right svelte-4bbi26"><span class="deck-card-count svelte-4bbi26"> </span></div></div> <button title="Add deck" aria-label="Add deck"><i class="fa-solid fa-plus"></i></button></div>'),wa=x('<div class="top-container svelte-4bbi26"><div class="filter-container"><span class="filter-label">Filter:</span> <select class="filter-select svelte-4bbi26"><option></option><!></select></div></div> <div class="deck-list-container svelte-4bbi26"></div>',1),Da=x('<!> <div class="main-container svelte-4bbi26"><!></div>',1);function ja(y,d){ta(d,!1);let s=w(new pa),S=new ua,B=w(!1),_=w(""),C=w($);ea(async()=>{await a(s).init(),F(),await a(s).initProfile()&&F()});async function F(){await N(),n(s,a(s)),n(B,!0)}async function N(){await Promise.allSettled($.map(async e=>{const o=await _a(e.src??`${e.id}.txt`);o&&S.set(e.id,{cardCount:o.length})}))}async function O(e){await a(s).addDeck(e),n(s,a(s))}function Q(e){e.trim()?n(C,$.filter(o=>`${o.title} ${o.subtitle}`.toLowerCase().includes(e.toLowerCase()))):n(C,$)}da();var I=Da(),P=H(I);ma(P,{title:"Browse Decks",get backUrl(){return`${va??""}/`}});var T=c(P,2),R=i(T);{var V=e=>{var o=wa(),b=H(o),q=i(b),m=c(i(q),2);L(()=>{a(_),ia(()=>{})}),m.__change=[fa,Q,_];var A=i(m);A.value=A.__value="";var W=c(A);J(W,1,()=>ba,K,(v,r,u,f)=>{var l=ka(),p=i(l,!0);t(l);var k={};L(()=>{h(p,a(r)),k!==(k=a(r))&&(l.value=(l.__value=a(r))??"")}),D(v,l)}),t(m),t(q),t(b);var U=c(b,2);J(U,5,()=>a(C),K,(v,r)=>{var u=ha(),f=i(u),l=i(f),p=i(l),k=i(p,!0);t(p);var M=c(p,2),X=i(M,!0);t(M),t(l);var j=c(l,2),z=i(j),Y=i(z);t(z),t(j),t(f);var E=c(f,2);let G;E.__click=[ga,O,r],t(u),L((g,Z)=>{h(k,a(r).title),ca(M,`--subtitle-color: ${a(r).color??"#00000080"}`),h(X,a(r).subtitle),h(Y,`${g??""} cards`),G=oa(E,1,"deck-add-button svelte-4bbi26",null,G,Z)},[()=>{var g;return((g=S.get(a(r).id))==null?void 0:g.cardCount)??0},()=>({invisible:a(s).decks.includes(a(r).id)})],ra),D(v,u)}),t(U),na(m,()=>a(_),v=>n(_,v)),D(e,o)};la(R,e=>{a(B)&&e(V)})}t(T),D(y,I),sa()}aa(["change","click"]);export{ja as component};
