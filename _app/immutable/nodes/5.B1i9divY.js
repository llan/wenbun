import"../chunks/CWj6FrbW.js";import"../chunks/e1y9C63k.js";import{d as aa,o as ea,s as x}from"../chunks/BzFAuoMn.js";import{p as ta,X as g,f as z,a as E,b as h,c as sa,s as d,h as a,i as c,d as i,r as t,t as M,al as ia,H as ra}from"../chunks/BqfnsoT0.js";import{i as oa}from"../chunks/SbZFkT06.js";import{e as G,i as J}from"../chunks/4L0NknSj.js";import{s as la}from"../chunks/D7BTPPfp.js";import{s as da}from"../chunks/CLA87fU9.js";import{b as ca}from"../chunks/ChJKlppq.js";import{i as na}from"../chunks/BEabaf4r.js";import{b as va}from"../chunks/0thJK1pv.js";import{A as pa}from"../chunks/31fOCuSw.js";import{D,l as _a,a as fa}from"../chunks/BwjUfq8s.js";import{T as ma}from"../chunks/B7pZ-LzU.js";import{S as ua}from"../chunks/BCq4_qPV.js";var ka=($,n,s)=>n(a(s)),wa=z("<option> </option>"),ba=($,n,s)=>n(a(s).id),xa=z('<div class="deck-card-container svelte-dfzxow"><div class="deck-card svelte-dfzxow"><div class="left"><span class="deck-card-title svelte-dfzxow"> </span> <span class="deck-card-subtitle svelte-dfzxow"> </span></div> <div class="right"><span class="deck-card-count svelte-dfzxow"> </span></div></div> <button title="Add deck" aria-label="Add deck"><i class="fa-solid fa-plus"></i></button></div>'),ga=z('<div class="top-container svelte-dfzxow"><div class="filter-container"><span class="filter-label">Filter:</span> <select class="filter-select svelte-dfzxow"><option></option><!></select></div></div> <div class="deck-list-container svelte-dfzxow"></div>',1),ha=z('<!> <div class="main-container svelte-dfzxow"><!></div>',1);function Ha($,n){ta(n,!1);let s=g(new pa),L=new ua,S=g(!1),_=g(""),y=g(D);ea(async()=>{await a(s).init(),B(),await a(s).initProfile()&&B()});async function B(){await K(),c(s,a(s)),c(S,!0)}async function K(){await Promise.allSettled(D.map(async e=>{const l=await _a(e.src??`${e.id}.txt`);l&&L.set(e.id,{cardCount:l.length})}))}async function N(e){await a(s).addDeck(e),c(s,a(s))}function O(e){e.trim()?c(y,D.filter(l=>`${l.title} ${l.subtitle}`.toLowerCase().includes(e.toLowerCase()))):c(y,D)}na();var F=ha(),I=E(F);ma(I,{title:"Browse Decks",get backUrl(){return`${va??""}/`}});var P=d(I,2),Q=i(P);{var R=e=>{var l=ga(),f=E(l),T=i(f),m=d(i(T),2);M(()=>{a(_),ia(()=>{})}),m.__change=[ka,O,_];var C=i(m);C.value=C.__value="";var V=d(C);G(V,1,()=>fa,J,(v,r,u,k)=>{var o=wa(),p=i(o,!0);t(o);var w={};M(()=>{x(p,a(r)),w!==(w=a(r))&&(o.value=(o.__value=a(r))??"")}),h(v,o)}),t(m),t(T),t(f);var q=d(f,2);G(q,5,()=>a(y),J,(v,r)=>{var u=xa(),k=i(u),o=i(k),p=i(o),w=i(p,!0);t(p);var A=d(p,2),W=i(A,!0);t(A),t(o);var H=d(o,2),U=i(H),Y=i(U);t(U),t(H),t(k);var X=d(k,2);let j;X.__click=[ba,N,r],t(u),M((b,Z)=>{x(w,a(r).title),da(A,`--subtitle-color: ${a(r).color??"#00000080"}`),x(W,a(r).subtitle),x(Y,`${b??""} cards`),j=la(X,1,"deck-add-button svelte-dfzxow",null,j,Z)},[()=>{var b;return((b=L.get(a(r).id))==null?void 0:b.cardCount)??0},()=>({invisible:a(s).decks.includes(a(r).id)})],ra),h(v,u)}),t(q),ca(m,()=>a(_),v=>c(_,v)),h(e,l)};oa(Q,e=>{a(S)&&e(R)})}t(P),h($,F),sa()}aa(["change","click"]);export{Ha as component};
