var Wt=Object.defineProperty;var Et=(r,t,i)=>t in r?Wt(r,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):r[t]=i;var ze=(r,t,i)=>Et(r,typeof t!="symbol"?t+"":t,i);import"../chunks/CWj6FrbW.js";import"../chunks/CzuHQAlO.js";import{R as Gt,aU as It,V as Nt,aV as Ft,aW as Dt,o as Pt,K as E,aX as Mt,aY as Ht,aZ as Lt,a_ as Ot,au as zt,n as Ie,a1 as ft,p as mt,g as Te,ac as qt,a3 as gt,j as d,f as G,d as h,r as g,s as R,i as e,t as ge,e as K,b as S,c as ht,a as Ne,aF as _t,a9 as Bt,a2 as D,a4 as ot,a5 as Zt,aM as jt,M as lt,a8 as Yt,a6 as ye,a$ as Xt}from"../chunks/D4HdPs5E.js";import{i as H}from"../chunks/Bw_0fAwL.js";import{k as at}from"../chunks/DUx05Ywd.js";import{e as Ct,i as wt,c as Kt}from"../chunks/B7geMYGs.js";import{s as te}from"../chunks/Ds6VENQq.js";import{w as pt}from"../chunks/BhEVKEu2.js";import{i as Vt}from"../chunks/Dr98OFL6.js";import{p as nt}from"../chunks/un3tHoYv.js";import{b as Jt}from"../chunks/BsDyH6UM.js";import{l as b,A as Qt,W as ee}from"../chunks/DjoyjOE1.js";import{s as M,T as $t}from"../chunks/CchDJzo5.js";import{s as ea}from"../chunks/WdiivfIN.js";import{H as ta}from"../chunks/DcL13wi7.js";import{b as aa,i as ra,T as dt,p as na,c as rt,C as ia}from"../chunks/B6yibNKD.js";const sa=()=>performance.now(),he={tick:r=>requestAnimationFrame(r),now:()=>sa(),tasks:new Set};function yt(){const r=he.now();he.tasks.forEach(t=>{t.c(r)||(he.tasks.delete(t),t.f())}),he.tasks.size!==0&&he.tick(yt)}function oa(r){let t;return he.tasks.size===0&&he.tick(yt),{promise:new Promise(i=>{he.tasks.add(t={c:r,f:i})}),abort(){he.tasks.delete(t)}}}function Ye(r,t){pt(()=>{r.dispatchEvent(new CustomEvent(t))})}function la(r){if(r==="float")return"cssFloat";if(r==="offset")return"cssOffset";if(r.startsWith("--"))return r;const t=r.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(i=>i[0].toUpperCase()+i.slice(1)).join("")}function ct(r){const t={},i=r.split(";");for(const s of i){const[l,k]=s.split(":");if(!l||k===void 0)break;const I=la(l.trim());t[I]=k.trim()}return t}const da=r=>r;function ut(r,t,i,s){var l=(r&Ht)!==0,k=(r&Lt)!==0,I=l&&k,y=(r&Mt)!==0,c=I?"both":l?"in":"out",L,T=t.inert,ae=t.style.overflow,p,_;function a(){return pt(()=>L??(L=i()(t,(s==null?void 0:s())??{},{direction:c})))}var o={is_global:y,in(){var f;if(t.inert=T,!l){_==null||_.abort(),(f=_==null?void 0:_.reset)==null||f.call(_);return}k||p==null||p.abort(),Ye(t,"introstart"),p=it(t,a(),_,1,()=>{Ye(t,"introend"),p==null||p.abort(),p=L=void 0,t.style.overflow=ae})},out(f){if(!k){f==null||f(),L=void 0;return}t.inert=!0,Ye(t,"outrostart"),_=it(t,a(),p,0,()=>{Ye(t,"outroend"),f==null||f()})},stop:()=>{p==null||p.abort(),_==null||_.abort()}},C=Gt;if((C.transitions??(C.transitions=[])).push(o),l&&It){var B=y;if(!B){for(var N=C.parent;N&&(N.f&Nt)!==0;)for(;(N=N.parent)&&(N.f&Ft)===0;);B=!N||(N.f&Dt)!==0}B&&Pt(()=>{E(()=>o.in())})}}function it(r,t,i,s,l){var k=s===1;if(Ot(t)){var I,y=!1;return zt(()=>{if(!y){var C=t({direction:k?"in":"out"});I=it(r,C,i,s,l)}}),{abort:()=>{y=!0,I==null||I.abort()},deactivate:()=>I.deactivate(),reset:()=>I.reset(),t:()=>I.t()}}if(i==null||i.deactivate(),!(t!=null&&t.duration))return l(),{abort:Ie,deactivate:Ie,reset:Ie,t:()=>s};const{delay:c=0,css:L,tick:T,easing:ae=da}=t;var p=[];if(k&&i===void 0&&(T&&T(0,1),L)){var _=ct(L(0,1));p.push(_,_)}var a=()=>1-s,o=r.animate(p,{duration:c,fill:"forwards"});return o.onfinish=()=>{o.cancel();var C=(i==null?void 0:i.t())??1-s;i==null||i.abort();var B=s-C,N=t.duration*Math.abs(B),f=[];if(N>0){var F=!1;if(L)for(var de=Math.ceil(N/16.666666666666668),re=0;re<=de;re+=1){var V=C+B*ae(re/de),_e=ct(L(V,1-V));f.push(_e),F||(F=_e.overflow==="hidden")}F&&(r.style.overflow="hidden"),a=()=>{var z=o.currentTime;return C+B*ae(z/N)},T&&oa(()=>{if(o.playState!=="running")return!1;var z=a();return T(z,1-z),!0})}o=r.animate(f,{duration:N,fill:"forwards"}),o.onfinish=()=>{a=()=>s,T==null||T(s,1-s),l()}},{abort:()=>{o&&(o.cancel(),o.effect=null,o.onfinish=Ie)},deactivate:()=>{l=Ie},reset:()=>{s===0&&(T==null||T(1,0))},t:()=>a()}}const ca=({url:r})=>({deckId:r.searchParams.get("id")||"",isExtraStudy:r.searchParams.get("isExtraStudy")==="true",cardIds:r.searchParams.get("cardIds")||encodeURIComponent("[]")}),nr=Object.freeze(Object.defineProperty({__proto__:null,load:ca},Symbol.toStringTag,{value:"Module"}));class ua{constructor(t,i=!0){ze(this,"audios");ze(this,"currentIndex",0);ze(this,"isPlaying",!1);ze(this,"onEnded",this.handleEnded.bind(this));this.audios=t.map(s=>{const l=new Audio(s);return l.preload="auto",i&&l.load(),l})}handleEnded(){this.audios[this.currentIndex].removeEventListener("ended",this.onEnded),this.currentIndex++,this.currentIndex<this.audios.length?this.playCurrent():(this.isPlaying=!1,this.currentIndex=0)}playCurrent(){const t=this.audios[this.currentIndex];t.addEventListener("ended",this.onEnded),t.currentTime=0,t.play().catch(i=>{console.warn("Playback failed:",i),this.stop()})}play(){this.audios.length!==0&&(this.isPlaying&&this.stop(),this.isPlaying=!0,this.currentIndex=0,this.playCurrent())}stop(){if(!this.isPlaying)return;this.isPlaying=!1;const t=this.audios[this.currentIndex];t.pause(),t.currentTime=0,t.removeEventListener("ended",this.onEnded),this.currentIndex=0}}const va={[b.Again]:"Fail",[b.Hard]:"Hard",[b.Good]:"Good",[b.Easy]:"Easy"},fa={[b.Again]:"again",[b.Hard]:"hard",[b.Good]:"good",[b.Easy]:"easy"},ma={[b.Again]:"fa fa-solid fa-face-frown",[b.Hard]:"fa fa-solid fa-face-meh",[b.Good]:"fa fa-solid fa-face-smile",[b.Easy]:"fa fa-solid fa-star"};var st;(r=>{function t(s){const l=s.correctStrokeCount===0?1/0:s.incorrectStrokeCount/s.correctStrokeCount;return l<.25||s.incorrectStrokeCount<=2?b.Good:l<.75||s.incorrectStrokeCount<=4?b.Hard:b.Again}r.getGrade=t;function i(s){switch(s){case b.Again:return"Again";case b.Hard:return"Hard";case b.Good:return"Good";default:return"Unknown"}}r.gradeToLabel=i})(st||(st={}));var ga=(r,t)=>t(),ha=G('<button class="audio-button svelte-4rg8" aria-label="Play Audio"><i class="fa-solid fa-volume-low svelte-4rg8"></i></button>'),_a=G('<div class="new-element-indicator svelte-4rg8">New Card</div>'),Ca=G("<div>Warm Up</div>"),wa=G('<div class="new-element-indicator is-hidden svelte-4rg8"></div>'),pa=G('<span class="svelte-4rg8"> </span>'),ya=G('<span class="empty-character-box svelte-4rg8">&#x3000;</span>'),ba=G('<!> <div class="character-box-container chinese-font svelte-4rg8"></div>',1),ka=(r,t)=>t(),xa=G('<i style="font-size: 2.4em" class="fa fa-solid fa-seedling svelte-4rg8"></i> <span class="svelte-4rg8">New</span>',1),Sa=G('<i></i> <span class="svelte-4rg8"> </span>',1),Ta=G("<button><!></button>"),Ua=G('<div class="character-writer svelte-4rg8"><div class="meaning svelte-4rg8"> </div> <div><div class="reading svelte-4rg8"> </div> <!></div> <div class="character-container svelte-4rg8"><div class="grid-background svelte-4rg8"><svg xmlns="http://www.w3.org/2000/svg" id="grid-background-target" class="svelte-4rg8"><line x1="0" y1="0" class="svelte-4rg8"></line><line y1="0" x2="0" class="svelte-4rg8"></line><line y1="0" class="svelte-4rg8"></line><line x1="0" class="svelte-4rg8"></line></svg></div> <div class="bottom-container svelte-4rg8"><!></div> <!></div></div>');function Aa(r,t){var Re;mt(t,!0);let i=Te(500),s=Te(500),l="#DDD";const k=500,I=new Audio(`${Jt}/assets/sounds/correct-choice-43861.mp3`);let y=Te(qt([])),c=Te(!1),L=Te(!1),T=Te(!1);function ae(){return parseFloat(getComputedStyle(document.body).fontSize)}function p(){return parseFloat(getComputedStyle(document.body).fontSize)/parseFloat(getComputedStyle(document.documentElement).fontSize)}function _(){const u=ae()*3*2;d(i,Math.min(document.documentElement.clientWidth-u,500)*p()),d(s,e(i),!0)}let a=nt(t,"isRequestManualGrade",15),o=nt(t,"autoReviewData",15),C=Te(0),B=(Re=t.characterData)==null?void 0:Re.meanings.join("; ");function N(u){for(const v of u)if(v.startsWith(dt))return na(v.substring(dt.length))}function f(){var u;d(L,!0),!e(T)&&(t.cardConfig.isFirstTime?(d(C,(e(C)+1)%t.characterData.characters.length),window.setTimeout(()=>{de(e(C))},k)):(I.play(),d(C,e(C)+1),e(C)==((u=t.characterData)==null?void 0:u.characters.length)?(t.onComplete({...o()}),d(c,!0),window.setTimeout(()=>{V()},k)):window.setTimeout(()=>{de(e(C))},k)))}let F;function de(u){if(e(T)||!t.characterData)return;F&&(t.cardConfig.isFirstTime||F.cancelQuiz(),F.hideCharacter(),F.hideOutline());const v=N(t.characterData.tags[u]??[]);F=ta.create("grid-background-target",t.characterData.characters[u],{width:e(i),height:e(s),padding:5,showCharacter:!1,showOutline:t.cardConfig.isShowOutline,highlightOnComplete:!1,strokeColor:t.app.getChineseToneColor(v)??"#555",drawingWidth:aa,drawingColor:"#555",onComplete:()=>{f()}}),t.cardConfig.isFirstTime?(setTimeout(()=>{e(L)||V()},k),setTimeout(()=>{F.animateCharacter({onComplete:()=>{setTimeout(()=>{F.hideOutline(),F.hideCharacter(),f()},k)}})},k)):F.quiz({leniency:t.app.getConfig().strokeLeniency,onMistake:()=>{o(o().incorrectStrokeCount++,!0),o(o().totalStrokeCount++,!0)},onCorrectStroke:()=>{o(o().correctStrokeCount++,!0),o(o().totalStrokeCount++,!0)}})}function re(){var v;const u=(v=t.characterData)==null?void 0:v.audioUrl;u&&d(y,u.map(X=>{const Ce=X.map(Se=>ra(t.cardConfig.lang,Se));return new ua(Ce)}),!0)}function V(){const u=Math.floor(Math.random()*e(y).length),v=e(y)[u];v.stop(),v.play()}function _e(){if(t.cardConfig.isWarmUp&&(!t.cardConfig.isGradeWarmUpCards||!t.cardConfig.isFinalWarmUp)){window.alert("Can't change grade during warm-up, since grading doesn't affect scheduling in this phase.");return}a(!a())}function z(u=0){const v=t.cardConfig.warmUpCount??0,X=t.cardConfig.warmUpMaxCount;return`${Math.round((v+u)/X*100)}%`}gt(()=>(o({correctStrokeCount:0,incorrectStrokeCount:0,totalStrokeCount:0}),_(),re(),window.addEventListener("resize",_),de(0),()=>{d(T,!0),window.removeEventListener("resize",_)}));var ne=Ua(),ie=h(ne),qe=h(ie,!0);g(ie);var m=R(ie,2);let ce;var Fe=h(m),se=h(Fe,!0);g(Fe);var Xe=R(Fe,2);{var Ke=u=>{var v=ha();v.__click=[ga,V],S(u,v)};H(Xe,u=>{e(y).length>0&&u(Ke)})}g(m);var Be=R(m,2),De=h(Be),Ue=h(De),be=h(Ue);M(be,"stroke",l);var ke=R(be);M(ke,"stroke",l);var xe=R(ke);M(xe,"stroke",l);var Ae=R(xe);M(Ae,"stroke",l),g(Ue),g(De);var Pe=R(De,2),Ve=h(Pe);{var Je=u=>{var v=ba(),X=Ne(v);{var Ce=A=>{var n=_a();S(A,n)},Se=(A,n)=>{{var x=P=>{var O=Ca();let oe,Z;ge((W,U)=>{oe=te(O,1,"new-element-indicator svelte-4rg8",null,oe,W),Z=ea(O,"",Z,U)},[()=>({"is-complete":e(c)}),()=>({"--progress":z(),"--next-progress":z(1)})]),S(P,O)},w=P=>{var O=wa();S(P,O)};H(A,P=>{t.cardConfig.isWarmUp?P(x):P(w,!1)},n)}};H(X,A=>{t.cardConfig.isFirstTime?A(Ce):A(Se,!1)})}var We=R(X,2);Ct(We,21,()=>t.characterData.characters,wt,(A,n,x)=>{var w=_t(),P=Ne(w);{var O=Z=>{var W=pa(),U=h(W,!0);g(W),ge(()=>K(U,e(n))),S(Z,W)},oe=Z=>{var W=ya();S(Z,W)};H(P,Z=>{x<e(C)||t.cardConfig.isFirstTime?Z(O):Z(oe,!1)})}S(A,w)}),g(We),S(u,v)};H(Ve,u=>{var v;(v=t.characterData)!=null&&v.characters&&u(Je)})}g(Pe);var Qe=R(Pe,2);{var $e=u=>{var v=Ta();let X;v.__click=[ka,_e];var Ce=h(v);{var Se=A=>{var n=xa();Bt(2),S(A,n)},We=A=>{var n=Sa(),x=Ne(n),w=R(x,2),P=h(w,!0);g(w),ge(()=>{te(x,1,Kt(ma[t.autoGrade]),"svelte-4rg8"),K(P,va[t.autoGrade])}),S(A,n)};H(Ce,A=>{t.cardConfig.isWarmUp&&!t.cardConfig.isGradeWarmUpCards?A(Se):A(We,!1)})}g(v),ge(A=>X=te(v,1,`auto-review-indicator-container ${fa[t.autoGrade]}`,"svelte-4rg8",X,A),[()=>({blinking:a(),animated:a(),"echo-once":!a()})]),S(u,v)};H(Qe,u=>{t.autoGrade&&u($e)})}g(Be),g(ne),ge(u=>{var v;K(qe,B),ce=te(m,1,"reading-container svelte-4rg8",null,ce,u),K(se,(v=t.characterData)==null?void 0:v.reading),M(Ue,"width",e(i)),M(Ue,"height",e(s)),M(be,"x2",e(i)),M(be,"y2",e(s)),M(ke,"x1",e(i)),M(ke,"y2",e(s)),M(xe,"x1",e(i)/2),M(xe,"x2",e(i)/2),M(xe,"y2",e(s)),M(Ae,"y1",e(s)/2),M(Ae,"x2",e(i)),M(Ae,"y2",e(s)/2)},[()=>({"is-hidden":!t.app.getConfig().zh.alwaysShowReading&&!e(c)&&!t.cardConfig.isFirstTime})]),S(r,ne),ht()}ft(["click"]);const Ra=r=>r;function Wa(r){const t=r-1;return t*t*t+1}function vt(r){const t=typeof r=="string"&&r.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[r,"px"]}function Ea(r,{delay:t=0,duration:i=400,easing:s=Ra}={}){const l=+getComputedStyle(r).opacity;return{delay:t,duration:i,easing:s,css:k=>`opacity: ${k*l}`}}function Ga(r,{delay:t=0,duration:i=400,easing:s=Wa,x:l=0,y:k=0,opacity:I=0}={}){const y=getComputedStyle(r),c=+y.opacity,L=y.transform==="none"?"":y.transform,T=c*(1-I),[ae,p]=vt(l),[_,a]=vt(k);return{delay:t,duration:i,easing:s,css:(o,C)=>`
			transform: ${L} translate(${(1-o)*ae}${p}, ${(1-o)*_}${a});
			opacity: ${c-T*C}`}}function Ia(r){const t=r-1;return t*t*t+1}var Na=G('<button><div class="review-button-inner svelte-9hsnmw"><div class="review-time svelte-9hsnmw"> </div> <div class="review-label svelte-9hsnmw"> </div></div></button>'),Fa=G('<div class="bottom-container svelte-9hsnmw"><div></div></div>'),Da=G(`<div class="svelte-9hsnmw">You have done today's review.</div>`),Pa=G('<div class="counter svelte-9hsnmw"><span class="underlined svelte-9hsnmw"><!></span></div>'),Ma=G('<div class="counter svelte-9hsnmw"><span> </span> <span> </span> <span> </span> <span> </span> <span> </span></div>'),Ha=G('<!> <div class="character-writer-container svelte-9hsnmw"><!></div> <!>',1),La=G('<!> <div class="container svelte-9hsnmw"><!> <!></div>',1);function ir(r,t){mt(t,!1);const i=D(),s=D(),l=(n,x=Ie,w)=>{let P=ye(()=>Xt(w==null?void 0:w(),""));var O=Fa(),oe=h(O);Ct(oe,5,x,wt,(Z,W)=>{var U=Na();let ue;U.__click=function(...Y){var q;(q=e(W).onclick)==null||q.apply(this,Y)};var we=h(U),j=h(we),le=h(j,!0);g(j);var J=R(j,2),Q=h(J,!0);g(J),g(we),g(U),ge(Y=>{ue=te(U,1,(e(W),E(()=>`review-button ${e(W).className||""}`)),"svelte-9hsnmw",ue,Y),K(le,(e(W),E(()=>e(W).sublabel||" "))),K(Q,(e(W),E(()=>e(W).label||" ")))},[()=>({"is-complete":e(W).isComplete})],ye),S(Z,U)}),g(oe),g(O),ge(()=>te(oe,1,`review-button-container ${e(P)}`,"svelte-9hsnmw")),ut(1,O,()=>Ga,()=>k),ut(2,O,()=>Ea,()=>I),S(n,O)},k={delay:100,y:-100,duration:300,easing:Ia},I={duration:200};let y=nt(t,"data",8),c=y().deckId||"",L=y().cardIds||encodeURIComponent("[]"),T=JSON.parse(decodeURIComponent(L)),ae=y().isExtraStudy?"Extra Study":"Review",p=D(),_=D(!1),a=D(new Qt);gt(async()=>{var w;await e(a).init();const n=(w=e(a).deckData[c])==null?void 0:w.tags;re=n==null?void 0:n.includes(rt.ZH_YUE);const x=n==null?void 0:n.includes(rt.ZH_EXTRA_DICT);await N.init(re?"yue":"zh",x),d(a,e(a)),de=n==null?void 0:n.includes(rt.ZH_TRAD),d(V,e(a).isAutoGrading()),d(_e,e(a).getConfig().gradeWarmUpCards),d(_,!0),y().isExtraStudy&&e(a).extraStudyHandler.registerReviewCardIdsOverride(T),se()});let o=D(!1),C=D(!1),B=D(!1),N=new ia,f=D(void 0),F=D(!1),de=!1,re=!1,V=D(!1),_e=D(!1),z=D(void 0),ne=D(!1),ie=D(0);const qe=["Fail","Hard","Good","Easy"];let m=D(void 0),ce=D({1:"",2:"",3:"",4:""});function Fe(){d(o,!1),d(F,!1),d(z,void 0),d(ne,!1)}function se(){Fe(),d(B,!0);const n=e(a).getNextCard(c);if(n===void 0){d(C,!0);return}e(a).getCard(c,n,!0)&&(d(B,!1),d(m,n),d(ce,e(a).getRatingScheduledTimeStr(c,n)),d(f,e(a).getWenbunCustomState(c,n)),jt(ie))}async function Xe(){e(a).startWarmUp(c,e(m)),await e(a).save(),d(F,!0),d(m,e(m)),d(ce,e(a).getRatingScheduledTimeStr(c,e(m))),d(f,e(a).getWenbunCustomState(c,e(m)))}async function Ke(){e(a).skipWarmUp(c,e(m)),d(F,!0),await e(a).save(),se()}function Be(n){const x=e(a).getCardWord(c,n),w=e(a).getConfig();return N.getCharacterWriterData(x,{convertToTraditional:de,mandarinReading:w.zh.mandarinReading,isCantonese:re,isPlayAudio:w.zh.playAudio})}function De(n){const x=e(a).getWarmUpCount(c,n),w=e(s)&&x===0;return{isFirstTime:e(i),isWarmUp:e(s),isFinalWarmUp:Re(n),warmUpCount:x,warmUpMaxCount:e(a).getMaxWarmUpCount(),isGradeWarmUpCards:e(a).getConfig().gradeWarmUpCards,isShowOutline:e(i)||w,lang:re?"yue":"zh"}}function Ue(n){d(o,!0),e(V)&&d(z,st.getGrade(n))}async function be(n){e(a).rateCard(c,e(m),n),await e(a).save(),se()}function ke(n){switch(n){case b.Easy:return"review-button-easy";case b.Good:return"review-button-good";case b.Hard:return"review-button-hard";case b.Again:return"review-button-fail"}}async function xe(){e(a).addIgnoredMark(c,e(m)),await e(a).save(),se()}function Ae(){e(a).extraStudyHandler.rateAgain(e(m)),se()}function Pe(){e(a).extraStudyHandler.rateGood(e(m)),se()}async function Ve(){e(a).storeAutoGradeLog(e(p).correctStrokeCount,e(p).incorrectStrokeCount,e(z)),e(a).rateCard(c,e(m),e(z)),await e(a).save(),se()}function Je(n){d(z,n),d(ne,!1)}async function Qe(){e(a).warmUpNext(c,e(m)),await e(a).save(),se()}async function $e(){await be(b.Again)}function Re(n,x){const w=e(a).getWarmUpCount(c,n);return w===void 0?!0:w>=e(a).getMaxWarmUpCount()}ot(()=>(e(f),ee),()=>{d(i,e(f)===ee.New)}),ot(()=>(e(f),ee),()=>{d(s,e(f)===ee.WarmUp)}),Zt(),Vt();var u=La(),v=Ne(u);$t(v,{get title(){return ae}});var X=R(v,2),Ce=h(X);{var Se=n=>{var x=Da();S(n,x)};H(Ce,n=>{e(C)&&n(Se)})}var We=R(Ce,2);{var A=n=>{var x=Ha(),w=Ne(x);at(w,()=>e(ie),U=>{var ue=_t(),we=Ne(ue);{var j=J=>{var Q=Pa(),Y=h(Q),q=h(Y);at(q,()=>e(m),Me=>{var ve=Yt();ge(Ee=>K(ve,Ee),[()=>(e(a),E(()=>e(a).extraStudyHandler.getCardsCount()||""))],ye),S(Me,ve)}),g(Y),g(Q),S(J,Q)},le=J=>{var Q=Ma(),Y=h(Q);let q;var Me=h(Y,!0);g(Y);var ve=R(Y,2);let Ee;var pe=h(ve,!0);g(ve);var Ge=R(ve,2);let Ze;var et=h(Ge,!0);g(Ge);var $=R(Ge,2);let je;var tt=h($,!0);g($);var He=R($,2);let fe;var Le=h(He,!0);g(He),g(Q),ge((Oe,me,bt,kt,xt,St,Tt,Ut,At,Rt)=>{q=te(Y,1,"deck-count-learn-relearn svelte-9hsnmw",null,q,Oe),K(Me,me),Ee=te(ve,1,"deck-count-review svelte-9hsnmw",null,Ee,bt),K(pe,kt),Ze=te(Ge,1,"deck-count-new svelte-9hsnmw",null,Ze,xt),K(et,St),je=te($,1,"deck-count-new svelte-9hsnmw",null,je,Tt),K(tt,Ut),fe=te(He,1,"deck-count-previously-studied svelte-9hsnmw",null,fe,At),K(Le,Rt)},[()=>({underlined:e(f)===ee.Learning||e(f)===ee.Relearning}),()=>(e(a),E(()=>e(a).getLearningRelearningCardsCount(c)||"")),()=>({underlined:e(f)===ee.ReviewYoung||e(f)===ee.ReviewMature}),()=>(e(a),E(()=>e(a).getScheduledReviewCardsCount(c)||"")),()=>({underlined:e(f)===ee.New}),()=>(e(a),E(()=>e(a).getScheduledNewCardsCount(c)||"")),()=>({underlined:e(f)===ee.WarmUp}),()=>(e(a),E(()=>e(a).getWarmUpCardsCount(c)?`(${e(a).getWarmUpCardsCount(c)})`:"")),()=>({underlined:e(f)===ee.PreviouslyStudied}),()=>(e(a),E(()=>e(a).getScheduledPreviouslyStudiedCardsCount(c)||""))],ye),S(J,Q)};H(we,J=>{lt(y()),E(()=>y().isExtraStudy)?J(j):J(le,!1)})}S(U,ue)});var P=R(w,2),O=h(P);at(O,()=>[e(m),e(F),e(B)],U=>{const ue=ye(()=>(e(m),E(()=>Be(e(m))))),we=ye(()=>(e(m),E(()=>De(e(m)))));Aa(U,{get app(){return e(a)},get characterData(){return e(ue)},onComplete:j=>Ue(j),get cardConfig(){return e(we)},get autoGrade(){return e(z)},get isRequestManualGrade(){return e(ne)},set isRequestManualGrade(j){d(ne,j)},get autoReviewData(){return e(p)},set autoReviewData(j){d(p,j)},$$legacy:!0})}),g(P);var oe=R(P,2);{var Z=U=>{l(U,()=>[{label:"Ignore",sublabel:"(Don't Learn)",className:"review-button-fail",isComplete:!0,onclick:()=>xe()},{label:"Learn*",sublabel:"(Skip Warm-Up)",className:"review-button-hard",isComplete:!0,onclick:()=>Ke()},{label:""},{label:"Learn",className:"review-button-easy main-button",isComplete:!0,onclick:()=>Xe()}])},W=(U,ue)=>{{var we=le=>{l(le,()=>[{label:""},{label:""},{label:""},{label:"Next",className:"review-button-easy",isComplete:e(o),onclick:()=>Qe()}])},j=(le,J)=>{{var Q=q=>{l(q,()=>[{label:""},{label:""},{label:""},{label:"Next",className:"review-button-easy",isComplete:e(o),onclick:()=>$e()}])},Y=(q,Me)=>{{var ve=pe=>{l(pe,()=>[{label:"Again",sublabel:"(Put Back)",className:"review-button-fail",isComplete:e(o),onclick:()=>Ae()},{label:""},{label:""},{label:"Good",className:"review-button-easy",isComplete:e(o),onclick:()=>Pe()}])},Ee=(pe,Ge)=>{{var Ze=$=>{l($,()=>[{label:""},{label:""},{label:""},{label:"Next",className:"review-button-easy",isComplete:e(o),onclick:()=>Ve()}])},et=($,je)=>{{var tt=fe=>{var Le=ye(()=>(e(ce),e(o),E(()=>qe.map((Oe,me)=>({label:Oe,sublabel:e(ce)[me+1],className:ke(me+1)+" time",isComplete:e(o),onclick:()=>Je(me+1)})))));l(fe,()=>e(Le),()=>"pulsing")},He=fe=>{var Le=ye(()=>(e(ce),e(o),E(()=>qe.map((Oe,me)=>({label:Oe,sublabel:e(ce)[me+1],className:ke(me+1)+" time",isComplete:e(o),onclick:()=>be(me+1)})))));l(fe,()=>e(Le))};H($,fe=>{e(V)&&e(ne)?fe(tt):fe(He,!1)},je)}};H(pe,$=>{e(V)&&!e(ne)?$(Ze):$(et,!1)},Ge)}};H(q,pe=>{lt(y()),E(()=>y().isExtraStudy)?pe(ve):pe(Ee,!1)},Me)}};H(le,q=>{e(s),e(m),e(ie),e(_e),E(()=>e(s)&&Re(e(m),e(ie))&&!e(_e))?q(Q):q(Y,!1)},J)}};H(U,le=>{e(s),e(m),e(ie),E(()=>e(s)&&!Re(e(m),e(ie)))?le(we):le(j,!1)},ue)}};H(oe,U=>{e(i)?U(Z):U(W,!1)})}S(n,x)};H(We,n=>{e(_)&&e(m)!==void 0&&!e(C)&&n(A)})}g(X),S(r,u),ht()}ft(["click"]);export{ir as component,nr as universal};
