import"../chunks/CWj6FrbW.js";import"../chunks/Bwjk16kZ.js";import{s as ve,d as vt,o as dt}from"../chunks/Bm5w9rKm.js";import{a7 as We,aa as v,ag as l,ah as s,af as r,az as ct,ai as ut,ac as T,ad as n,ae as Ye,E as z,a8 as re,a9 as pt,ab as se,g as t,b as h,aA as c,ak as q,W as g,Y as b,aj as He}from"../chunks/CppPYvqM.js";import{i as Ue}from"../chunks/BmZSK_NP.js";import{e as _t,i as ft}from"../chunks/CboPmxil.js";import{T as ht,r as P,b as qe,s as yt}from"../chunks/BgD2c6e2.js";import{s as ne}from"../chunks/WtSHSpat.js";import{b as w,a as Z}from"../chunks/CNs2C0tZ.js";import{b as W}from"../chunks/D1aqb1vV.js";import{i as mt}from"../chunks/DR_ajWpe.js";import{p as gt}from"../chunks/B8WkJiGh.js";import{b as Ze}from"../chunks/BSi2MV8y.js";import{S as bt,A as $t,_ as j,N as u,e as R,f as le}from"../chunks/BwqE_mTR.js";/* empty css                */const Pt=({url:C})=>({leniency:C.searchParams.get("leniency")||""}),ba=Object.freeze(Object.defineProperty({__proto__:null,load:Pt},Symbol.toStringTag,{value:"Module"}));var St=v('<div class="settings-item"><label class="settings-label svelte-k8ruu5"><div><div class="settings-label-title"> </div> <div class="settings-label-help svelte-k8ruu5"> </div></div> <div class="settings-children"><!></div></label></div>');function _(C,p){We(p,!0);const L=bt[p.key]??{label:"",help:""};var V=St(),E=l(V),S=l(E),a=l(S),A=l(a,!0);s(a);var Y=r(a,2),X=l(Y,!0);s(Y),s(S);var J=r(S,2),O=l(J);ct(O,()=>p.children??ut),s(J),s(E),s(V),T(()=>{ve(A,L.label),ve(X,L.help)}),n(C,V),Ye()}var kt=(C,p)=>p(),wt=(C,p)=>p(),Ct=(C,p)=>p(),xt=v('<textarea class="profile-textarea svelte-1t4a6o"></textarea> <button class="button svelte-1t4a6o">import</button> <div class="settings-label-help svelte-1t4a6o" style="margin: 1em 0">To manually export the profile data, copy the text above and store it somewhere safe.<br/> To manually import the profile data, paste the text into the textbox and click the import button.</div>',1),zt=(C,p)=>h(p,!t(p)),Rt=(C,p)=>t(p).downloadProfile(),Tt=(C,p)=>p(),Dt=v("<select><option>auto</option><option>manual</option></select>"),Lt=v('<input type="number" class="svelte-1t4a6o"/>'),At=v('<input type="number" class="svelte-1t4a6o"/>'),Ft=v("<select><option>Mix</option><option>After Reviews</option><option>Before Reviews</option></select>"),Mt=v('<input type="number" class="svelte-1t4a6o"/>'),Ot=v("<select><option>Mix</option><option>After Reviews</option><option>Before Reviews</option></select>"),Bt=v('<input type="number" step="0.01" class="svelte-1t4a6o"/>'),Nt=v('<input type="text"/>'),jt=v('<input type="text"/>'),Vt=v('<div style="display: flex; flex-direction: row; align-items: center; gap: 0.5em;"><input type="number" step="0.01" class="svelte-1t4a6o"/></div>'),It=v('<input type="checkbox" class="svelte-1t4a6o"/>'),Et=v('<input type="checkbox" class="svelte-1t4a6o"/>'),Gt=v("<textarea></textarea>"),Ht=v('<input type="checkbox" class="svelte-1t4a6o"/>'),Ut=v("<select><option>Pinyin (wén)</option><option>Numeric (wen2)</option><option>Zhuyin (ㄨㄣˊ)</option></select>"),qt=v('<input type="checkbox" class="svelte-1t4a6o"/>'),Zt=v('<input type="checkbox" class="svelte-1t4a6o"/>'),Wt=(C,p,L)=>p(t(L)),Yt=v("<option> </option>"),Jt=v("<div><div>Load Preset</div> <div><select></select></div></div>"),Kt=v('<input type="color" class="svelte-1t4a6o"/>'),Qt=v('<input type="color" class="svelte-1t4a6o"/>'),Xt=v('<input type="color" class="svelte-1t4a6o"/>'),ea=v('<input type="color" class="svelte-1t4a6o"/>'),ta=v('<input type="color" class="svelte-1t4a6o"/>'),aa=(C,p)=>p(),oa=v(`<div class="top-settings-section svelte-1t4a6o"><button class="button svelte-1t4a6o">Save</button> <button class="button svelte-1t4a6o">Discard Changes</button></div> <div class="settings-section svelte-1t4a6o"><div class="section-title svelte-1t4a6o">Profile</div> <div class="section-container svelte-1t4a6o"><!> <button class="button svelte-1t4a6o">manual import/export</button> <button class="button svelte-1t4a6o"><i class="fa-solid fa-download"></i>&nbsp;
                    export profile data (download)</button> <button class="button svelte-1t4a6o"><i class="fa-solid fa-upload"></i>&nbsp;
                    import profile data (upload)</button></div></div> <div class="settings-section svelte-1t4a6o"><div class="section-title svelte-1t4a6o">Learning</div> <div class="section-container svelte-1t4a6o"><!> <!> <!> <!> <!> <!></div></div> <div class="settings-section svelte-1t4a6o"><div class="section-title svelte-1t4a6o">Character Writer</div> <div class="section-container svelte-1t4a6o"><!> <a class="button svelte-1t4a6o" aria-label="Test Leniency Calibration"><i class="fa-solid fa-sliders"></i>&nbsp;
                    Test Leniency</a></div></div> <div class="settings-section svelte-1t4a6o"><div class="section-title svelte-1t4a6o">FSRS</div> <div class="section-container svelte-1t4a6o"><!> <!> <!> <!> <!> <!></div></div> <div class="settings-section svelte-1t4a6o"><div class="section-title svelte-1t4a6o">Chinese</div> <div class="section-container svelte-1t4a6o"><!> <!> <!> <!> <!> <!> <!> <!> <!> <!></div></div> <div class="settings-section svelte-1t4a6o"><div class="section-container svelte-1t4a6o"><button class="button svelte-1t4a6o">Reset to Default Settings</button></div></div> <div class="settings-section svelte-1t4a6o"><div class="section-container svelte-1t4a6o"><a class="button svelte-1t4a6o" href="https://github.com/ray-pH/wenbun" aria-label="GitHub Repository" target="_blank"><i class="fa-brands fa-github"></i>&nbsp;
                    GitHub Repository</a> <a class="button svelte-1t4a6o" href="https://discord.gg/pVUuqJqywt" aria-label="GitHub Repository" target="_blank"><i class="fa-brands fa-discord"></i>&nbsp;
                    Discord Community Server</a></div></div>`,1),ia=v('<!> <div class="main-container svelte-1t4a6o"><!></div>',1);function $a(C,p){We(p,!1);const L=z(),V=z();let E=gt(p,"data",8),S=z(new $t),a=z(),A=z();dt(async()=>{await t(S).init(),h(a,j.cloneDeep(t(S).getConfig())),h(A,j.cloneDeep(t(a))),h(G,t(a).learningSteps.join(" ")),h(H,t(a).previouslyStudiedLearningSteps.join(" ")),h(U,t(a).FSRSParams.join(",")),h(B,t(S).exportProfile()),h(ee,t(B)),E().leniency&&c(a,t(a).strokeLeniency=parseFloat(E().leniency)),h(S,t(S))});async function Y(){await t(S).saveConfig(t(a)),h(A,j.cloneDeep(t(a)))}function X(){h(a,j.cloneDeep(t(A)))}async function J(){window.confirm("Are you sure you want to reset to the default settings?")&&(await t(S).resetConfigToDefault(),h(a,j.cloneDeep(t(S).getConfig())),h(A,j.cloneDeep(t(a))))}let O=z("");function Je(m){const F=le[m];F&&c(a,t(a).zh.toneColors=F),h(O,"")}let G=z(""),H=z(""),U=z(""),de=z(!1),B=z(""),ee=z("");function Ke(){t(S).tryImportProfile(t(B)).then(m=>{ce(m)})}function Qe(){t(S).tryUploadProfile().then(m=>{ce(m)})}function ce(m){m?window.alert("Successfully imported profile data"):window.alert("Failed to import profile data")}function Xe(){return new Promise(m=>{if(!t(L))m(!0);else{const F=window.confirm("You have unsaved changes. Are you sure you want to leave?");m(F)}})}re(()=>(t(a),t(A)),()=>{h(L,!j.isEqual(t(a),t(A)))}),re(()=>(t(a),t(G),t(H),t(U)),()=>{if(t(a)){const m=t(G).split(" ").map(f=>f.trim()).filter(f=>f);m.length<4&&m.every(f=>f.match(/^\d+[m|d]$/))&&c(a,t(a).learningSteps=m);const N=t(H).split(" ").map(f=>f.trim()).filter(f=>f);N.length<4&&N.every(f=>f.match(/^\d+[m|d]$/))&&c(a,t(a).previouslyStudiedLearningSteps=N);const I=t(U).split(",").map(f=>f.trim()).filter(f=>f);I.length===21&&I.every(f=>!isNaN(parseFloat(f)))&&c(a,t(a).FSRSParams=I.map(f=>parseFloat(f)))}}),re(()=>(t(B),t(ee)),()=>{h(V,t(B)!==t(ee))}),pt(),mt();var ue=ia(),pe=se(ue);ht(pe,{title:"Settings",get backUrl(){return`${Ze??""}/`},isSettings:!0,backConfirmCallback:Xe});var _e=r(pe,2),et=l(_e);{var tt=m=>{var F=oa(),N=se(F),K=l(N);K.__click=[kt,Y];var I=r(K,2);I.__click=[wt,X],s(N);var Q=r(N,2),f=r(l(Q),2),fe=l(f);{var at=i=>{var d=xt(),e=se(d);qe(e);var o=r(e,2);o.__click=[Ct,Ke],He(2),T(()=>o.disabled=!t(V)),w(e,()=>t(B),y=>h(B,y)),n(i,d)};Ue(fe,i=>{t(de)&&i(at)})}var he=r(fe,2);he.__click=[zt,de];var ye=r(he,2);ye.__click=[Rt,S];var ot=r(ye,2);ot.__click=[Tt,Qe],s(f),s(Q);var te=r(Q,2),me=r(l(te),2),ge=l(me);_(ge,{key:"gradingMethod",children:(i,d)=>{var e=Dt();T(()=>{t(a),q(()=>{})});var o=l(e);o.value=o.__value="auto";var y=r(o);y.value=y.__value="manual",s(e),W(e,()=>t(a).gradingMethod,$=>c(a,t(a).gradingMethod=$)),n(i,e)},$$slots:{default:!0}});var be=r(ge,2);_(be,{key:"newCardPerDay",children:(i,d)=>{var e=Lt();P(e),w(e,()=>t(a).newCardPerDay,o=>c(a,t(a).newCardPerDay=o)),n(i,e)},$$slots:{default:!0}});var $e=r(be,2);_($e,{key:"maxReviewsPerDay",children:(i,d)=>{var e=At();P(e),w(e,()=>t(a).maxReviewsPerDay,o=>c(a,t(a).maxReviewsPerDay=o)),n(i,e)},$$slots:{default:!0}});var Pe=r($e,2);_(Pe,{key:"newCardOrder",children:(i,d)=>{var e=Ft();T(()=>{t(a),q(()=>{})});var o=l(e),y={},$=r(o),x={},k=r($),D={};s(e),T(()=>{y!==(y=(b(u),g(()=>u.Mix)))&&(o.value=(o.__value=(b(u),g(()=>u.Mix)))??""),x!==(x=(b(u),g(()=>u.AfterReviews)))&&($.value=($.__value=(b(u),g(()=>u.AfterReviews)))??""),D!==(D=(b(u),g(()=>u.BeforeReviews)))&&(k.value=(k.__value=(b(u),g(()=>u.BeforeReviews)))??"")}),W(e,()=>t(a).newCardOrder,M=>c(a,t(a).newCardOrder=M)),n(i,e)},$$slots:{default:!0}});var Se=r(Pe,2);_(Se,{key:"newPreviouslyStudiedCardPerDay",children:(i,d)=>{var e=Mt();P(e),w(e,()=>t(a).newPreviouslyStudiedCardPerDay,o=>c(a,t(a).newPreviouslyStudiedCardPerDay=o)),n(i,e)},$$slots:{default:!0}});var it=r(Se,2);_(it,{key:"newPreviouslyStudiedCardOrder",children:(i,d)=>{var e=Ot();T(()=>{t(a),q(()=>{})});var o=l(e),y={},$=r(o),x={},k=r($),D={};s(e),T(()=>{y!==(y=(b(u),g(()=>u.Mix)))&&(o.value=(o.__value=(b(u),g(()=>u.Mix)))??""),x!==(x=(b(u),g(()=>u.AfterReviews)))&&($.value=($.__value=(b(u),g(()=>u.AfterReviews)))??""),D!==(D=(b(u),g(()=>u.BeforeReviews)))&&(k.value=(k.__value=(b(u),g(()=>u.BeforeReviews)))??"")}),W(e,()=>t(a).newPreviouslyStudiedCardOrder,M=>c(a,t(a).newPreviouslyStudiedCardOrder=M)),n(i,e)},$$slots:{default:!0}}),s(me),s(te);var ae=r(te,2),ke=r(l(ae),2),we=l(ke);_(we,{key:"strokeLeniency",children:(i,d)=>{var e=Bt();P(e),w(e,()=>t(a).strokeLeniency,o=>c(a,t(a).strokeLeniency=o)),n(i,e)},$$slots:{default:!0}});var rt=r(we,2);s(ke),s(ae);var oe=r(ae,2),Ce=r(l(oe),2),xe=l(Ce);_(xe,{key:"learningSteps",children:(i,d)=>{var e=Nt();P(e),ne(e,1,"svelte-1t4a6o",null,{},{invalid:!1}),w(e,()=>t(G),o=>h(G,o)),n(i,e)},$$slots:{default:!0}});var ze=r(xe,2);_(ze,{key:"previouslyStudiedLearningSteps",children:(i,d)=>{var e=jt();P(e),ne(e,1,"svelte-1t4a6o",null,{},{invalid:!1}),w(e,()=>t(H),o=>h(H,o)),n(i,e)},$$slots:{default:!0}});var Re=r(ze,2);_(Re,{key:"desiredRetention",children:(i,d)=>{var e=Vt(),o=l(e);P(o),s(e),w(o,()=>t(a).desiredRetention,y=>c(a,t(a).desiredRetention=y)),n(i,e)},$$slots:{default:!0}});var Te=r(Re,2);_(Te,{key:"enableShortTerm",children:(i,d)=>{var e=It();P(e),Z(e,()=>t(a).enableShortTerm,o=>c(a,t(a).enableShortTerm=o)),n(i,e)},$$slots:{default:!0}});var De=r(Te,2);_(De,{key:"enableFuzz",children:(i,d)=>{var e=Et();P(e),Z(e,()=>t(a).enableFuzz,o=>c(a,t(a).enableFuzz=o)),n(i,e)},$$slots:{default:!0}});var st=r(De,2);_(st,{key:"FSRSParams",children:(i,d)=>{var e=Gt();qe(e),ne(e,1,"",null,{},{invalid:!1}),w(e,()=>t(U),o=>h(U,o)),n(i,e)},$$slots:{default:!0}}),s(Ce),s(oe);var ie=r(oe,2),Le=r(l(ie),2),Ae=l(Le);_(Ae,{key:"zhAlwaysShowReading",children:(i,d)=>{var e=Ht();P(e),Z(e,()=>t(a).zh.alwaysShowReading,o=>c(a,t(a).zh.alwaysShowReading=o)),n(i,e)},$$slots:{default:!0}});var Fe=r(Ae,2);_(Fe,{key:"zhMandarinReading",children:(i,d)=>{var e=Ut();T(()=>{t(a),q(()=>{})});var o=l(e),y={},$=r(o),x={},k=r($),D={};s(e),T(()=>{y!==(y=(b(R),g(()=>R.Pinyin)))&&(o.value=(o.__value=(b(R),g(()=>R.Pinyin)))??""),x!==(x=(b(R),g(()=>R.PinyinNumeric)))&&($.value=($.__value=(b(R),g(()=>R.PinyinNumeric)))??""),D!==(D=(b(R),g(()=>R.Zhuyin)))&&(k.value=(k.__value=(b(R),g(()=>R.Zhuyin)))??"")}),W(e,()=>t(a).zh.mandarinReading,M=>c(a,t(a).zh.mandarinReading=M)),n(i,e)},$$slots:{default:!0}});var Me=r(Fe,2);_(Me,{key:"zhPlayAudio",children:(i,d)=>{var e=qt();P(e),Z(e,()=>t(a).zh.playAudio,o=>c(a,t(a).zh.playAudio=o)),n(i,e)},$$slots:{default:!0}});var Oe=r(Me,2);_(Oe,{key:"zhIsColorBasedOnTone",children:(i,d)=>{var e=Zt();P(e),Z(e,()=>t(a).zh.isColorBasedOnTone,o=>c(a,t(a).zh.isColorBasedOnTone=o)),n(i,e)},$$slots:{default:!0}});var Be=r(Oe,2);_(Be,{key:"zhToneColors",children:(i,d)=>{var e=Jt(),o=r(l(e),2),y=l(o);T(()=>{t(O),q(()=>{})}),y.__change=[Wt,Je,O],_t(y,5,()=>(b(le),g(()=>Object.keys(le))),ft,($,x)=>{var k=Yt(),D=l(k,!0);s(k);var M={};T(()=>{ve(D,t(x)),M!==(M=t(x))&&(k.value=(k.__value=t(x))??"")}),n($,k)}),s(y),s(o),s(e),W(y,()=>t(O),$=>h(O,$)),n(i,e)},$$slots:{default:!0}});var Ne=r(Be,2);_(Ne,{key:"zhTone1",children:(i,d)=>{var e=Kt();P(e),w(e,()=>t(a).zh.toneColors[0],o=>c(a,t(a).zh.toneColors[0]=o)),n(i,e)},$$slots:{default:!0}});var je=r(Ne,2);_(je,{key:"zhTone2",children:(i,d)=>{var e=Qt();P(e),w(e,()=>t(a).zh.toneColors[1],o=>c(a,t(a).zh.toneColors[1]=o)),n(i,e)},$$slots:{default:!0}});var Ve=r(je,2);_(Ve,{key:"zhTone3",children:(i,d)=>{var e=Xt();P(e),w(e,()=>t(a).zh.toneColors[2],o=>c(a,t(a).zh.toneColors[2]=o)),n(i,e)},$$slots:{default:!0}});var Ie=r(Ve,2);_(Ie,{key:"zhTone4",children:(i,d)=>{var e=ea();P(e),w(e,()=>t(a).zh.toneColors[3],o=>c(a,t(a).zh.toneColors[3]=o)),n(i,e)},$$slots:{default:!0}});var nt=r(Ie,2);_(nt,{key:"zhToneNeutral",children:(i,d)=>{var e=ta();P(e),w(e,()=>t(a).zh.toneColors[4],o=>c(a,t(a).zh.toneColors[4]=o)),n(i,e)},$$slots:{default:!0}}),s(Le),s(ie);var Ee=r(ie,2),Ge=l(Ee),lt=l(Ge);lt.__click=[aa,J],s(Ge),s(Ee),He(2),T(()=>{K.disabled=!t(L),I.disabled=!t(L),yt(rt,"href",`${Ze??""}/settings/leniency-calibration`)}),n(m,F)};Ue(et,m=>{t(a)&&m(tt)})}s(_e),n(C,ue),Ye()}vt(["click","change"]);export{$a as component,ba as universal};
