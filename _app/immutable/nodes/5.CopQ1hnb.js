import"../chunks/CWj6FrbW.js";import"../chunks/SVVRQhx3.js";import{d as aa,o as ea,s as y}from"../chunks/C8jMSG_v.js";import{h as W,O as ta,P as D,S as A,T as X,W as z,X as sa,Y as v,g as a,b as p,Z as s,_ as e,V as T,ah as ia,a0 as ra}from"../chunks/857XoN4u.js";import{i as la}from"../chunks/BD_jXw_T.js";import{A as oa,D as $,l as ca,e as Y,i as Z,a as da}from"../chunks/Ct4mEXdp.js";import{t as na,s as va}from"../chunks/CIl6lDHv.js";import{b as pa}from"../chunks/DJMeo8BR.js";import{i as _a}from"../chunks/BVP6bkhM.js";import{b as fa}from"../chunks/D5FNUZXP.js";import{T as ua}from"../chunks/DUjGUA_5.js";import{S as ma}from"../chunks/Dya7Hw4r.js";function ka(l,o,t,u){var m=l.__style;if(W||m!==o){var d=na(o);(!W||d!==l.getAttribute("style"))&&(d==null?l.removeAttribute("style"):l.style.cssText=d),l.__style=o}return u}var ba=(l,o,t)=>o(a(t)),wa=A("<option> </option>"),ga=(l,o,t)=>o(a(t).id),xa=A('<div class="deck-card-container svelte-dfzxow"><div class="deck-card svelte-dfzxow"><div class="left"><span class="deck-card-title svelte-dfzxow"> </span> <span class="deck-card-subtitle svelte-dfzxow"> </span></div> <div class="right"><span class="deck-card-count svelte-dfzxow"> </span></div></div> <button title="Add deck" aria-label="Add deck"><i class="fa-solid fa-plus"></i></button></div>'),ha=A('<div class="top-container svelte-dfzxow"><div class="filter-container"><span class="filter-label">Filter:</span> <select class="filter-select svelte-dfzxow"><option></option><!></select></div></div> <div class="deck-list-container svelte-dfzxow"></div>',1),ya=A('<!> <div class="main-container svelte-dfzxow"><!></div>',1);function Pa(l,o){ta(o,!1);let t=D(new oa),u=new ma,m=D(!1),d=D(""),C=D($);ea(async()=>{await a(t).init(),await j(),p(t,a(t)),p(m,!0)});async function j(){await Promise.allSettled($.map(async i=>{const n=await ca(i.src);n&&u.set(i.id,{cardCount:n.length})}))}async function E(i){await a(t).addDeck(i),p(t,a(t))}function G(i){i.trim()?p(C,$.filter(n=>`${n.title} ${n.subtitle}`.toLowerCase().includes(i.toLowerCase()))):p(C,$)}_a();var L=ya(),B=X(L);ua(B,{title:"Browse Decks",get backUrl(){return`${fa??""}/`}});var F=v(B,2),H=s(F);{var J=i=>{var n=ha(),k=X(n),I=s(k),b=v(s(I),2);T(()=>{a(d),ia(()=>{})}),b.__change=[ba,G,d];var M=s(b);M.value=M.__value="";var K=v(M);Y(K,1,()=>da,Z,(_,r,w,g)=>{var c=wa(),f=s(c,!0);e(c);var x={};T(()=>{y(f,a(r)),x!==(x=a(r))&&(c.value=(c.__value=a(r))??"")}),z(_,c)}),e(b),e(I),e(k);var P=v(k,2);Y(P,5,()=>a(C),Z,(_,r)=>{var w=xa(),g=s(w),c=s(g),f=s(c),x=s(f,!0);e(f);var S=v(f,2),N=s(S,!0);e(S),e(c);var q=v(c,2),O=s(q),Q=s(O);e(O),e(q),e(g);var U=v(g,2);let V;U.__click=[ga,E,r],e(w),T((h,R)=>{y(x,a(r).title),ka(S,`--subtitle-color: ${a(r).color??"#00000080"}`),y(N,a(r).subtitle),y(Q,`${h??""} cards`),V=va(U,1,"deck-add-button svelte-dfzxow",null,V,R)},[()=>{var h;return((h=u.get(a(r).id))==null?void 0:h.cardCount)??0},()=>({invisible:a(t).decks.includes(a(r).id)})],ra),z(_,w)}),e(P),pa(b,()=>a(d),_=>p(d,_)),z(i,n)};la(H,i=>{a(m)&&i(J)})}e(F),z(l,L),sa()}aa(["change","click"]);export{Pa as component};
