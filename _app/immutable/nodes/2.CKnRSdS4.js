import"../chunks/CWj6FrbW.js";import"../chunks/DUOQ2h4l.js";import{ak as ne,p as ce,a9 as w,al as ve,am as Y,an as de,f as g,a as ue,t as C,b as p,c as pe,X as E,n as c,i as e,e as _,j as d,s as o,d as i,r,w as _e}from"../chunks/C5etlkrB.js";import{i as U}from"../chunks/Cc2rhPc8.js";import{e as ge,i as be}from"../chunks/Dnr6C7Qa.js";import{T as fe,s as A}from"../chunks/BvNWHEz1.js";import{s as we}from"../chunks/XkQyc0Ir.js";import{i as me}from"../chunks/BkP1o4TQ.js";import{b as m}from"../chunks/_1toS6uJ.js";import{A as ke}from"../chunks/AIxcQUCD.js";import{D as ye}from"../chunks/Cy3mxnRm.js";function he(D,u){e(u).profile.loginGoogle(e(u))}function xe(D,u,k){window.confirm("Are you sure you want to stay logged out? You might need to sync manually later")&&(e(u).profile.updateLoginStatus(void 0),d(k,e(u).profile.isAutomaticallyLoggedOut()))}var Ce=g('<a class="deck-card svelte-142wub4"><div class="left"><span class="deck-card-title svelte-142wub4"> </span> <span class="deck-card-subtitle svelte-142wub4"> </span></div> <div class="right svelte-142wub4"><span class="deck-count-learn-relearn svelte-142wub4" title="learning"> </span> <span class="deck-count-review svelte-142wub4" title="review"> </span> <span class="deck-count-new svelte-142wub4" title="new"> </span> <span class="deck-count-previously-studied svelte-142wub4" title="previously studied"> </span></div></a>'),Ae=g('<span class="update-circle svelte-142wub4"></span>'),De=g('<a class="a-button svelte-142wub4">Add New Deck</a>'),Le=g('<div class="deck-card-container svelte-142wub4"><!> <a class="deck-card-button svelte-142wub4" title="Deck Info" aria-label="Deck Info"><i class="fa-solid fa-list"></i></a></div>'),Se=g('<div class="deck-list-container svelte-142wub4"></div>'),Oe=g(`<div class="auto-logout-info-container svelte-142wub4"><div><i class="fa-solid fa-circle-info" style="color: #3E92CC;"></i> <p>You are <b>unexpectedly logged out</b> due to session expiration or server issue.
                    Try logging in again.</p> <p class="note svelte-142wub4">(*Please report to the developer if this happens frequently.)</p> <div><button class="button svelte-142wub4"><i class="fa-brands fa-google"></i>&nbsp;
                        Log in with Google</button> <button class="button invert svelte-142wub4"><i class="fa-solid fa-ban"></i>&nbsp;
                        Stay Logged Out</button></div></div></div>`),$e=g('<!> <div class="main-container svelte-142wub4"><div class="top-container svelte-142wub4"><a class="a-button svelte-142wub4" style="background-color: #A0D0F0;"><div style="display: flex; align-items: center; justify-content: space-between;"><span>Changelog</span> <span style="opacity: 0.4; font-weight: bold;"> </span></div> <!></a> <!></div> <div class="hr svelte-142wub4"></div> <!></div>',1);function Ye(D,u){ce(u,!1);const k=w(),y=w(),F=(t,a=_e)=>{var v=Ce(),l=i(v),n=i(l),b=i(n,!0);r(n);var f=o(n,2),$=i(f,!0);r(f),r(l);var q=o(l,2),W=i(q),ee=i(W,!0);r(W);var N=o(W,2),ae=i(N,!0);r(N);var j=o(N,2),te=i(j,!0);r(j);var R=o(j,2),se=i(R,!0);r(R),r(q),r(v),C((re,ie,oe,le)=>{A(v,"href",`${m??""}/overview?id=${a(),c(()=>a().id)??""}`),_(b,(a(),c(()=>a().title))),we(f,(a(),c(()=>`--subtitle-color: ${a().color??"#00000080"}`))),_($,(a(),c(()=>a().subtitle))),_(ee,re),_(ae,ie),_(te,oe),_(se,le)},[()=>(e(s),a(),c(()=>e(s).getLearningRelearningCardsCount(a().id)||"")),()=>(e(s),a(),c(()=>e(s).getScheduledReviewCardsCount(a().id)||"")),()=>(e(s),a(),c(()=>e(s).getScheduledNewOrWarmUpCardsCount(a().id)||"")),()=>(e(s),a(),c(()=>e(s).getScheduledPreviouslyStudiedCardsCount(a().id)||""))],E),p(t,v)};let s=w(new ke),h=w(!1),L=w(!1);ve(async()=>{await e(s).init(),d(s,e(s)),d(L,e(s).isNewUpdateExist()),I();const t=await e(s).initProfile();d(h,e(s).profile.isAutomaticallyLoggedOut()),t&&d(s,e(s)),d(L,e(s).isNewUpdateExist())});function I(){"serviceWorker"in navigator&&navigator.serviceWorker.register(`${m}/service-worker.js`).then(t=>{}).catch(t=>console.error("SW registration failed:",t))}function M(t){return ye.find(a=>a.id===t)??{id:t,title:t,subtitle:""}}Y(()=>e(s),()=>{d(k,Object.keys(e(s).deckData))}),Y(()=>e(h),()=>{d(y,e(h))}),de(),me();var B=$e(),G=ue(B);fe(G,{title:"WenBun (beta)",noBack:!0});var P=o(G,2),S=i(P),x=i(S),O=i(x),T=o(i(O),2),V=i(T);r(T),r(O);var X=o(O,2);{var z=t=>{var a=Ae();p(t,a)};U(X,t=>{e(L)&&t(z)})}r(x);var H=o(x,2);{var J=t=>{var a=De();C(()=>A(a,"href",`${m??""}/deck-browser/`)),p(t,a)};U(H,t=>{e(y)||t(J)})}r(S);var K=o(S,4);{var Q=t=>{var a=Se();ge(a,5,()=>e(k),be,(v,l)=>{var n=Le(),b=i(n),f=E(()=>(e(l),c(()=>M(e(l)))));F(b,()=>e(f));var $=o(b,2);r(n),C(()=>A($,"href",`${m??""}/deck?id=${e(l)??""}`)),p(v,n)}),r(a),p(t,a)},Z=t=>{var a=Oe(),v=i(a),l=o(i(v),6),n=i(l);n.__click=[he,s];var b=o(n,2);b.__click=[xe,s,h],r(l),r(v),r(a),p(t,a)};U(K,t=>{e(y)?t(Z,!1):t(Q)})}r(P),C(t=>{A(x,"href",`${m??""}/about/`),_(V,`v${t??""}`)},[()=>(e(s),c(()=>e(s).getCurrentAppVersion()))],E),p(D,B),pe()}ne(["click"]);export{Ye as component};
