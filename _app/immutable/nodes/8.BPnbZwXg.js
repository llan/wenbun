import"../chunks/CWj6FrbW.js";import"../chunks/BwBI99aB.js";import{s as le,d as ot,o as it}from"../chunks/ycU_2_ja.js";import{K as He,O as l,V as v,W as n,T as r,ae as rt,X as st,Q as z,R as s,S as Ue,L as x,M as ie,N as nt,P as re,g as t,b as h,af as _,_ as U,d as g,q as b,Z as je}from"../chunks/D5KdzY0j.js";import{i as qe}from"../chunks/B0cj2f_u.js";import{S as lt,A as vt,_ as V,N as u,d as R,e as dt,i as ut,f as se}from"../chunks/D7YVDKnD.js";import{T as ct,r as P,a as Ge}from"../chunks/BchW2rds.js";import{s as ne}from"../chunks/D3cWW_kC.js";import{b as k,a as Z}from"../chunks/BdMYB4Xh.js";import{b as E}from"../chunks/DNTGBZEe.js";import{i as pt}from"../chunks/DaQO7wjj.js";import{b as _t}from"../chunks/BB5xDxxv.js";var ft=l('<div class="settings-item"><label class="settings-label svelte-k8ruu5"><div><div class="settings-label-title"> </div> <div class="settings-label-help svelte-k8ruu5"> </div></div> <div class="settings-children"><!></div></label></div>');function f(T,c){He(c,!0);const L=lt[c.key]??{label:"",help:""};var I=ft(),S=v(I),a=v(S),D=v(a),W=v(D,!0);n(D);var J=r(D,2),X=v(J,!0);n(J),n(a);var M=r(a,2),Y=v(M);rt(Y,()=>c.children??st),n(M),n(S),n(I),z(()=>{le(W,L.label),le(X,L.help)}),s(T,I),Ue()}var ht=(T,c)=>c(),yt=(T,c)=>c(),mt=(T,c)=>c(),gt=l('<textarea class="profile-textarea svelte-1t4a6o"></textarea> <button class="button svelte-1t4a6o">import</button> <div class="settings-label-help svelte-1t4a6o" style="margin: 1em 0">To manually export the profile data, copy the text above and store it somewhere safe.<br/> To manually import the profile data, paste the text into the textbox and click the import button.</div>',1),bt=(T,c)=>h(c,!t(c)),$t=(T,c)=>t(c).downloadProfile(),Pt=(T,c)=>c(),St=l("<select><option>auto</option><option>manual</option></select>"),wt=l('<input type="number" class="svelte-1t4a6o"/>'),kt=l('<input type="number" class="svelte-1t4a6o"/>'),Ct=l("<select><option>Mix</option><option>After Reviews</option><option>Before Reviews</option></select>"),xt=l('<input type="number" class="svelte-1t4a6o"/>'),Rt=l("<select><option>Mix</option><option>After Reviews</option><option>Before Reviews</option></select>"),zt=l('<input type="text"/>'),Tt=l('<input type="text"/>'),Dt=l('<div style="display: flex; flex-direction: row; align-items: center; gap: 0.5em;"><input type="number" step="0.01" class="svelte-1t4a6o"/></div>'),At=l('<input type="checkbox" class="svelte-1t4a6o"/>'),Lt=l('<input type="checkbox" class="svelte-1t4a6o"/>'),Mt=l("<textarea></textarea>"),Ft=l('<input type="checkbox" class="svelte-1t4a6o"/>'),Ot=l("<select><option>Pinyin (wén)</option><option>Numeric (wen2)</option><option>Zhuyin (ㄨㄣˊ)</option></select>"),Bt=l('<input type="checkbox" class="svelte-1t4a6o"/>'),Nt=l('<input type="checkbox" class="svelte-1t4a6o"/>'),Vt=(T,c,L)=>c(t(L)),It=l("<option> </option>"),jt=l("<div><div>Load Preset</div> <div><select></select></div></div>"),qt=l('<input type="color" class="svelte-1t4a6o"/>'),Gt=l('<input type="color" class="svelte-1t4a6o"/>'),Ht=l('<input type="color" class="svelte-1t4a6o"/>'),Ut=l('<input type="color" class="svelte-1t4a6o"/>'),Zt=l('<input type="color" class="svelte-1t4a6o"/>'),Et=(T,c)=>c(),Jt=l(`<div class="top-settings-section svelte-1t4a6o"><button class="button svelte-1t4a6o">Save</button> <button class="button svelte-1t4a6o">Discard Changes</button></div> <div class="settings-section svelte-1t4a6o"><div class="section-title svelte-1t4a6o">Profile</div> <div class="section-container svelte-1t4a6o"><!> <button class="button svelte-1t4a6o">manual import/export</button> <button class="button svelte-1t4a6o"><i class="fa-solid fa-download"></i>&nbsp;
                    export profile data (download)</button> <button class="button svelte-1t4a6o"><i class="fa-solid fa-upload"></i>&nbsp;
                    import profile data (upload)</button></div></div> <div class="settings-section svelte-1t4a6o"><div class="section-title svelte-1t4a6o">Learning</div> <div class="section-container svelte-1t4a6o"><!> <!> <!> <!> <!> <!></div></div> <div class="settings-section svelte-1t4a6o"><div class="section-title svelte-1t4a6o">FSRS</div> <div class="section-container svelte-1t4a6o"><!> <!> <!> <!> <!> <!></div></div> <div class="settings-section svelte-1t4a6o"><div class="section-title svelte-1t4a6o">Chinese</div> <div class="section-container svelte-1t4a6o"><!> <!> <!> <!> <!> <!> <!> <!> <!> <!></div></div> <div class="settings-section svelte-1t4a6o"><div class="section-container svelte-1t4a6o"><button class="button svelte-1t4a6o">Reset to Default Settings</button></div></div> <div class="settings-section svelte-1t4a6o"><div class="section-container svelte-1t4a6o"><a class="button svelte-1t4a6o" href="https://github.com/ray-pH/wenbun" aria-label="GitHub Repository" target="_blank"><i class="fa-brands fa-github"></i>&nbsp;
                    GitHub Repository</a> <a class="button svelte-1t4a6o" href="https://discord.gg/pVUuqJqywt" aria-label="GitHub Repository" target="_blank"><i class="fa-brands fa-discord"></i>&nbsp;
                    Discord Community Server</a></div></div>`,1),Kt=l('<!> <div class="main-container svelte-1t4a6o"><!></div>',1);function la(T,c){He(c,!1);const L=x(),I=x();let S=x(new vt),a=x(),D=x();it(async()=>{await t(S).init(),h(a,V.cloneDeep(t(S).getConfig())),h(D,V.cloneDeep(t(a))),h(q,t(a).learningSteps.join(" ")),h(G,t(a).previouslyStudiedLearningSteps.join(" ")),h(H,t(a).FSRSParams.join(",")),h(B,t(S).exportProfile()),h(ee,t(B)),h(S,t(S))});async function W(){await t(S).saveConfig(t(a)),h(D,V.cloneDeep(t(a)))}function J(){h(a,V.cloneDeep(t(D)))}async function X(){window.confirm("Are you sure you want to reset to the default settings?")&&(await t(S).resetConfigToDefault(),h(a,V.cloneDeep(t(S).getConfig())),h(D,V.cloneDeep(t(a))))}let M=x("");function Y(m){const F=se[m];F&&_(a,t(a).zh.toneColors=F),h(M,"")}let q=x(""),G=x(""),H=x(""),ve=x(!1),B=x(""),ee=x("");function Ze(){t(S).tryImportProfile(t(B)).then(m=>{de(m)})}function Ee(){t(S).tryUploadProfile().then(m=>{de(m)})}function de(m){m?window.alert("Successfully imported profile data"):window.alert("Failed to import profile data")}function Je(){return new Promise(m=>{if(!t(L))m(!0);else{const F=window.confirm("You have unsaved changes. Are you sure you want to leave?");m(F)}})}ie(()=>(t(a),t(D)),()=>{h(L,!V.isEqual(t(a),t(D)))}),ie(()=>(t(a),t(q),t(G),t(H)),()=>{if(t(a)){const m=t(q).split(" ").map(p=>p.trim()).filter(p=>p);m.length<4&&m.every(p=>p.match(/^\d+[m|d]$/))&&_(a,t(a).learningSteps=m);const N=t(G).split(" ").map(p=>p.trim()).filter(p=>p);N.length<4&&N.every(p=>p.match(/^\d+[m|d]$/))&&_(a,t(a).previouslyStudiedLearningSteps=N);const j=t(H).split(",").map(p=>p.trim()).filter(p=>p);j.length===21&&j.every(p=>!isNaN(parseFloat(p)))&&_(a,t(a).FSRSParams=j.map(p=>parseFloat(p)))}}),ie(()=>(t(B),t(ee)),()=>{h(I,t(B)!==t(ee))}),nt(),pt();var ue=Kt(),ce=re(ue);ct(ce,{title:"Settings",get backUrl(){return`${_t??""}/`},isSettings:!0,backConfirmCallback:Je});var pe=r(ce,2),Ke=v(pe);{var Qe=m=>{var F=Jt(),N=re(F),K=v(N);K.__click=[ht,W];var j=r(K,2);j.__click=[yt,J],n(N);var Q=r(N,2),p=r(v(Q),2),_e=v(p);{var We=i=>{var d=gt(),e=re(d);Ge(e);var o=r(e,2);o.__click=[mt,Ze],je(2),z(()=>o.disabled=!t(I)),k(e,()=>t(B),y=>h(B,y)),s(i,d)};qe(_e,i=>{t(ve)&&i(We)})}var fe=r(_e,2);fe.__click=[bt,ve];var he=r(fe,2);he.__click=[$t,S];var Xe=r(he,2);Xe.__click=[Pt,Ee],n(p),n(Q);var te=r(Q,2),ye=r(v(te),2),me=v(ye);f(me,{key:"gradingMethod",children:(i,d)=>{var e=St();z(()=>{t(a),U(()=>{})});var o=v(e);o.value=o.__value="auto";var y=r(o);y.value=y.__value="manual",n(e),E(e,()=>t(a).gradingMethod,$=>_(a,t(a).gradingMethod=$)),s(i,e)},$$slots:{default:!0}});var ge=r(me,2);f(ge,{key:"newCardPerDay",children:(i,d)=>{var e=wt();P(e),k(e,()=>t(a).newCardPerDay,o=>_(a,t(a).newCardPerDay=o)),s(i,e)},$$slots:{default:!0}});var be=r(ge,2);f(be,{key:"maxReviewsPerDay",children:(i,d)=>{var e=kt();P(e),k(e,()=>t(a).maxReviewsPerDay,o=>_(a,t(a).maxReviewsPerDay=o)),s(i,e)},$$slots:{default:!0}});var $e=r(be,2);f($e,{key:"newCardOrder",children:(i,d)=>{var e=Ct();z(()=>{t(a),U(()=>{})});var o=v(e),y={},$=r(o),C={},w=r($),A={};n(e),z(()=>{y!==(y=(b(u),g(()=>u.Mix)))&&(o.value=(o.__value=(b(u),g(()=>u.Mix)))??""),C!==(C=(b(u),g(()=>u.AfterReviews)))&&($.value=($.__value=(b(u),g(()=>u.AfterReviews)))??""),A!==(A=(b(u),g(()=>u.BeforeReviews)))&&(w.value=(w.__value=(b(u),g(()=>u.BeforeReviews)))??"")}),E(e,()=>t(a).newCardOrder,O=>_(a,t(a).newCardOrder=O)),s(i,e)},$$slots:{default:!0}});var Pe=r($e,2);f(Pe,{key:"newPreviouslyStudiedCardPerDay",children:(i,d)=>{var e=xt();P(e),k(e,()=>t(a).newPreviouslyStudiedCardPerDay,o=>_(a,t(a).newPreviouslyStudiedCardPerDay=o)),s(i,e)},$$slots:{default:!0}});var Ye=r(Pe,2);f(Ye,{key:"newPreviouslyStudiedCardOrder",children:(i,d)=>{var e=Rt();z(()=>{t(a),U(()=>{})});var o=v(e),y={},$=r(o),C={},w=r($),A={};n(e),z(()=>{y!==(y=(b(u),g(()=>u.Mix)))&&(o.value=(o.__value=(b(u),g(()=>u.Mix)))??""),C!==(C=(b(u),g(()=>u.AfterReviews)))&&($.value=($.__value=(b(u),g(()=>u.AfterReviews)))??""),A!==(A=(b(u),g(()=>u.BeforeReviews)))&&(w.value=(w.__value=(b(u),g(()=>u.BeforeReviews)))??"")}),E(e,()=>t(a).newPreviouslyStudiedCardOrder,O=>_(a,t(a).newPreviouslyStudiedCardOrder=O)),s(i,e)},$$slots:{default:!0}}),n(ye),n(te);var ae=r(te,2),Se=r(v(ae),2),we=v(Se);f(we,{key:"learningSteps",children:(i,d)=>{var e=zt();P(e),ne(e,1,"svelte-1t4a6o",null,{},{invalid:!1}),k(e,()=>t(q),o=>h(q,o)),s(i,e)},$$slots:{default:!0}});var ke=r(we,2);f(ke,{key:"previouslyStudiedLearningSteps",children:(i,d)=>{var e=Tt();P(e),ne(e,1,"svelte-1t4a6o",null,{},{invalid:!1}),k(e,()=>t(G),o=>h(G,o)),s(i,e)},$$slots:{default:!0}});var Ce=r(ke,2);f(Ce,{key:"desiredRetention",children:(i,d)=>{var e=Dt(),o=v(e);P(o),n(e),k(o,()=>t(a).desiredRetention,y=>_(a,t(a).desiredRetention=y)),s(i,e)},$$slots:{default:!0}});var xe=r(Ce,2);f(xe,{key:"enableShortTerm",children:(i,d)=>{var e=At();P(e),Z(e,()=>t(a).enableShortTerm,o=>_(a,t(a).enableShortTerm=o)),s(i,e)},$$slots:{default:!0}});var Re=r(xe,2);f(Re,{key:"enableFuzz",children:(i,d)=>{var e=Lt();P(e),Z(e,()=>t(a).enableFuzz,o=>_(a,t(a).enableFuzz=o)),s(i,e)},$$slots:{default:!0}});var et=r(Re,2);f(et,{key:"FSRSParams",children:(i,d)=>{var e=Mt();Ge(e),ne(e,1,"",null,{},{invalid:!1}),k(e,()=>t(H),o=>h(H,o)),s(i,e)},$$slots:{default:!0}}),n(Se),n(ae);var oe=r(ae,2),ze=r(v(oe),2),Te=v(ze);f(Te,{key:"zhAlwaysShowReading",children:(i,d)=>{var e=Ft();P(e),Z(e,()=>t(a).zh.alwaysShowReading,o=>_(a,t(a).zh.alwaysShowReading=o)),s(i,e)},$$slots:{default:!0}});var De=r(Te,2);f(De,{key:"zhMandarinReading",children:(i,d)=>{var e=Ot();z(()=>{t(a),U(()=>{})});var o=v(e),y={},$=r(o),C={},w=r($),A={};n(e),z(()=>{y!==(y=(b(R),g(()=>R.Pinyin)))&&(o.value=(o.__value=(b(R),g(()=>R.Pinyin)))??""),C!==(C=(b(R),g(()=>R.PinyinNumeric)))&&($.value=($.__value=(b(R),g(()=>R.PinyinNumeric)))??""),A!==(A=(b(R),g(()=>R.Zhuyin)))&&(w.value=(w.__value=(b(R),g(()=>R.Zhuyin)))??"")}),E(e,()=>t(a).zh.mandarinReading,O=>_(a,t(a).zh.mandarinReading=O)),s(i,e)},$$slots:{default:!0}});var Ae=r(De,2);f(Ae,{key:"zhPlayAudio",children:(i,d)=>{var e=Bt();P(e),Z(e,()=>t(a).zh.playAudio,o=>_(a,t(a).zh.playAudio=o)),s(i,e)},$$slots:{default:!0}});var Le=r(Ae,2);f(Le,{key:"zhIsColorBasedOnTone",children:(i,d)=>{var e=Nt();P(e),Z(e,()=>t(a).zh.isColorBasedOnTone,o=>_(a,t(a).zh.isColorBasedOnTone=o)),s(i,e)},$$slots:{default:!0}});var Me=r(Le,2);f(Me,{key:"zhToneColors",children:(i,d)=>{var e=jt(),o=r(v(e),2),y=v(o);z(()=>{t(M),U(()=>{})}),y.__change=[Vt,Y,M],dt(y,5,()=>(b(se),g(()=>Object.keys(se))),ut,($,C)=>{var w=It(),A=v(w,!0);n(w);var O={};z(()=>{le(A,t(C)),O!==(O=t(C))&&(w.value=(w.__value=t(C))??"")}),s($,w)}),n(y),n(o),n(e),E(y,()=>t(M),$=>h(M,$)),s(i,e)},$$slots:{default:!0}});var Fe=r(Me,2);f(Fe,{key:"zhTone1",children:(i,d)=>{var e=qt();P(e),k(e,()=>t(a).zh.toneColors[0],o=>_(a,t(a).zh.toneColors[0]=o)),s(i,e)},$$slots:{default:!0}});var Oe=r(Fe,2);f(Oe,{key:"zhTone2",children:(i,d)=>{var e=Gt();P(e),k(e,()=>t(a).zh.toneColors[1],o=>_(a,t(a).zh.toneColors[1]=o)),s(i,e)},$$slots:{default:!0}});var Be=r(Oe,2);f(Be,{key:"zhTone3",children:(i,d)=>{var e=Ht();P(e),k(e,()=>t(a).zh.toneColors[2],o=>_(a,t(a).zh.toneColors[2]=o)),s(i,e)},$$slots:{default:!0}});var Ne=r(Be,2);f(Ne,{key:"zhTone4",children:(i,d)=>{var e=Ut();P(e),k(e,()=>t(a).zh.toneColors[3],o=>_(a,t(a).zh.toneColors[3]=o)),s(i,e)},$$slots:{default:!0}});var tt=r(Ne,2);f(tt,{key:"zhToneNeutral",children:(i,d)=>{var e=Zt();P(e),k(e,()=>t(a).zh.toneColors[4],o=>_(a,t(a).zh.toneColors[4]=o)),s(i,e)},$$slots:{default:!0}}),n(ze),n(oe);var Ve=r(oe,2),Ie=v(Ve),at=v(Ie);at.__click=[Et,X],n(Ie),n(Ve),je(2),z(()=>{K.disabled=!t(L),j.disabled=!t(L)}),s(m,F)};qe(Ke,m=>{t(a)&&m(Qe)})}n(pe),s(T,ue),Ue()}ot(["click","change"]);export{la as component};
