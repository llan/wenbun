var xt=Object.defineProperty;var St=(r,t,i)=>t in r?xt(r,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):r[t]=i;var De=(r,t,i)=>St(r,typeof t!="symbol"?t+"":t,i);import"../chunks/CWj6FrbW.js";import"../chunks/D12B_2YD.js";import{a as Tt,d as ot,o as lt,s as ee}from"../chunks/DHzHPe8k.js";import{k as $e,z as At,a8 as Rt,aZ as Et,a_ as It,w as Gt,K as Nt,J as Ut,E as Wt,af as zt,N as Dt,ad as Pt,a$ as Ft,b0 as Mt,l as Ht,a3 as W,b1 as Ot,b2 as Lt,b3 as qt,b4 as Bt,Z as Zt,ai as Ee,p as dt,e as be,an as jt,i as v,f as z,d as y,r as h,s as I,h as e,t as Ce,b as A,c as ct,a as Pe,ay as ut,P as N,ag as et,ah as Yt,b5 as Kt,a5 as tt,aW as Jt,A as _e,b6 as Xt}from"../chunks/DkA9jLS_.js";import{i as O}from"../chunks/0GsRM2Fi.js";import{e as vt,i as ft}from"../chunks/Bw1cR02L.js";import{s as se,c as Qt}from"../chunks/QHNB9Zof.js";import{w as gt}from"../chunks/BmZvuVU-.js";import{i as Vt}from"../chunks/EGtqtshi.js";import{p as Xe}from"../chunks/DB5RGsVz.js";import{b as mt}from"../chunks/niaL4lB3.js";import{g as x,C as $t,h as ea,T as at,p as ta,A as aa,c as rt,i as ra,W as ne}from"../chunks/rXo6bqsW.js";import{s as U,T as ia}from"../chunks/xv7TxEBj.js";import{s as na}from"../chunks/DeZMyIbe.js";import{H as sa}from"../chunks/DcL13wi7.js";function Je(r,t,i){$e&&At();var n=r,s=zt,_,T=Rt()?Et:It;Gt(()=>{T(s,s=t())&&(_&&Nt(_),_=Ut(()=>i(n)))}),$e&&(n=Wt)}const oa=()=>performance.now(),ve={tick:r=>requestAnimationFrame(r),now:()=>oa(),tasks:new Set};function ht(){const r=ve.now();ve.tasks.forEach(t=>{t.c(r)||(ve.tasks.delete(t),t.f())}),ve.tasks.size!==0&&ve.tick(ht)}function la(r){let t;return ve.tasks.size===0&&ve.tick(ht),{promise:new Promise(i=>{ve.tasks.add(t={c:r,f:i})}),abort(){ve.tasks.delete(t)}}}function qe(r,t){gt(()=>{r.dispatchEvent(new CustomEvent(t))})}function da(r){if(r==="float")return"cssFloat";if(r==="offset")return"cssOffset";if(r.startsWith("--"))return r;const t=r.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(i=>i[0].toUpperCase()+i.slice(1)).join("")}function it(r){const t={},i=r.split(";");for(const n of i){const[s,_]=n.split(":");if(!s||_===void 0)break;const T=da(s.trim());t[T]=_.trim()}return t}const ca=r=>r;function nt(r,t,i,n){var s=(r&Lt)!==0,_=(r&qt)!==0,T=s&&_,b=(r&Ot)!==0,f=T?"both":s?"in":"out",D,S=t.inert,te=t.style.overflow,C,g;function a(){return gt(()=>D??(D=i()(t,(n==null?void 0:n())??{},{direction:f})))}var l={is_global:b,in(){var d;if(t.inert=S,!s){g==null||g.abort(),(d=g==null?void 0:g.reset)==null||d.call(g);return}_||C==null||C.abort(),qe(t,"introstart"),C=Qe(t,a(),g,1,()=>{qe(t,"introend"),C==null||C.abort(),C=D=void 0,t.style.overflow=te})},out(d){if(!_){d==null||d(),D=void 0;return}t.inert=!0,qe(t,"outrostart"),g=Qe(t,a(),C,0,()=>{qe(t,"outroend"),d==null||d()})},stop:()=>{C==null||C.abort(),g==null||g.abort()}},R=Dt;if((R.transitions??(R.transitions=[])).push(l),s&&Tt){var L=b;if(!L){for(var E=R.parent;E&&(E.f&Pt)!==0;)for(;(E=E.parent)&&(E.f&Ft)===0;);L=!E||(E.f&Mt)!==0}L&&Ht(()=>{W(()=>l.in())})}}function Qe(r,t,i,n,s){var _=n===1;if(Bt(t)){var T,b=!1;return Zt(()=>{if(!b){var R=t({direction:_?"in":"out"});T=Qe(r,R,i,n,s)}}),{abort:()=>{b=!0,T==null||T.abort()},deactivate:()=>T.deactivate(),reset:()=>T.reset(),t:()=>T.t()}}if(i==null||i.deactivate(),!(t!=null&&t.duration))return s(),{abort:Ee,deactivate:Ee,reset:Ee,t:()=>n};const{delay:f=0,css:D,tick:S,easing:te=ca}=t;var C=[];if(_&&i===void 0&&(S&&S(0,1),D)){var g=it(D(0,1));C.push(g,g)}var a=()=>1-n,l=r.animate(C,{duration:f,fill:"forwards"});return l.onfinish=()=>{l.cancel();var R=(i==null?void 0:i.t())??1-n;i==null||i.abort();var L=n-R,E=t.duration*Math.abs(L),d=[];if(E>0){var ae=!1;if(D)for(var we=Math.ceil(E/16.666666666666668),Z=0;Z<=we;Z+=1){var oe=R+L*te(Z/we),j=it(D(oe,1-oe));d.push(j),ae||(ae=j.overflow==="hidden")}ae&&(r.style.overflow="hidden"),a=()=>{var P=l.currentTime;return R+L*te(P/E)},S&&la(()=>{if(l.playState!=="running")return!1;var P=a();return S(P,1-P),!0})}l=r.animate(d,{duration:E,fill:"forwards"}),l.onfinish=()=>{a=()=>n,S==null||S(n,1-n),s()}},{abort:()=>{l&&(l.cancel(),l.effect=null,l.onfinish=Ee)},deactivate:()=>{s=Ee},reset:()=>{n===0&&(S==null||S(1,0))},t:()=>a()}}const ua=({url:r})=>({deckId:r.searchParams.get("id")||"",isExtraStudy:r.searchParams.get("isExtraStudy")==="true",cardIds:r.searchParams.get("cardIds")||encodeURIComponent("[]")}),ar=Object.freeze(Object.defineProperty({__proto__:null,load:ua},Symbol.toStringTag,{value:"Module"}));class va{constructor(t,i=!0){De(this,"audios");De(this,"currentIndex",0);De(this,"isPlaying",!1);De(this,"onEnded",this.handleEnded.bind(this));this.audios=t.map(n=>{const s=new Audio(n);return s.preload="auto",i&&s.load(),s})}handleEnded(){this.audios[this.currentIndex].removeEventListener("ended",this.onEnded),this.currentIndex++,this.currentIndex<this.audios.length?this.playCurrent():(this.isPlaying=!1,this.currentIndex=0)}playCurrent(){const t=this.audios[this.currentIndex];t.addEventListener("ended",this.onEnded),t.currentTime=0,t.play().catch(i=>{console.warn("Playback failed:",i),this.stop()})}play(){this.audios.length!==0&&(this.isPlaying&&this.stop(),this.isPlaying=!0,this.currentIndex=0,this.playCurrent())}stop(){if(!this.isPlaying)return;this.isPlaying=!1;const t=this.audios[this.currentIndex];t.pause(),t.currentTime=0,t.removeEventListener("ended",this.onEnded),this.currentIndex=0}}const fa={[x.Again]:"Fail",[x.Hard]:"Hard",[x.Good]:"Good",[x.Easy]:"Easy"},ga={[x.Again]:"again",[x.Hard]:"hard",[x.Good]:"good",[x.Easy]:"easy"},ma={[x.Again]:"fa fa-solid fa-face-frown",[x.Hard]:"fa fa-solid fa-face-meh",[x.Good]:"fa fa-solid fa-face-smile",[x.Easy]:"fa fa-solid fa-star"};var Ve;(r=>{function t(n){const s=n.correctStrokeCount===0?1/0:n.incorrectStrokeCount/n.correctStrokeCount;return s<.25||n.incorrectStrokeCount<=2?x.Good:s<.75||n.incorrectStrokeCount<=4?x.Hard:x.Again}r.getGrade=t;function i(n){switch(n){case x.Again:return"Again";case x.Hard:return"Hard";case x.Good:return"Good";default:return"Unknown"}}r.gradeToLabel=i})(Ve||(Ve={}));var ha=(r,t)=>t(),_a=z('<button class="audio-button svelte-4rg8" aria-label="Play Audio"><i class="fa-solid fa-volume-low svelte-4rg8"></i></button>'),Ca=z('<div class="new-element-indicator svelte-4rg8">New Card</div>'),wa=z("<div>Warm Up</div>"),pa=z('<div class="new-element-indicator is-hidden svelte-4rg8"></div>'),ya=z('<span class="svelte-4rg8"> </span>'),ba=z('<span class="empty-character-box svelte-4rg8">&#x3000;</span>'),ka=z('<!> <div class="character-box-container svelte-4rg8"></div>',1),xa=(r,t)=>t(),Sa=z('<button><i></i> <span class="svelte-4rg8"> </span></button>'),Ta=z('<div class="character-writer svelte-4rg8"><div class="meaning svelte-4rg8"> </div> <div><div class="reading svelte-4rg8"> </div> <!></div> <div class="character-container svelte-4rg8"><div class="grid-background svelte-4rg8"><svg xmlns="http://www.w3.org/2000/svg" id="grid-background-target" class="svelte-4rg8"><line x1="0" y1="0" class="svelte-4rg8"></line><line y1="0" x2="0" class="svelte-4rg8"></line><line y1="0" class="svelte-4rg8"></line><line x1="0" class="svelte-4rg8"></line></svg></div> <div class="bottom-container svelte-4rg8"><!></div> <!></div></div>');function Aa(r,t){var Ue;dt(t,!0);let i=be(500),n=be(500),s="#DDD";const _=500,T=new Audio(`${mt}/assets/sounds/correct-choice-43861.mp3`);let b=be(jt([])),f=be(!1),D=be(!1),S=be(!1);function te(){return parseFloat(getComputedStyle(document.documentElement).fontSize)}function C(){const c=te()*3*2;v(i,Math.min(document.documentElement.clientWidth-c,500),!0),v(n,e(i),!0)}let g=Xe(t,"isRequestManualGrade",15),a=Xe(t,"autoReviewData",15),l=be(0),R=(Ue=t.characterData)==null?void 0:Ue.meanings.join("; ");function L(c){for(const u of c)if(u.startsWith(at))return ta(u.substring(at.length))}function E(){var c;v(D,!0),!e(S)&&(t.cardConfig.isFirstTime?(v(l,(e(l)+1)%t.characterData.characters.length),window.setTimeout(()=>{ae(e(l))},_)):(T.play(),v(l,e(l)+1),e(l)==((c=t.characterData)==null?void 0:c.characters.length)?(t.onComplete({...a()}),v(f,!0),window.setTimeout(()=>{Z()},_)):window.setTimeout(()=>{ae(e(l))},_)))}let d;function ae(c){if(e(S)||!t.characterData)return;d&&(t.cardConfig.isFirstTime||d.cancelQuiz(),d.hideCharacter(),d.hideOutline());const u=L(t.characterData.tags[c]??[]);d=sa.create("grid-background-target",t.characterData.characters[c],{width:e(i),height:e(n),padding:5,showCharacter:!1,showOutline:t.cardConfig.isShowOutline,highlightOnComplete:!1,strokeColor:t.app.getChineseToneColor(u)??"#555",drawingWidth:$t,drawingColor:"#555",onComplete:()=>{E()}}),t.cardConfig.isFirstTime?(setTimeout(()=>{e(D)||Z()},_),setTimeout(()=>{d.animateCharacter({onComplete:()=>{setTimeout(()=>{d.hideOutline(),d.hideCharacter(),E()},_)}})},_)):d.quiz({onMistake:()=>{a(a().incorrectStrokeCount++,!0),a(a().totalStrokeCount++,!0)},onCorrectStroke:()=>{a(a().correctStrokeCount++,!0),a(a().totalStrokeCount++,!0)}})}function we(){var u;const c=(u=t.characterData)==null?void 0:u.audioUrl;c&&v(b,c.map(X=>{const ge=X.map(me=>ea(t.cardConfig.lang,me));return new va(ge)}),!0)}function Z(){const c=Math.floor(Math.random()*e(b).length),u=e(b)[c];u.stop(),u.play()}function oe(){if(t.cardConfig.isWarmUp){window.alert("Can't change grade during warm-up, since grading doesn't affect scheduling in this phase.");return}g(!g())}function j(c=0){const u=t.cardConfig.warmUpCount??0,X=t.cardConfig.warmUpMaxCount;return`${Math.round((u+c)/X*100)}%`}lt(()=>(a({correctStrokeCount:0,incorrectStrokeCount:0,totalStrokeCount:0}),C(),we(),window.addEventListener("resize",C),ae(0),()=>{v(S,!0),window.removeEventListener("resize",C)}));var P=Ta(),fe=y(P),Fe=y(fe,!0);h(fe);var w=I(fe,2);let le;var Ie=y(w),de=y(Ie,!0);h(Ie);var Be=I(Ie,2);{var Ze=c=>{var u=_a();u.__click=[ha,Z],A(c,u)};O(Be,c=>{e(b).length>0&&c(Ze)})}h(w);var Me=I(w,2),Ge=y(Me),ke=y(Ge),pe=y(ke);U(pe,"stroke",s);var xe=I(pe);U(xe,"stroke",s);var ye=I(xe);U(ye,"stroke",s);var Se=I(ye);U(Se,"stroke",s),h(ke),h(Ge);var Ne=I(Ge,2),je=y(Ne);{var Ye=c=>{var u=ka(),X=Pe(u);{var ge=m=>{var k=Ca();A(m,k)},me=(m,k)=>{{var Y=M=>{var Q=wa();let F,p;Ce((G,J)=>{F=se(Q,1,"new-element-indicator svelte-4rg8",null,F,G),p=na(Q,"",p,J)},[()=>({"is-complete":e(f)}),()=>({"--progress":j(),"--next-progress":j(1)})]),A(M,Q)},K=M=>{var Q=pa();A(M,Q)};O(m,M=>{t.cardConfig.isWarmUp?M(Y):M(K,!1)},k)}};O(X,m=>{t.cardConfig.isFirstTime?m(ge):m(me,!1)})}var o=I(X,2);vt(o,21,()=>t.characterData.characters,ft,(m,k,Y)=>{var K=ut(),M=Pe(K);{var Q=p=>{var G=ya(),J=y(G,!0);h(G),Ce(()=>ee(J,e(k))),A(p,G)},F=p=>{var G=ba();A(p,G)};O(M,p=>{Y<e(l)||t.cardConfig.isFirstTime?p(Q):p(F,!1)})}A(m,K)}),h(o),A(c,u)};O(je,c=>{var u;(u=t.characterData)!=null&&u.characters&&c(Ye)})}h(Ne);var He=I(Ne,2);{var Oe=c=>{var u=Sa();let X;u.__click=[xa,oe];var ge=y(u),me=I(ge,2),o=y(me,!0);h(me),h(u),Ce(m=>{X=se(u,1,`auto-review-indicator-container ${ga[t.autoGrade]}`,"svelte-4rg8",X,m),se(ge,1,Qt(ma[t.autoGrade]),"svelte-4rg8"),ee(o,fa[t.autoGrade])},[()=>({blinking:g(),animated:g(),"echo-once":!g()})]),A(c,u)};O(He,c=>{t.autoGrade&&c(Oe)})}h(Me),h(P),Ce(c=>{var u;ee(Fe,R),le=se(w,1,"reading-container svelte-4rg8",null,le,c),ee(de,(u=t.characterData)==null?void 0:u.reading),U(ke,"width",e(i)),U(ke,"height",e(n)),U(pe,"x2",e(i)),U(pe,"y2",e(n)),U(xe,"x1",e(i)),U(xe,"y2",e(n)),U(ye,"x1",e(i)/2),U(ye,"x2",e(i)/2),U(ye,"y2",e(n)),U(Se,"y1",e(n)/2),U(Se,"x2",e(i)),U(Se,"y2",e(n)/2)},[()=>({"is-hidden":!t.app.getConfig().zh.alwaysShowReading&&!e(f)&&!t.cardConfig.isFirstTime})]),A(r,P),ct()}ot(["click"]);const Ra=r=>r;function Ea(r){const t=r-1;return t*t*t+1}function st(r){const t=typeof r=="string"&&r.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[r,"px"]}function Ia(r,{delay:t=0,duration:i=400,easing:n=Ra}={}){const s=+getComputedStyle(r).opacity;return{delay:t,duration:i,easing:n,css:_=>`opacity: ${_*s}`}}function Ga(r,{delay:t=0,duration:i=400,easing:n=Ea,x:s=0,y:_=0,opacity:T=0}={}){const b=getComputedStyle(r),f=+b.opacity,D=b.transform==="none"?"":b.transform,S=f*(1-T),[te,C]=st(s),[g,a]=st(_);return{delay:t,duration:i,easing:n,css:(l,R)=>`
			transform: ${D} translate(${(1-l)*te}${C}, ${(1-l)*g}${a});
			opacity: ${f-S*R}`}}function Na(r){const t=r-1;return t*t*t+1}var Ua=z('<button><div class="review-button-inner svelte-1irkfzg"><div class="review-time svelte-1irkfzg"> </div> <div class="review-label svelte-1irkfzg"> </div></div></button>'),Wa=z('<div class="bottom-container svelte-1irkfzg"><div></div></div>'),za=z(`<div class="svelte-1irkfzg">You have done today's review.</div>`),Da=z('<div class="counter svelte-1irkfzg"><span class="underlined svelte-1irkfzg"><!></span></div>'),Pa=z('<div class="counter svelte-1irkfzg"><span> </span> <span> </span> <span> </span> <span> </span></div>'),Fa=z('<!> <div class="character-writer-container svelte-1irkfzg"><!></div> <!>',1),Ma=z('<!> <div class="container svelte-1irkfzg"><!> <!></div>',1);function rr(r,t){dt(t,!1);const i=N(),n=N(),s=(o,m=Ee,k)=>{let Y=_e(()=>Xt(k==null?void 0:k(),""));var K=Wa(),M=y(K);vt(M,5,m,ft,(Q,F)=>{var p=Ua();let G;p.__click=function(...B){var H;(H=e(F).onclick)==null||H.apply(this,B)};var J=y(p),q=y(J),re=y(q,!0);h(q);var V=I(q,2),$=y(V,!0);h(V),h(J),h(p),Ce(B=>{G=se(p,1,(e(F),W(()=>`review-button ${e(F).className||""}`)),"svelte-1irkfzg",G,B),ee(re,(e(F),W(()=>e(F).sublabel||" "))),ee($,(e(F),W(()=>e(F).label||" ")))},[()=>({"is-complete":e(F).isComplete})],_e),A(Q,p)}),h(M),h(K),Ce(()=>se(M,1,`review-button-container ${e(Y)}`,"svelte-1irkfzg")),nt(1,K,()=>Ga,()=>_),nt(2,K,()=>Ia,()=>T),A(o,K)},_={delay:100,y:-100,duration:300,easing:Na},T={duration:200};let b=Xe(t,"data",8),f=b().deckId||"",D=b().cardIds||encodeURIComponent("[]"),S=JSON.parse(decodeURIComponent(D)),te=b().isExtraStudy?"Extra Study":"Review",C=N(),g=N(!1),a=N(new aa);lt(async()=>{var o,m,k,Y;await e(a).init(),Z=(m=(o=e(a).deckData[f])==null?void 0:o.tags)==null?void 0:m.includes(rt.ZH_YUE),await E.init(Z?"yue":"zh"),v(a,e(a)),we=(Y=(k=e(a).deckData[f])==null?void 0:k.tags)==null?void 0:Y.includes(rt.ZH_TRAD),v(oe,e(a).isAutoGrading()),v(g,!0),b().isExtraStudy&&e(a).extraStudyHandler.registerReviewCardIdsOverride(S),de()});let l=N(!1),R=N(!1),L=N(!1),E=new ra,d=N(void 0),ae=N(!1),we=!1,Z=!1,oe=N(!1),j=N(void 0),P=N(!1),fe=N(0);const Fe=["Fail","Hard","Good","Easy"];let w=N(void 0),le=N({1:"",2:"",3:"",4:""});function Ie(){v(l,!1),v(ae,!1),v(j,void 0),v(P,!1)}function de(){Ie(),v(L,!0);const o=e(a).getNextCard(f);if(o===void 0){v(R,!0);return}e(a).getCard(f,o,!0)&&(v(L,!1),v(w,o),v(le,e(a).getRatingScheduledTimeStr(f,o)),v(d,e(a).getWenbunCustomState(f,o)),Kt(fe))}function Be(){e(a).startWarmUp(f,e(w)),v(ae,!0),v(w,e(w)),v(le,e(a).getRatingScheduledTimeStr(f,e(w))),v(d,e(a).getWenbunCustomState(f,e(w)))}function Ze(o){const m=e(a).getCardWord(f,o),k=e(a).getConfig();return E.getCharacterWriterData(m,{convertToTraditional:we,mandarinReading:k.zh.mandarinReading,isCantonese:Z,isPlayAudio:k.zh.playAudio})}function Me(o){const m=e(a).getWarmUpCount(f,o),k=e(n)&&m===0;return{isFirstTime:e(i),isWarmUp:e(n)&&!He(o),warmUpCount:m,warmUpMaxCount:e(a).getMaxWarmUpCount(),isShowOutline:e(i)||k,lang:Z?"yue":"zh"}}function Ge(o){v(l,!0),e(oe)&&v(j,Ve.getGrade(o))}async function ke(o){e(a).rateCard(f,e(w),o),await e(a).save(),de()}function pe(o){switch(o){case x.Easy:return"review-button-easy";case x.Good:return"review-button-good";case x.Hard:return"review-button-hard";case x.Again:return"review-button-fail"}}async function xe(){e(a).addIgnoredMark(f,e(w)),await e(a).save(),de()}function ye(){e(a).extraStudyHandler.rateAgain(e(w)),de()}function Se(){e(a).extraStudyHandler.rateGood(e(w)),de()}async function Ne(){e(a).storeAutoGradeLog(e(C).correctStrokeCount,e(C).incorrectStrokeCount,e(j)),e(a).rateCard(f,e(w),e(j)),await e(a).save(),de()}function je(o){v(j,o),v(P,!1)}async function Ye(){e(a).warmUpNext(f,e(w)),await e(a).save(),de()}function He(o,m){const k=e(a).getWarmUpCount(f,o);return k===void 0?!0:k>=e(a).getMaxWarmUpCount()}et(()=>(e(d),ne),()=>{v(i,e(d)===ne.New)}),et(()=>(e(d),ne),()=>{v(n,e(d)===ne.WarmUp)}),Yt(),Vt();var Oe=Ma(),Ue=Pe(Oe);ia(Ue,{get title(){return te},get backUrl(){return`${mt??""}/`}});var c=I(Ue,2),u=y(c);{var X=o=>{var m=za();A(o,m)};O(u,o=>{e(R)&&o(X)})}var ge=I(u,2);{var me=o=>{var m=Fa(),k=Pe(m);Je(k,()=>e(fe),p=>{var G=ut(),J=Pe(G);{var q=V=>{var $=Da(),B=y($),H=y(B);Je(H,()=>e(w),We=>{var ce=Jt();Ce(Te=>ee(ce,Te),[()=>(e(a),W(()=>e(a).extraStudyHandler.getCardsCount()||""))],_e),A(We,ce)}),h(B),h($),A(V,$)},re=V=>{var $=Pa(),B=y($);let H;var We=y(B,!0);h(B);var ce=I(B,2);let Te;var he=y(ce,!0);h(ce);var Ae=I(ce,2);let Le;var Ke=y(Ae,!0);h(Ae);var ie=I(Ae,2);let Re;var ze=y(ie,!0);h(ie),h($),Ce((ue,_t,Ct,wt,pt,yt,bt,kt)=>{H=se(B,1,"deck-count-learn-relearn svelte-1irkfzg",null,H,ue),ee(We,_t),Te=se(ce,1,"deck-count-review svelte-1irkfzg",null,Te,Ct),ee(he,wt),Le=se(Ae,1,"deck-count-new svelte-1irkfzg",null,Le,pt),ee(Ke,yt),Re=se(ie,1,"deck-count-previously-studied svelte-1irkfzg",null,Re,bt),ee(ze,kt)},[()=>({underlined:e(d)===ne.Learning||e(d)===ne.Relearning}),()=>(e(a),W(()=>e(a).getLearningRelearningCardsCount(f)||"")),()=>({underlined:e(d)===ne.ReviewYoung||e(d)===ne.ReviewMature}),()=>(e(a),W(()=>e(a).getScheduledReviewCardsCount(f)||"")),()=>({underlined:e(d)===ne.New}),()=>(e(a),W(()=>e(a).getScheduledNewOrWarmUpCardsCount(f)||"")),()=>({underlined:e(d)===ne.PreviouslyStudied}),()=>(e(a),W(()=>e(a).getScheduledPreviouslyStudiedCardsCount(f)||""))],_e),A(V,$)};O(J,V=>{tt(b()),W(()=>b().isExtraStudy)?V(q):V(re,!1)})}A(p,G)});var Y=I(k,2),K=y(Y);Je(K,()=>[e(w),e(ae),e(L)],p=>{const G=_e(()=>(e(w),W(()=>Ze(e(w))))),J=_e(()=>(e(w),W(()=>Me(e(w)))));Aa(p,{get app(){return e(a)},get characterData(){return e(G)},onComplete:q=>Ge(q),get cardConfig(){return e(J)},get autoGrade(){return e(j)},get isRequestManualGrade(){return e(P)},set isRequestManualGrade(q){v(P,q)},get autoReviewData(){return e(C)},set autoReviewData(q){v(C,q)},$$legacy:!0})}),h(Y);var M=I(Y,2);{var Q=p=>{s(p,()=>[{label:"Ignore",sublabel:"(Don't Learn)",className:"review-button-fail",isComplete:!0,onclick:()=>xe()},{label:""},{label:""},{label:"Learn",className:"review-button-easy",isComplete:!0,onclick:()=>Be()}])},F=(p,G)=>{{var J=re=>{s(re,()=>[{label:""},{label:""},{label:""},{label:"Next",className:"review-button-easy",isComplete:e(l),onclick:()=>Ye()}])},q=(re,V)=>{{var $=H=>{s(H,()=>[{label:"Again",sublabel:"(Put Back)",className:"review-button-fail",isComplete:e(l),onclick:()=>ye()},{label:""},{label:""},{label:"Good",className:"review-button-easy",isComplete:e(l),onclick:()=>Se()}])},B=(H,We)=>{{var ce=he=>{s(he,()=>[{label:""},{label:""},{label:""},{label:"Next",className:"review-button-easy",isComplete:e(l),onclick:()=>Ne()}])},Te=(he,Ae)=>{{var Le=ie=>{var Re=_e(()=>(e(le),e(l),W(()=>Fe.map((ze,ue)=>({label:ze,sublabel:e(le)[ue+1],className:pe(ue+1),isComplete:e(l),onclick:()=>je(ue+1)})))));s(ie,()=>e(Re),()=>"pulsing")},Ke=ie=>{var Re=_e(()=>(e(le),e(l),W(()=>Fe.map((ze,ue)=>({label:ze,sublabel:e(le)[ue+1],className:pe(ue+1),isComplete:e(l),onclick:()=>ke(ue+1)})))));s(ie,()=>e(Re))};O(he,ie=>{e(oe)&&e(P)?ie(Le):ie(Ke,!1)},Ae)}};O(H,he=>{e(oe)&&!e(P)?he(ce):he(Te,!1)},We)}};O(re,H=>{tt(b()),W(()=>b().isExtraStudy)?H($):H(B,!1)},V)}};O(p,re=>{e(n),e(w),e(fe),W(()=>e(n)&&!He(e(w),e(fe)))?re(J):re(q,!1)},G)}};O(M,p=>{e(i)?p(Q):p(F,!1)})}A(o,m)};O(ge,o=>{e(g)&&e(w)!==void 0&&!e(R)&&o(me)})}h(c),A(r,Oe),ct()}ot(["click"]);export{rr as component,ar as universal};
