import"../chunks/CWj6FrbW.js";import"../chunks/BR-jNC44.js";import{ak as sa,p as ia,a9 as w,al as ra,f,a as H,b as u,c as ca,s as v,i as a,j as n,d as i,r as t,t as D,ap as la,e as $,X as oa}from"../chunks/BNrJ_7a3.js";import{i as J}from"../chunks/Dag-yXur.js";import{e as K,i as N}from"../chunks/bkIv8HrQ.js";import{T as va,s as da}from"../chunks/BCvXdneq.js";import{s as na}from"../chunks/DoH2Tnow.js";import{s as pa}from"../chunks/IyXAK3m2.js";import{b as ma}from"../chunks/0VvKN6gX.js";import{i as _a}from"../chunks/1lHFToNQ.js";import{b as ua}from"../chunks/Xv_LnwQ6.js";import{A as fa}from"../chunks/CSGCvJxP.js";import{D as x,l as ka,a as ba}from"../chunks/CMR42ROY.js";import{S as ga}from"../chunks/C1oTPo1k.js";var qa=(y,p,r)=>p(a(r)),ha=f("<option> </option>"),wa=f(`<div class="custom-deck-upload-container svelte-1avq4mc"><a class="button upload-deck-button svelte-1avq4mc"><i class="fa-solid fa-file-import"></i>&nbsp;
                    Upload custom deck</a></div>`),Da=(y,p,r)=>p(a(r).id),$a=f('<div class="deck-card-container svelte-1avq4mc"><div class="deck-card svelte-1avq4mc"><div class="left"><span class="deck-card-title svelte-1avq4mc"> </span> <span class="deck-card-subtitle svelte-1avq4mc"> </span></div> <div class="right svelte-1avq4mc"><span class="deck-card-count svelte-1avq4mc"> </span></div></div> <button title="Add deck" aria-label="Add deck"><i class="fa-solid fa-plus"></i></button></div>'),xa=f('<div class="top-container svelte-1avq4mc"><div class="filter-container"><span class="filter-label">Filter:</span> <select class="filter-select svelte-1avq4mc"><option></option><!></select></div></div> <!> <div class="deck-list-container svelte-1avq4mc"></div>',1),ya=f('<!> <div class="main-container svelte-1avq4mc"><!></div>',1);function Ea(y,p){ia(p,!1);let r=w(new fa),B=new ga,I=w(!1),m=w(""),C=w(x);ra(async()=>{await a(r).init(),L(),await a(r).initProfile()&&L()});async function L(){await O(),n(r,a(r)),n(I,!0)}async function O(){await Promise.allSettled(x.map(async s=>{const o=await ka(s.src??`${s.id}.txt`);o&&B.set(s.id,{cardCount:o.length})}))}async function Q(s){await a(r).addDeckById(s),n(r,a(r))}function R(s){s.trim()?n(C,x.filter(o=>`${o.title} ${o.subtitle}`.toLowerCase().includes(s.toLowerCase()))):n(C,x)}_a();var S=ya(),F=H(S);va(F,{title:"Browse Decks"});var P=v(F,2),V=i(P);{var W=s=>{var o=xa(),k=H(o),T=i(k),b=v(i(T),2);D(()=>{a(m),la(()=>{})}),b.__change=[qa,R,m];var A=i(b);A.value=A.__value="";var Y=v(A);K(Y,1,()=>ba,N,(c,e,d,g)=>{var l=ha(),_=i(l,!0);t(l);var q={};D(()=>{$(_,a(e)),q!==(q=a(e))&&(l.value=(l.__value=a(e))??"")}),u(c,l)}),t(b),t(T),t(k);var j=v(k,2);{var Z=c=>{var e=wa(),d=i(e);t(e),D(()=>da(d,"href",`${ua??""}/upload-custom-deck`)),u(c,e)};J(j,c=>{a(m).trim()===""&&c(Z)})}var U=v(j,2);K(U,5,()=>a(C),N,(c,e)=>{var d=$a(),g=i(d),l=i(g),_=i(l),q=i(_,!0);t(_);var M=v(_,2),aa=i(M,!0);t(M),t(l);var X=v(l,2),z=i(X),ea=i(z);t(z),t(X),t(g);var E=v(g,2);let G;E.__click=[Da,Q,e],t(d),D((h,ta)=>{$(q,a(e).title),pa(M,`--subtitle-color: ${a(e).color??"#00000080"}`),$(aa,a(e).subtitle),$(ea,`${h??""} cards`),G=na(E,1,"deck-add-button svelte-1avq4mc",null,G,ta)},[()=>{var h;return((h=B.get(a(e).id))==null?void 0:h.cardCount)??0},()=>({invisible:a(r).decks.includes(a(e).id)})],oa),u(c,d)}),t(U),ma(b,()=>a(m),c=>n(m,c)),u(s,o)};J(V,s=>{a(I)&&s(W)})}t(P),u(y,S),ca()}sa(["change","click"]);export{Ea as component};
