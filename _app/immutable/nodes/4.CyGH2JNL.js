import"../chunks/CWj6FrbW.js";import{i as E}from"../chunks/CdGgX4fi.js";import{d as F,o as H,s as _}from"../chunks/B4tcad5q.js";import{o as J,q as S,w as k,x as K,z as u,A as N,B as l,g as a,b as h,C as i,D as s,y as O,G as Q}from"../chunks/DCeKAzBs.js";import{i as R}from"../chunks/B_3B16l0.js";import{A as V,T as W,D as q,l as X,e as Y,i as Z}from"../chunks/Bn7_4Cl5.js";import{s as aa}from"../chunks/Be9VuDtp.js";import{b as ea}from"../chunks/x9WDRUdC.js";import{S as sa}from"../chunks/BZY7xF5_.js";var ta=(f,o,e)=>o(a(e).id),ia=k('<div class="deck-card-container svelte-1hah39c"><div class="deck-card svelte-1hah39c"><div class="left"><span class="deck-card-title svelte-1hah39c"> </span> <span class="deck-card-subtitle svelte-1hah39c"> </span></div> <div class="right"><span class="deck-card-count svelte-1hah39c"> </span></div></div> <button title="Add deck" aria-label="Add deck"><i class="fa-solid fa-plus"></i></button></div>'),ca=k('<div class="deck-list-container svelte-1hah39c"></div>'),ra=k('<!> <div class="main-container svelte-1hah39c"><!></div>',1);function ha(f,o){J(o,!1);let e=S(new V),b=new sa,g=S(!1);H(async()=>{await a(e).init(),await T(),h(e,a(e)),h(g,!0)});async function T(){await Promise.allSettled(q.map(async t=>{const c=await X(t.id);c&&b.set(t.id,{cardCount:c.length})}))}async function $(t){await a(e).addDeck(t),h(e,a(e))}E();var D=ra(),w=K(D);W(w,{title:"Browse Decks",get backUrl(){return`${ea??""}/`}});var x=l(w,2),z=i(x);{var G=t=>{var c=ca();Y(c,5,()=>q,Z,(I,r)=>{var n=ia(),v=i(n),p=i(v),m=i(p),L=i(m,!0);s(m);var y=l(m,2),P=i(y,!0);s(y),s(p);var A=l(p,2),M=i(A),U=i(M);s(M),s(A),s(v);var B=l(v,2);let C;B.__click=[ta,$,r],s(n),O((d,j)=>{_(L,a(r).title),_(P,a(r).subtitle),_(U,`${d??""} cards`),C=aa(B,1,"deck-add-button svelte-1hah39c",null,C,j)},[()=>{var d;return((d=b.get(a(r).id))==null?void 0:d.cardCount)??0},()=>({invisible:a(e).decks.includes(a(r).id)})],Q),u(I,n)}),s(c),u(t,c)};R(z,t=>{a(g)&&t(G)})}s(x),u(f,D),N()}F(["click"]);export{ha as component};
