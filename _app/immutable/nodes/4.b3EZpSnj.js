import"../chunks/CWj6FrbW.js";import{i as E}from"../chunks/FKMpitpj.js";import{d as F,o as H,s as _}from"../chunks/Dt-_adpn.js";import{o as J,q as S,w as k,x as K,z as u,A as N,B as l,g as a,b,C as i,D as s,y as O,G as Q}from"../chunks/BcxkuEzu.js";import{i as R}from"../chunks/BjjZRp6G.js";import{A as V,T as W,D as q,l as X,e as Y,i as Z}from"../chunks/CNrBZvUx.js";import{s as aa}from"../chunks/qBx6NAyu.js";import{b as ea}from"../chunks/C_oZnbVB.js";import{S as sa}from"../chunks/_LEEEpab.js";var ta=(f,n,e)=>n(a(e).id),ia=k('<div class="deck-card-container svelte-1yn434b"><div class="deck-card svelte-1yn434b"><div class="left"><span class="deck-card-title svelte-1yn434b"> </span> <span class="deck-card-subtitle svelte-1yn434b"> </span></div> <div class="right"><span class="deck-card-count svelte-1yn434b"> </span></div></div> <button title="Add deck" aria-label="Add deck"><i class="fa-solid fa-plus"></i></button></div>'),ra=k('<div class="deck-list-container svelte-1yn434b"></div>'),da=k('<!> <div class="main-container svelte-1yn434b"><!></div>',1);function ba(f,n){J(n,!1);let e=S(new V),y=new sa,g=S(!1);H(async()=>{await a(e).init(),await T(),b(e,a(e)),b(g,!0)});async function T(){await Promise.allSettled(q.map(async t=>{const r=await X(t.id);r&&y.set(t.id,{cardCount:r.length})}))}async function $(t){await a(e).addDeck(t),b(e,a(e))}E();var D=da(),w=K(D);W(w,{title:"Browse Decks",get backUrl(){return`${ea??""}/`}});var h=l(w,2),z=i(h);{var G=t=>{var r=ra();Y(r,5,()=>q,Z,(I,d)=>{var o=ia(),v=i(o),p=i(v),m=i(p),L=i(m,!0);s(m);var x=l(m,2),P=i(x,!0);s(x),s(p);var A=l(p,2),M=i(A),U=i(M);s(M),s(A),s(v);var B=l(v,2);let C;B.__click=[ta,$,d],s(o),O((c,j)=>{_(L,a(d).title),_(P,a(d).subtitle),_(U,`${c??""} cards`),C=aa(B,1,"deck-add-button svelte-1yn434b",null,C,j)},[()=>{var c;return((c=y.get(a(d).id))==null?void 0:c.cardCount)??0},()=>({invisible:a(e).decks.includes(a(d).id)})],Q),u(I,o)}),s(r),u(t,r)};R(z,t=>{a(g)&&t(G)})}s(h),u(f,D),N()}F(["click"]);export{ba as component};
