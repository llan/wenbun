var St=Object.defineProperty;var xt=(a,t,n)=>t in a?St(a,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[t]=n;var Fe=(a,t,n)=>xt(a,typeof t!="symbol"?t+"":t,n);import"../chunks/CWj6FrbW.js";import"../chunks/CHpnjp_b.js";import{a as Tt,d as ot,o as lt,s as re}from"../chunks/3DT1RaQV.js";import{P as Rt,R as At,a$ as Et,b0 as It,l as Gt,H as D,b1 as Ut,b2 as Wt,b3 as Nt,b4 as Dt,as as Ft,a1 as Ie,p as ct,e as be,a8 as Pt,i as c,f as F,d as C,r as g,s as A,h as e,t as Ce,b as R,c as dt,a as Pe,aj as ut,_ as W,$ as et,a0 as Ht,b5 as Mt,J as tt,a4 as Lt,a2 as we,b6 as Ot}from"../chunks/CvbXAzr3.js";import{i as z}from"../chunks/C7DlhgQh.js";import{k as Xe}from"../chunks/CTLxQKwk.js";import{e as vt,i as ft,c as zt}from"../chunks/CeWMhBIq.js";import{s as ce}from"../chunks/DP3PND5f.js";import{w as mt}from"../chunks/CFSoqRvR.js";import{i as qt}from"../chunks/7MZX7QCZ.js";import{p as Qe}from"../chunks/CWd2qMjO.js";import{b as gt}from"../chunks/Cq2_jRpj.js";import{l as x,A as Bt,W as le}from"../chunks/GI3Q6ud1.js";import{s as N,T as jt}from"../chunks/DT6wTx3i.js";import{s as Yt}from"../chunks/8xkcVM4Q.js";import{H as Zt}from"../chunks/DcL13wi7.js";import{b as Jt,g as Kt,T as at,p as Xt,c as rt,C as Qt}from"../chunks/3UKrroMZ.js";const Vt=()=>performance.now(),fe={tick:a=>requestAnimationFrame(a),now:()=>Vt(),tasks:new Set};function ht(){const a=fe.now();fe.tasks.forEach(t=>{t.c(a)||(fe.tasks.delete(t),t.f())}),fe.tasks.size!==0&&fe.tick(ht)}function $t(a){let t;return fe.tasks.size===0&&fe.tick(ht),{promise:new Promise(n=>{fe.tasks.add(t={c:a,f:n})}),abort(){fe.tasks.delete(t)}}}function qe(a,t){mt(()=>{a.dispatchEvent(new CustomEvent(t))})}function ea(a){if(a==="float")return"cssFloat";if(a==="offset")return"cssOffset";if(a.startsWith("--"))return a;const t=a.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(n=>n[0].toUpperCase()+n.slice(1)).join("")}function nt(a){const t={},n=a.split(";");for(const i of n){const[l,S]=i.split(":");if(!l||S===void 0)break;const E=ea(l.trim());t[E]=S.trim()}return t}const ta=a=>a;function it(a,t,n,i){var l=(a&Wt)!==0,S=(a&Nt)!==0,E=l&&S,b=(a&Ut)!==0,v=E?"both":l?"in":"out",P,T=t.inert,ne=t.style.overflow,p,_;function r(){return mt(()=>P??(P=n()(t,(i==null?void 0:i())??{},{direction:v})))}var s={is_global:b,in(){var f;if(t.inert=T,!l){_==null||_.abort(),(f=_==null?void 0:_.reset)==null||f.call(_);return}S||p==null||p.abort(),qe(t,"introstart"),p=Ve(t,r(),_,1,()=>{qe(t,"introend"),p==null||p.abort(),p=P=void 0,t.style.overflow=ne})},out(f){if(!S){f==null||f(),P=void 0;return}t.inert=!0,qe(t,"outrostart"),_=Ve(t,r(),p,0,()=>{qe(t,"outroend"),f==null||f()})},stop:()=>{p==null||p.abort(),_==null||_.abort()}},w=Rt;if((w.transitions??(w.transitions=[])).push(s),l&&Tt){var q=b;if(!q){for(var I=w.parent;I&&(I.f&At)!==0;)for(;(I=I.parent)&&(I.f&Et)===0;);q=!I||(I.f&It)!==0}q&&Gt(()=>{D(()=>s.in())})}}function Ve(a,t,n,i,l){var S=i===1;if(Dt(t)){var E,b=!1;return Ft(()=>{if(!b){var w=t({direction:S?"in":"out"});E=Ve(a,w,n,i,l)}}),{abort:()=>{b=!0,E==null||E.abort()},deactivate:()=>E.deactivate(),reset:()=>E.reset(),t:()=>E.t()}}if(n==null||n.deactivate(),!(t!=null&&t.duration))return l(),{abort:Ie,deactivate:Ie,reset:Ie,t:()=>i};const{delay:v=0,css:P,tick:T,easing:ne=ta}=t;var p=[];if(S&&n===void 0&&(T&&T(0,1),P)){var _=nt(P(0,1));p.push(_,_)}var r=()=>1-i,s=a.animate(p,{duration:v,fill:"forwards"});return s.onfinish=()=>{s.cancel();var w=(n==null?void 0:n.t())??1-i;n==null||n.abort();var q=i-w,I=t.duration*Math.abs(q),f=[];if(I>0){var G=!1;if(P)for(var de=Math.ceil(I/16.666666666666668),ie=0;ie<=de;ie+=1){var X=w+q*ne(ie/de),Q=nt(P(X,1-X));f.push(Q),G||(G=Q.overflow==="hidden")}G&&(a.style.overflow="hidden"),r=()=>{var M=s.currentTime;return w+q*ne(M/I)},T&&$t(()=>{if(s.playState!=="running")return!1;var M=r();return T(M,1-M),!0})}s=a.animate(f,{duration:I,fill:"forwards"}),s.onfinish=()=>{r=()=>i,T==null||T(i,1-i),l()}},{abort:()=>{s&&(s.cancel(),s.effect=null,s.onfinish=Ie)},deactivate:()=>{l=Ie},reset:()=>{i===0&&(T==null||T(1,0))},t:()=>r()}}const aa=({url:a})=>({deckId:a.searchParams.get("id")||"",isExtraStudy:a.searchParams.get("isExtraStudy")==="true",cardIds:a.searchParams.get("cardIds")||encodeURIComponent("[]")}),Ka=Object.freeze(Object.defineProperty({__proto__:null,load:aa},Symbol.toStringTag,{value:"Module"}));class ra{constructor(t,n=!0){Fe(this,"audios");Fe(this,"currentIndex",0);Fe(this,"isPlaying",!1);Fe(this,"onEnded",this.handleEnded.bind(this));this.audios=t.map(i=>{const l=new Audio(i);return l.preload="auto",n&&l.load(),l})}handleEnded(){this.audios[this.currentIndex].removeEventListener("ended",this.onEnded),this.currentIndex++,this.currentIndex<this.audios.length?this.playCurrent():(this.isPlaying=!1,this.currentIndex=0)}playCurrent(){const t=this.audios[this.currentIndex];t.addEventListener("ended",this.onEnded),t.currentTime=0,t.play().catch(n=>{console.warn("Playback failed:",n),this.stop()})}play(){this.audios.length!==0&&(this.isPlaying&&this.stop(),this.isPlaying=!0,this.currentIndex=0,this.playCurrent())}stop(){if(!this.isPlaying)return;this.isPlaying=!1;const t=this.audios[this.currentIndex];t.pause(),t.currentTime=0,t.removeEventListener("ended",this.onEnded),this.currentIndex=0}}const na={[x.Again]:"Fail",[x.Hard]:"Hard",[x.Good]:"Good",[x.Easy]:"Easy"},ia={[x.Again]:"again",[x.Hard]:"hard",[x.Good]:"good",[x.Easy]:"easy"},sa={[x.Again]:"fa fa-solid fa-face-frown",[x.Hard]:"fa fa-solid fa-face-meh",[x.Good]:"fa fa-solid fa-face-smile",[x.Easy]:"fa fa-solid fa-star"};var $e;(a=>{function t(i){const l=i.correctStrokeCount===0?1/0:i.incorrectStrokeCount/i.correctStrokeCount;return l<.25||i.incorrectStrokeCount<=2?x.Good:l<.75||i.incorrectStrokeCount<=4?x.Hard:x.Again}a.getGrade=t;function n(i){switch(i){case x.Again:return"Again";case x.Hard:return"Hard";case x.Good:return"Good";default:return"Unknown"}}a.gradeToLabel=n})($e||($e={}));var oa=(a,t)=>t(),la=F('<button class="audio-button svelte-4rg8" aria-label="Play Audio"><i class="fa-solid fa-volume-low svelte-4rg8"></i></button>'),ca=F('<div class="new-element-indicator svelte-4rg8">New Card</div>'),da=F("<div>Warm Up</div>"),ua=F('<div class="new-element-indicator is-hidden svelte-4rg8"></div>'),va=F('<span class="svelte-4rg8"> </span>'),fa=F('<span class="empty-character-box svelte-4rg8">&#x3000;</span>'),ma=F('<!> <div class="character-box-container chinese-font svelte-4rg8"></div>',1),ga=(a,t)=>t(),ha=F('<button><i></i> <span class="svelte-4rg8"> </span></button>'),_a=F('<div class="character-writer svelte-4rg8"><div class="meaning svelte-4rg8"> </div> <div><div class="reading svelte-4rg8"> </div> <!></div> <div class="character-container svelte-4rg8"><div class="grid-background svelte-4rg8"><svg xmlns="http://www.w3.org/2000/svg" id="grid-background-target" class="svelte-4rg8"><line x1="0" y1="0" class="svelte-4rg8"></line><line y1="0" x2="0" class="svelte-4rg8"></line><line y1="0" class="svelte-4rg8"></line><line x1="0" class="svelte-4rg8"></line></svg></div> <div class="bottom-container svelte-4rg8"><!></div> <!></div></div>');function wa(a,t){var We;ct(t,!0);let n=be(500),i=be(500),l="#DDD";const S=500,E=new Audio(`${gt}/assets/sounds/correct-choice-43861.mp3`);let b=be(Pt([])),v=be(!1),P=be(!1),T=be(!1);function ne(){return parseFloat(getComputedStyle(document.body).fontSize)}function p(){return parseFloat(getComputedStyle(document.body).fontSize)/parseFloat(getComputedStyle(document.documentElement).fontSize)}function _(){const d=ne()*3*2;c(n,Math.min(document.documentElement.clientWidth-d,500)*p()),c(i,e(n),!0)}let r=Qe(t,"isRequestManualGrade",15),s=Qe(t,"autoReviewData",15),w=be(0),q=(We=t.characterData)==null?void 0:We.meanings.join("; ");function I(d){for(const u of d)if(u.startsWith(at))return Xt(u.substring(at.length))}function f(){var d;c(P,!0),!e(T)&&(t.cardConfig.isFirstTime?(c(w,(e(w)+1)%t.characterData.characters.length),window.setTimeout(()=>{de(e(w))},S)):(E.play(),c(w,e(w)+1),e(w)==((d=t.characterData)==null?void 0:d.characters.length)?(t.onComplete({...s()}),c(v,!0),window.setTimeout(()=>{X()},S)):window.setTimeout(()=>{de(e(w))},S)))}let G;function de(d){if(e(T)||!t.characterData)return;G&&(t.cardConfig.isFirstTime||G.cancelQuiz(),G.hideCharacter(),G.hideOutline());const u=I(t.characterData.tags[d]??[]);G=Zt.create("grid-background-target",t.characterData.characters[d],{width:e(n),height:e(i),padding:5,showCharacter:!1,showOutline:t.cardConfig.isShowOutline,highlightOnComplete:!1,strokeColor:t.app.getChineseToneColor(u)??"#555",drawingWidth:Jt,drawingColor:"#555",onComplete:()=>{f()}}),t.cardConfig.isFirstTime?(setTimeout(()=>{e(P)||X()},S),setTimeout(()=>{G.animateCharacter({onComplete:()=>{setTimeout(()=>{G.hideOutline(),G.hideCharacter(),f()},S)}})},S)):G.quiz({leniency:t.app.getConfig().strokeLeniency,onMistake:()=>{s(s().incorrectStrokeCount++,!0),s(s().totalStrokeCount++,!0)},onCorrectStroke:()=>{s(s().correctStrokeCount++,!0),s(s().totalStrokeCount++,!0)}})}function ie(){var u;const d=(u=t.characterData)==null?void 0:u.audioUrl;d&&c(b,d.map($=>{const ge=$.map(he=>Kt(t.cardConfig.lang,he));return new ra(ge)}),!0)}function X(){const d=Math.floor(Math.random()*e(b).length),u=e(b)[d];u.stop(),u.play()}function Q(){if(t.cardConfig.isWarmUp){window.alert("Can't change grade during warm-up, since grading doesn't affect scheduling in this phase.");return}r(!r())}function M(d=0){const u=t.cardConfig.warmUpCount??0,$=t.cardConfig.warmUpMaxCount;return`${Math.round((u+d)/$*100)}%`}lt(()=>(s({correctStrokeCount:0,incorrectStrokeCount:0,totalStrokeCount:0}),_(),ie(),window.addEventListener("resize",_),de(0),()=>{c(T,!0),window.removeEventListener("resize",_)}));var me=_a(),ke=C(me),y=C(ke,!0);g(ke);var V=A(ke,2);let He;var Y=C(V),Be=C(Y,!0);g(Y);var je=A(Y,2);{var Ye=d=>{var u=la();u.__click=[oa,X],R(d,u)};z(je,d=>{e(b).length>0&&d(Ye)})}g(V);var Me=A(V,2),Ge=C(Me),Se=C(Ge),pe=C(Se);N(pe,"stroke",l);var xe=A(pe);N(xe,"stroke",l);var ye=A(xe);N(ye,"stroke",l);var Te=A(ye);N(Te,"stroke",l),g(Se),g(Ge);var Ue=A(Ge,2),Ze=C(Ue);{var Je=d=>{var u=ma(),$=Pe(u);{var ge=m=>{var k=ca();R(m,k)},he=(m,k)=>{{var Z=L=>{var ee=da();let H,h;Ce((U,K)=>{H=ce(ee,1,"new-element-indicator svelte-4rg8",null,H,U),h=Yt(ee,"",h,K)},[()=>({"is-complete":e(v)}),()=>({"--progress":M(),"--next-progress":M(1)})]),R(L,ee)},J=L=>{var ee=ua();R(L,ee)};z(m,L=>{t.cardConfig.isWarmUp?L(Z):L(J,!1)},k)}};z($,m=>{t.cardConfig.isFirstTime?m(ge):m(he,!1)})}var o=A($,2);vt(o,21,()=>t.characterData.characters,ft,(m,k,Z)=>{var J=ut(),L=Pe(J);{var ee=h=>{var U=va(),K=C(U,!0);g(U),Ce(()=>re(K,e(k))),R(h,U)},H=h=>{var U=fa();R(h,U)};z(L,h=>{Z<e(w)||t.cardConfig.isFirstTime?h(ee):h(H,!1)})}R(m,J)}),g(o),R(d,u)};z(Ze,d=>{var u;(u=t.characterData)!=null&&u.characters&&d(Je)})}g(Ue);var Le=A(Ue,2);{var Oe=d=>{var u=ha();let $;u.__click=[ga,Q];var ge=C(u),he=A(ge,2),o=C(he,!0);g(he),g(u),Ce(m=>{$=ce(u,1,`auto-review-indicator-container ${ia[t.autoGrade]}`,"svelte-4rg8",$,m),ce(ge,1,zt(sa[t.autoGrade]),"svelte-4rg8"),re(o,na[t.autoGrade])},[()=>({blinking:r(),animated:r(),"echo-once":!r()})]),R(d,u)};z(Le,d=>{t.autoGrade&&d(Oe)})}g(Me),g(me),Ce(d=>{var u;re(y,q),He=ce(V,1,"reading-container svelte-4rg8",null,He,d),re(Be,(u=t.characterData)==null?void 0:u.reading),N(Se,"width",e(n)),N(Se,"height",e(i)),N(pe,"x2",e(n)),N(pe,"y2",e(i)),N(xe,"x1",e(n)),N(xe,"y2",e(i)),N(ye,"x1",e(n)/2),N(ye,"x2",e(n)/2),N(ye,"y2",e(i)),N(Te,"y1",e(i)/2),N(Te,"x2",e(n)),N(Te,"y2",e(i)/2)},[()=>({"is-hidden":!t.app.getConfig().zh.alwaysShowReading&&!e(v)&&!t.cardConfig.isFirstTime})]),R(a,me),dt()}ot(["click"]);const Ca=a=>a;function pa(a){const t=a-1;return t*t*t+1}function st(a){const t=typeof a=="string"&&a.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[a,"px"]}function ya(a,{delay:t=0,duration:n=400,easing:i=Ca}={}){const l=+getComputedStyle(a).opacity;return{delay:t,duration:n,easing:i,css:S=>`opacity: ${S*l}`}}function ba(a,{delay:t=0,duration:n=400,easing:i=pa,x:l=0,y:S=0,opacity:E=0}={}){const b=getComputedStyle(a),v=+b.opacity,P=b.transform==="none"?"":b.transform,T=v*(1-E),[ne,p]=st(l),[_,r]=st(S);return{delay:t,duration:n,easing:i,css:(s,w)=>`
			transform: ${P} translate(${(1-s)*ne}${p}, ${(1-s)*_}${r});
			opacity: ${v-T*w}`}}function ka(a){const t=a-1;return t*t*t+1}var Sa=F('<button><div class="review-button-inner svelte-9hsnmw"><div class="review-time svelte-9hsnmw"> </div> <div class="review-label svelte-9hsnmw"> </div></div></button>'),xa=F('<div class="bottom-container svelte-9hsnmw"><div></div></div>'),Ta=F(`<div class="svelte-9hsnmw">You have done today's review.</div>`),Ra=F('<div class="counter svelte-9hsnmw"><span class="underlined svelte-9hsnmw"><!></span></div>'),Aa=F('<div class="counter svelte-9hsnmw"><span> </span> <span> </span> <span> </span> <span> </span></div>'),Ea=F('<!> <div class="character-writer-container svelte-9hsnmw"><!></div> <!>',1),Ia=F('<!> <div class="container svelte-9hsnmw"><!> <!></div>',1);function Xa(a,t){ct(t,!1);const n=W(),i=W(),l=(o,m=Ie,k)=>{let Z=we(()=>Ot(k==null?void 0:k(),""));var J=xa(),L=C(J);vt(L,5,m,ft,(ee,H)=>{var h=Sa();let U;h.__click=function(...j){var O;(O=e(H).onclick)==null||O.apply(this,j)};var K=C(h),B=C(K),se=C(B,!0);g(B);var te=A(B,2),ae=C(te,!0);g(te),g(K),g(h),Ce(j=>{U=ce(h,1,(e(H),D(()=>`review-button ${e(H).className||""}`)),"svelte-9hsnmw",U,j),re(se,(e(H),D(()=>e(H).sublabel||" "))),re(ae,(e(H),D(()=>e(H).label||" ")))},[()=>({"is-complete":e(H).isComplete})],we),R(ee,h)}),g(L),g(J),Ce(()=>ce(L,1,`review-button-container ${e(Z)}`,"svelte-9hsnmw")),it(1,J,()=>ba,()=>S),it(2,J,()=>ya,()=>E),R(o,J)},S={delay:100,y:-100,duration:300,easing:ka},E={duration:200};let b=Qe(t,"data",8),v=b().deckId||"",P=b().cardIds||encodeURIComponent("[]"),T=JSON.parse(decodeURIComponent(P)),ne=b().isExtraStudy?"Extra Study":"Review",p=W(),_=W(!1),r=W(new Bt);lt(async()=>{var o,m,k,Z;await e(r).init(),ie=(m=(o=e(r).deckData[v])==null?void 0:o.tags)==null?void 0:m.includes(rt.ZH_YUE),await I.init(ie?"yue":"zh"),c(r,e(r)),de=(Z=(k=e(r).deckData[v])==null?void 0:k.tags)==null?void 0:Z.includes(rt.ZH_TRAD),c(X,e(r).isAutoGrading()),c(_,!0),b().isExtraStudy&&e(r).extraStudyHandler.registerReviewCardIdsOverride(T),Y()});let s=W(!1),w=W(!1),q=W(!1),I=new Qt,f=W(void 0),G=W(!1),de=!1,ie=!1,X=W(!1),Q=W(void 0),M=W(!1),me=W(0);const ke=["Fail","Hard","Good","Easy"];let y=W(void 0),V=W({1:"",2:"",3:"",4:""});function He(){c(s,!1),c(G,!1),c(Q,void 0),c(M,!1)}function Y(){He(),c(q,!0);const o=e(r).getNextCard(v);if(o===void 0){c(w,!0);return}e(r).getCard(v,o,!0)&&(c(q,!1),c(y,o),c(V,e(r).getRatingScheduledTimeStr(v,o)),c(f,e(r).getWenbunCustomState(v,o)),Mt(me))}function Be(){e(r).startWarmUp(v,e(y)),c(G,!0),c(y,e(y)),c(V,e(r).getRatingScheduledTimeStr(v,e(y))),c(f,e(r).getWenbunCustomState(v,e(y)))}function je(){e(r).skipWarmUp(v,e(y)),c(G,!0),Y()}function Ye(o){const m=e(r).getCardWord(v,o),k=e(r).getConfig();return I.getCharacterWriterData(m,{convertToTraditional:de,mandarinReading:k.zh.mandarinReading,isCantonese:ie,isPlayAudio:k.zh.playAudio})}function Me(o){const m=e(r).getWarmUpCount(v,o),k=e(i)&&m===0;return{isFirstTime:e(n),isWarmUp:e(i)&&!Le(o),warmUpCount:m,warmUpMaxCount:e(r).getMaxWarmUpCount(),isShowOutline:e(n)||k,lang:ie?"yue":"zh"}}function Ge(o){c(s,!0),e(X)&&c(Q,$e.getGrade(o))}async function Se(o){e(r).rateCard(v,e(y),o),await e(r).save(),Y()}function pe(o){switch(o){case x.Easy:return"review-button-easy";case x.Good:return"review-button-good";case x.Hard:return"review-button-hard";case x.Again:return"review-button-fail"}}async function xe(){e(r).addIgnoredMark(v,e(y)),await e(r).save(),Y()}function ye(){e(r).extraStudyHandler.rateAgain(e(y)),Y()}function Te(){e(r).extraStudyHandler.rateGood(e(y)),Y()}async function Ue(){e(r).storeAutoGradeLog(e(p).correctStrokeCount,e(p).incorrectStrokeCount,e(Q)),e(r).rateCard(v,e(y),e(Q)),await e(r).save(),Y()}function Ze(o){c(Q,o),c(M,!1)}async function Je(){e(r).warmUpNext(v,e(y)),await e(r).save(),Y()}function Le(o,m){const k=e(r).getWarmUpCount(v,o);return k===void 0?!0:k>=e(r).getMaxWarmUpCount()}et(()=>(e(f),le),()=>{c(n,e(f)===le.New)}),et(()=>(e(f),le),()=>{c(i,e(f)===le.WarmUp)}),Ht(),qt();var Oe=Ia(),We=Pe(Oe);jt(We,{get title(){return ne},get backUrl(){return`${gt??""}/`}});var d=A(We,2),u=C(d);{var $=o=>{var m=Ta();R(o,m)};z(u,o=>{e(w)&&o($)})}var ge=A(u,2);{var he=o=>{var m=Ea(),k=Pe(m);Xe(k,()=>e(me),h=>{var U=ut(),K=Pe(U);{var B=te=>{var ae=Ra(),j=C(ae),O=C(j);Xe(O,()=>e(y),Ne=>{var ue=Lt();Ce(Re=>re(ue,Re),[()=>(e(r),D(()=>e(r).extraStudyHandler.getCardsCount()||""))],we),R(Ne,ue)}),g(j),g(ae),R(te,ae)},se=te=>{var ae=Aa(),j=C(ae);let O;var Ne=C(j,!0);g(j);var ue=A(j,2);let Re;var _e=C(ue,!0);g(ue);var Ae=A(ue,2);let ze;var Ke=C(Ae,!0);g(Ae);var oe=A(Ae,2);let Ee;var De=C(oe,!0);g(oe),g(ae),Ce((ve,_t,wt,Ct,pt,yt,bt,kt)=>{O=ce(j,1,"deck-count-learn-relearn svelte-9hsnmw",null,O,ve),re(Ne,_t),Re=ce(ue,1,"deck-count-review svelte-9hsnmw",null,Re,wt),re(_e,Ct),ze=ce(Ae,1,"deck-count-new svelte-9hsnmw",null,ze,pt),re(Ke,yt),Ee=ce(oe,1,"deck-count-previously-studied svelte-9hsnmw",null,Ee,bt),re(De,kt)},[()=>({underlined:e(f)===le.Learning||e(f)===le.Relearning}),()=>(e(r),D(()=>e(r).getLearningRelearningCardsCount(v)||"")),()=>({underlined:e(f)===le.ReviewYoung||e(f)===le.ReviewMature}),()=>(e(r),D(()=>e(r).getScheduledReviewCardsCount(v)||"")),()=>({underlined:e(f)===le.New}),()=>(e(r),D(()=>e(r).getScheduledNewOrWarmUpCardsCount(v)||"")),()=>({underlined:e(f)===le.PreviouslyStudied}),()=>(e(r),D(()=>e(r).getScheduledPreviouslyStudiedCardsCount(v)||""))],we),R(te,ae)};z(K,te=>{tt(b()),D(()=>b().isExtraStudy)?te(B):te(se,!1)})}R(h,U)});var Z=A(k,2),J=C(Z);Xe(J,()=>[e(y),e(G),e(q)],h=>{const U=we(()=>(e(y),D(()=>Ye(e(y))))),K=we(()=>(e(y),D(()=>Me(e(y)))));wa(h,{get app(){return e(r)},get characterData(){return e(U)},onComplete:B=>Ge(B),get cardConfig(){return e(K)},get autoGrade(){return e(Q)},get isRequestManualGrade(){return e(M)},set isRequestManualGrade(B){c(M,B)},get autoReviewData(){return e(p)},set autoReviewData(B){c(p,B)},$$legacy:!0})}),g(Z);var L=A(Z,2);{var ee=h=>{l(h,()=>[{label:"Ignore",sublabel:"(Don't Learn)",className:"review-button-fail",isComplete:!0,onclick:()=>xe()},{label:"Learn*",sublabel:"(Skip Warm-Up)",className:"review-button-hard",isComplete:!0,onclick:()=>je()},{label:""},{label:"Learn",className:"review-button-easy main-button",isComplete:!0,onclick:()=>Be()}])},H=(h,U)=>{{var K=se=>{l(se,()=>[{label:""},{label:""},{label:""},{label:"Next",className:"review-button-easy",isComplete:e(s),onclick:()=>Je()}])},B=(se,te)=>{{var ae=O=>{l(O,()=>[{label:"Again",sublabel:"(Put Back)",className:"review-button-fail",isComplete:e(s),onclick:()=>ye()},{label:""},{label:""},{label:"Good",className:"review-button-easy",isComplete:e(s),onclick:()=>Te()}])},j=(O,Ne)=>{{var ue=_e=>{l(_e,()=>[{label:""},{label:""},{label:""},{label:"Next",className:"review-button-easy",isComplete:e(s),onclick:()=>Ue()}])},Re=(_e,Ae)=>{{var ze=oe=>{var Ee=we(()=>(e(V),e(s),D(()=>ke.map((De,ve)=>({label:De,sublabel:e(V)[ve+1],className:pe(ve+1)+" time",isComplete:e(s),onclick:()=>Ze(ve+1)})))));l(oe,()=>e(Ee),()=>"pulsing")},Ke=oe=>{var Ee=we(()=>(e(V),e(s),D(()=>ke.map((De,ve)=>({label:De,sublabel:e(V)[ve+1],className:pe(ve+1)+" time",isComplete:e(s),onclick:()=>Se(ve+1)})))));l(oe,()=>e(Ee))};z(_e,oe=>{e(X)&&e(M)?oe(ze):oe(Ke,!1)},Ae)}};z(O,_e=>{e(X)&&!e(M)?_e(ue):_e(Re,!1)},Ne)}};z(se,O=>{tt(b()),D(()=>b().isExtraStudy)?O(ae):O(j,!1)},te)}};z(h,se=>{e(i),e(y),e(me),D(()=>e(i)&&!Le(e(y),e(me)))?se(K):se(B,!1)},U)}};z(L,h=>{e(n)?h(ee):h(H,!1)})}R(o,m)};z(ge,o=>{e(_)&&e(y)!==void 0&&!e(w)&&o(he)})}g(d),R(a,Oe),dt()}ot(["click"]);export{Xa as component,Ka as universal};
