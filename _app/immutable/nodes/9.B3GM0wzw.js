var xt=Object.defineProperty;var St=(r,t,i)=>t in r?xt(r,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):r[t]=i;var Fe=(r,t,i)=>St(r,typeof t!="symbol"?t+"":t,i);import"../chunks/CWj6FrbW.js";import"../chunks/e1y9C63k.js";import{a as Tt,d as ot,o as lt,s as $}from"../chunks/BzFAuoMn.js";import{S as Rt,ag as At,a$ as Et,b0 as It,l as Gt,a7 as z,b1 as Ut,b2 as Wt,b3 as Nt,b4 as zt,R as Dt,ak as Ie,p as ct,e as be,aq as Ft,i as d,f as D,d as C,r as h,s as I,h as e,t as Ce,b as R,c as dt,a as Pe,aB as ut,X as W,ai as et,aj as Pt,b5 as Ht,a9 as tt,am as Mt,H as _e,b6 as Ot}from"../chunks/BqfnsoT0.js";import{i as M}from"../chunks/SbZFkT06.js";import{k as Je}from"../chunks/us5HtNb4.js";import{e as vt,i as ft}from"../chunks/4L0NknSj.js";import{s as ne,c as Lt}from"../chunks/D7BTPPfp.js";import{w as gt}from"../chunks/CKhbLRRt.js";import{i as qt}from"../chunks/BEabaf4r.js";import{p as Qe}from"../chunks/8f3Y1WCl.js";import{b as mt}from"../chunks/0thJK1pv.js";import{l as k,A as Bt,W as ie}from"../chunks/31fOCuSw.js";import{s as N,T as jt}from"../chunks/B7pZ-LzU.js";import{s as Yt}from"../chunks/CLA87fU9.js";import{H as Zt}from"../chunks/DcL13wi7.js";import{b as Xt,g as Kt,T as at,p as Jt,c as rt,C as Qt}from"../chunks/BwjUfq8s.js";const Vt=()=>performance.now(),de={tick:r=>requestAnimationFrame(r),now:()=>Vt(),tasks:new Set};function ht(){const r=de.now();de.tasks.forEach(t=>{t.c(r)||(de.tasks.delete(t),t.f())}),de.tasks.size!==0&&de.tick(ht)}function $t(r){let t;return de.tasks.size===0&&de.tick(ht),{promise:new Promise(i=>{de.tasks.add(t={c:r,f:i})}),abort(){de.tasks.delete(t)}}}function qe(r,t){gt(()=>{r.dispatchEvent(new CustomEvent(t))})}function ea(r){if(r==="float")return"cssFloat";if(r==="offset")return"cssOffset";if(r.startsWith("--"))return r;const t=r.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(i=>i[0].toUpperCase()+i.slice(1)).join("")}function it(r){const t={},i=r.split(";");for(const n of i){const[l,y]=n.split(":");if(!l||y===void 0)break;const G=ea(l.trim());t[G]=y.trim()}return t}const ta=r=>r;function nt(r,t,i,n){var l=(r&Wt)!==0,y=(r&Nt)!==0,G=l&&y,w=(r&Ut)!==0,f=G?"both":l?"in":"out",F,S=t.inert,ee=t.style.overflow,_,g;function a(){return gt(()=>F??(F=i()(t,(n==null?void 0:n())??{},{direction:f})))}var o={is_global:w,in(){var c;if(t.inert=S,!l){g==null||g.abort(),(c=g==null?void 0:g.reset)==null||c.call(g);return}y||_==null||_.abort(),qe(t,"introstart"),_=Ve(t,a(),g,1,()=>{qe(t,"introend"),_==null||_.abort(),_=F=void 0,t.style.overflow=ee})},out(c){if(!y){c==null||c(),F=void 0;return}t.inert=!0,qe(t,"outrostart"),g=Ve(t,a(),_,0,()=>{qe(t,"outroend"),c==null||c()})},stop:()=>{_==null||_.abort(),g==null||g.abort()}},A=Rt;if((A.transitions??(A.transitions=[])).push(o),l&&Tt){var O=w;if(!O){for(var E=A.parent;E&&(E.f&At)!==0;)for(;(E=E.parent)&&(E.f&Et)===0;);O=!E||(E.f&It)!==0}O&&Gt(()=>{z(()=>o.in())})}}function Ve(r,t,i,n,l){var y=n===1;if(zt(t)){var G,w=!1;return Dt(()=>{if(!w){var A=t({direction:y?"in":"out"});G=Ve(r,A,i,n,l)}}),{abort:()=>{w=!0,G==null||G.abort()},deactivate:()=>G.deactivate(),reset:()=>G.reset(),t:()=>G.t()}}if(i==null||i.deactivate(),!(t!=null&&t.duration))return l(),{abort:Ie,deactivate:Ie,reset:Ie,t:()=>n};const{delay:f=0,css:F,tick:S,easing:ee=ta}=t;var _=[];if(y&&i===void 0&&(S&&S(0,1),F)){var g=it(F(0,1));_.push(g,g)}var a=()=>1-n,o=r.animate(_,{duration:f,fill:"forwards"});return o.onfinish=()=>{o.cancel();var A=(i==null?void 0:i.t())??1-n;i==null||i.abort();var O=n-A,E=t.duration*Math.abs(O),c=[];if(E>0){var J=!1;if(F)for(var pe=Math.ceil(E/16.666666666666668),Z=0;Z<=pe;Z+=1){var se=A+O*ee(Z/pe),X=it(F(se,1-se));c.push(X),J||(J=X.overflow==="hidden")}J&&(r.style.overflow="hidden"),a=()=>{var P=o.currentTime;return A+O*ee(P/E)},S&&$t(()=>{if(o.playState!=="running")return!1;var P=a();return S(P,1-P),!0})}o=r.animate(c,{duration:E,fill:"forwards"}),o.onfinish=()=>{a=()=>n,S==null||S(n,1-n),l()}},{abort:()=>{o&&(o.cancel(),o.effect=null,o.onfinish=Ie)},deactivate:()=>{l=Ie},reset:()=>{n===0&&(S==null||S(1,0))},t:()=>a()}}const aa=({url:r})=>({deckId:r.searchParams.get("id")||"",isExtraStudy:r.searchParams.get("isExtraStudy")==="true",cardIds:r.searchParams.get("cardIds")||encodeURIComponent("[]")}),Ka=Object.freeze(Object.defineProperty({__proto__:null,load:aa},Symbol.toStringTag,{value:"Module"}));class ra{constructor(t,i=!0){Fe(this,"audios");Fe(this,"currentIndex",0);Fe(this,"isPlaying",!1);Fe(this,"onEnded",this.handleEnded.bind(this));this.audios=t.map(n=>{const l=new Audio(n);return l.preload="auto",i&&l.load(),l})}handleEnded(){this.audios[this.currentIndex].removeEventListener("ended",this.onEnded),this.currentIndex++,this.currentIndex<this.audios.length?this.playCurrent():(this.isPlaying=!1,this.currentIndex=0)}playCurrent(){const t=this.audios[this.currentIndex];t.addEventListener("ended",this.onEnded),t.currentTime=0,t.play().catch(i=>{console.warn("Playback failed:",i),this.stop()})}play(){this.audios.length!==0&&(this.isPlaying&&this.stop(),this.isPlaying=!0,this.currentIndex=0,this.playCurrent())}stop(){if(!this.isPlaying)return;this.isPlaying=!1;const t=this.audios[this.currentIndex];t.pause(),t.currentTime=0,t.removeEventListener("ended",this.onEnded),this.currentIndex=0}}const ia={[k.Again]:"Fail",[k.Hard]:"Hard",[k.Good]:"Good",[k.Easy]:"Easy"},na={[k.Again]:"again",[k.Hard]:"hard",[k.Good]:"good",[k.Easy]:"easy"},sa={[k.Again]:"fa fa-solid fa-face-frown",[k.Hard]:"fa fa-solid fa-face-meh",[k.Good]:"fa fa-solid fa-face-smile",[k.Easy]:"fa fa-solid fa-star"};var $e;(r=>{function t(n){const l=n.correctStrokeCount===0?1/0:n.incorrectStrokeCount/n.correctStrokeCount;return l<.25||n.incorrectStrokeCount<=2?k.Good:l<.75||n.incorrectStrokeCount<=4?k.Hard:k.Again}r.getGrade=t;function i(n){switch(n){case k.Again:return"Again";case k.Hard:return"Hard";case k.Good:return"Good";default:return"Unknown"}}r.gradeToLabel=i})($e||($e={}));var oa=(r,t)=>t(),la=D('<button class="audio-button svelte-4rg8" aria-label="Play Audio"><i class="fa-solid fa-volume-low svelte-4rg8"></i></button>'),ca=D('<div class="new-element-indicator svelte-4rg8">New Card</div>'),da=D("<div>Warm Up</div>"),ua=D('<div class="new-element-indicator is-hidden svelte-4rg8"></div>'),va=D('<span class="svelte-4rg8"> </span>'),fa=D('<span class="empty-character-box svelte-4rg8">&#x3000;</span>'),ga=D('<!> <div class="character-box-container svelte-4rg8"></div>',1),ma=(r,t)=>t(),ha=D('<button><i></i> <span class="svelte-4rg8"> </span></button>'),_a=D('<div class="character-writer svelte-4rg8"><div class="meaning svelte-4rg8"> </div> <div><div class="reading svelte-4rg8"> </div> <!></div> <div class="character-container svelte-4rg8"><div class="grid-background svelte-4rg8"><svg xmlns="http://www.w3.org/2000/svg" id="grid-background-target" class="svelte-4rg8"><line x1="0" y1="0" class="svelte-4rg8"></line><line y1="0" x2="0" class="svelte-4rg8"></line><line y1="0" class="svelte-4rg8"></line><line x1="0" class="svelte-4rg8"></line></svg></div> <div class="bottom-container svelte-4rg8"><!></div> <!></div></div>');function Ca(r,t){var Ne;ct(t,!0);let i=be(500),n=be(500),l="#DDD";const y=500,G=new Audio(`${mt}/assets/sounds/correct-choice-43861.mp3`);let w=be(Ft([])),f=be(!1),F=be(!1),S=be(!1);function ee(){return parseFloat(getComputedStyle(document.documentElement).fontSize)}function _(){const u=ee()*3*2;d(i,Math.min(document.documentElement.clientWidth-u,500),!0),d(n,e(i),!0)}let g=Qe(t,"isRequestManualGrade",15),a=Qe(t,"autoReviewData",15),o=be(0),A=(Ne=t.characterData)==null?void 0:Ne.meanings.join("; ");function O(u){for(const v of u)if(v.startsWith(at))return Jt(v.substring(at.length))}function E(){var u;d(F,!0),!e(S)&&(t.cardConfig.isFirstTime?(d(o,(e(o)+1)%t.characterData.characters.length),window.setTimeout(()=>{J(e(o))},y)):(G.play(),d(o,e(o)+1),e(o)==((u=t.characterData)==null?void 0:u.characters.length)?(t.onComplete({...a()}),d(f,!0),window.setTimeout(()=>{Z()},y)):window.setTimeout(()=>{J(e(o))},y)))}let c;function J(u){if(e(S)||!t.characterData)return;c&&(t.cardConfig.isFirstTime||c.cancelQuiz(),c.hideCharacter(),c.hideOutline());const v=O(t.characterData.tags[u]??[]);c=Zt.create("grid-background-target",t.characterData.characters[u],{width:e(i),height:e(n),padding:5,showCharacter:!1,showOutline:t.cardConfig.isShowOutline,highlightOnComplete:!1,strokeColor:t.app.getChineseToneColor(v)??"#555",drawingWidth:Xt,drawingColor:"#555",onComplete:()=>{E()}}),t.cardConfig.isFirstTime?(setTimeout(()=>{e(F)||Z()},y),setTimeout(()=>{c.animateCharacter({onComplete:()=>{setTimeout(()=>{c.hideOutline(),c.hideCharacter(),E()},y)}})},y)):c.quiz({onMistake:()=>{a(a().incorrectStrokeCount++,!0),a(a().totalStrokeCount++,!0)},onCorrectStroke:()=>{a(a().correctStrokeCount++,!0),a(a().totalStrokeCount++,!0)}})}function pe(){var v;const u=(v=t.characterData)==null?void 0:v.audioUrl;u&&d(w,u.map(K=>{const ve=K.map(fe=>Kt(t.cardConfig.lang,fe));return new ra(ve)}),!0)}function Z(){const u=Math.floor(Math.random()*e(w).length),v=e(w)[u];v.stop(),v.play()}function se(){if(t.cardConfig.isWarmUp){window.alert("Can't change grade during warm-up, since grading doesn't affect scheduling in this phase.");return}g(!g())}function X(u=0){const v=t.cardConfig.warmUpCount??0,K=t.cardConfig.warmUpMaxCount;return`${Math.round((v+u)/K*100)}%`}lt(()=>(a({correctStrokeCount:0,incorrectStrokeCount:0,totalStrokeCount:0}),_(),pe(),window.addEventListener("resize",_),J(0),()=>{d(S,!0),window.removeEventListener("resize",_)}));var P=_a(),ue=C(P),He=C(ue,!0);h(ue);var m=I(ue,2);let oe;var Ge=C(m),te=C(Ge,!0);h(Ge);var Be=I(Ge,2);{var je=u=>{var v=la();v.__click=[oa,Z],R(u,v)};M(Be,u=>{e(w).length>0&&u(je)})}h(m);var Me=I(m,2),Ue=C(Me),ke=C(Ue),xe=C(ke);N(xe,"stroke",l);var we=I(xe);N(we,"stroke",l);var ye=I(we);N(ye,"stroke",l);var Se=I(ye);N(Se,"stroke",l),h(ke),h(Ue);var We=I(Ue,2),Ye=C(We);{var Ze=u=>{var v=ga(),K=Pe(v);{var ve=s=>{var b=ca();R(s,b)},fe=(s,b)=>{{var x=U=>{var q=da();let ge,T;Ce((p,B)=>{ge=ne(q,1,"new-element-indicator svelte-4rg8",null,ge,p),T=Yt(q,"",T,B)},[()=>({"is-complete":e(f)}),()=>({"--progress":X(),"--next-progress":X(1)})]),R(U,q)},L=U=>{var q=ua();R(U,q)};M(s,U=>{t.cardConfig.isWarmUp?U(x):U(L,!1)},b)}};M(K,s=>{t.cardConfig.isFirstTime?s(ve):s(fe,!1)})}var Te=I(K,2);vt(Te,21,()=>t.characterData.characters,ft,(s,b,x)=>{var L=ut(),U=Pe(L);{var q=T=>{var p=va(),B=C(p,!0);h(p),Ce(()=>$(B,e(b))),R(T,p)},ge=T=>{var p=fa();R(T,p)};M(U,T=>{x<e(o)||t.cardConfig.isFirstTime?T(q):T(ge,!1)})}R(s,L)}),h(Te),R(u,v)};M(Ye,u=>{var v;(v=t.characterData)!=null&&v.characters&&u(Ze)})}h(We);var Xe=I(We,2);{var Oe=u=>{var v=ha();let K;v.__click=[ma,se];var ve=C(v),fe=I(ve,2),Te=C(fe,!0);h(fe),h(v),Ce(s=>{K=ne(v,1,`auto-review-indicator-container ${na[t.autoGrade]}`,"svelte-4rg8",K,s),ne(ve,1,Lt(sa[t.autoGrade]),"svelte-4rg8"),$(Te,ia[t.autoGrade])},[()=>({blinking:g(),animated:g(),"echo-once":!g()})]),R(u,v)};M(Xe,u=>{t.autoGrade&&u(Oe)})}h(Me),h(P),Ce(u=>{var v;$(He,A),oe=ne(m,1,"reading-container svelte-4rg8",null,oe,u),$(te,(v=t.characterData)==null?void 0:v.reading),N(ke,"width",e(i)),N(ke,"height",e(n)),N(xe,"x2",e(i)),N(xe,"y2",e(n)),N(we,"x1",e(i)),N(we,"y2",e(n)),N(ye,"x1",e(i)/2),N(ye,"x2",e(i)/2),N(ye,"y2",e(n)),N(Se,"y1",e(n)/2),N(Se,"x2",e(i)),N(Se,"y2",e(n)/2)},[()=>({"is-hidden":!t.app.getConfig().zh.alwaysShowReading&&!e(f)&&!t.cardConfig.isFirstTime})]),R(r,P),dt()}ot(["click"]);const pa=r=>r;function wa(r){const t=r-1;return t*t*t+1}function st(r){const t=typeof r=="string"&&r.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[r,"px"]}function ya(r,{delay:t=0,duration:i=400,easing:n=pa}={}){const l=+getComputedStyle(r).opacity;return{delay:t,duration:i,easing:n,css:y=>`opacity: ${y*l}`}}function ba(r,{delay:t=0,duration:i=400,easing:n=wa,x:l=0,y=0,opacity:G=0}={}){const w=getComputedStyle(r),f=+w.opacity,F=w.transform==="none"?"":w.transform,S=f*(1-G),[ee,_]=st(l),[g,a]=st(y);return{delay:t,duration:i,easing:n,css:(o,A)=>`
			transform: ${F} translate(${(1-o)*ee}${_}, ${(1-o)*g}${a});
			opacity: ${f-S*A}`}}function ka(r){const t=r-1;return t*t*t+1}var xa=D('<button><div class="review-button-inner svelte-1irkfzg"><div class="review-time svelte-1irkfzg"> </div> <div class="review-label svelte-1irkfzg"> </div></div></button>'),Sa=D('<div class="bottom-container svelte-1irkfzg"><div></div></div>'),Ta=D(`<div class="svelte-1irkfzg">You have done today's review.</div>`),Ra=D('<div class="counter svelte-1irkfzg"><span class="underlined svelte-1irkfzg"><!></span></div>'),Aa=D('<div class="counter svelte-1irkfzg"><span> </span> <span> </span> <span> </span> <span> </span></div>'),Ea=D('<!> <div class="character-writer-container svelte-1irkfzg"><!></div> <!>',1),Ia=D('<!> <div class="container svelte-1irkfzg"><!> <!></div>',1);function Ja(r,t){ct(t,!1);const i=W(),n=W(),l=(s,b=Ie,x)=>{let L=_e(()=>Ot(x==null?void 0:x(),""));var U=Sa(),q=C(U);vt(q,5,b,ft,(ge,T)=>{var p=xa();let B;p.__click=function(...Y){var H;(H=e(T).onclick)==null||H.apply(this,Y)};var me=C(p),j=C(me),ae=C(j,!0);h(j);var Q=I(j,2),V=C(Q,!0);h(Q),h(me),h(p),Ce(Y=>{B=ne(p,1,(e(T),z(()=>`review-button ${e(T).className||""}`)),"svelte-1irkfzg",B,Y),$(ae,(e(T),z(()=>e(T).sublabel||" "))),$(V,(e(T),z(()=>e(T).label||" ")))},[()=>({"is-complete":e(T).isComplete})],_e),R(ge,p)}),h(q),h(U),Ce(()=>ne(q,1,`review-button-container ${e(L)}`,"svelte-1irkfzg")),nt(1,U,()=>ba,()=>y),nt(2,U,()=>ya,()=>G),R(s,U)},y={delay:100,y:-100,duration:300,easing:ka},G={duration:200};let w=Qe(t,"data",8),f=w().deckId||"",F=w().cardIds||encodeURIComponent("[]"),S=JSON.parse(decodeURIComponent(F)),ee=w().isExtraStudy?"Extra Study":"Review",_=W(),g=W(!1),a=W(new Bt);lt(async()=>{var s,b,x,L;await e(a).init(),Z=(b=(s=e(a).deckData[f])==null?void 0:s.tags)==null?void 0:b.includes(rt.ZH_YUE),await E.init(Z?"yue":"zh"),d(a,e(a)),pe=(L=(x=e(a).deckData[f])==null?void 0:x.tags)==null?void 0:L.includes(rt.ZH_TRAD),d(se,e(a).isAutoGrading()),d(g,!0),w().isExtraStudy&&e(a).extraStudyHandler.registerReviewCardIdsOverride(S),te()});let o=W(!1),A=W(!1),O=W(!1),E=new Qt,c=W(void 0),J=W(!1),pe=!1,Z=!1,se=W(!1),X=W(void 0),P=W(!1),ue=W(0);const He=["Fail","Hard","Good","Easy"];let m=W(void 0),oe=W({1:"",2:"",3:"",4:""});function Ge(){d(o,!1),d(J,!1),d(X,void 0),d(P,!1)}function te(){Ge(),d(O,!0);const s=e(a).getNextCard(f);if(s===void 0){d(A,!0);return}e(a).getCard(f,s,!0)&&(d(O,!1),d(m,s),d(oe,e(a).getRatingScheduledTimeStr(f,s)),d(c,e(a).getWenbunCustomState(f,s)),Ht(ue))}function Be(){e(a).startWarmUp(f,e(m)),d(J,!0),d(m,e(m)),d(oe,e(a).getRatingScheduledTimeStr(f,e(m))),d(c,e(a).getWenbunCustomState(f,e(m)))}function je(){e(a).skipWarmUp(f,e(m)),d(J,!0),te()}function Me(s){const b=e(a).getCardWord(f,s),x=e(a).getConfig();return E.getCharacterWriterData(b,{convertToTraditional:pe,mandarinReading:x.zh.mandarinReading,isCantonese:Z,isPlayAudio:x.zh.playAudio})}function Ue(s){const b=e(a).getWarmUpCount(f,s),x=e(n)&&b===0;return{isFirstTime:e(i),isWarmUp:e(n)&&!Oe(s),warmUpCount:b,warmUpMaxCount:e(a).getMaxWarmUpCount(),isShowOutline:e(i)||x,lang:Z?"yue":"zh"}}function ke(s){d(o,!0),e(se)&&d(X,$e.getGrade(s))}async function xe(s){e(a).rateCard(f,e(m),s),await e(a).save(),te()}function we(s){switch(s){case k.Easy:return"review-button-easy";case k.Good:return"review-button-good";case k.Hard:return"review-button-hard";case k.Again:return"review-button-fail"}}async function ye(){e(a).addIgnoredMark(f,e(m)),await e(a).save(),te()}function Se(){e(a).extraStudyHandler.rateAgain(e(m)),te()}function We(){e(a).extraStudyHandler.rateGood(e(m)),te()}async function Ye(){e(a).storeAutoGradeLog(e(_).correctStrokeCount,e(_).incorrectStrokeCount,e(X)),e(a).rateCard(f,e(m),e(X)),await e(a).save(),te()}function Ze(s){d(X,s),d(P,!1)}async function Xe(){e(a).warmUpNext(f,e(m)),await e(a).save(),te()}function Oe(s,b){const x=e(a).getWarmUpCount(f,s);return x===void 0?!0:x>=e(a).getMaxWarmUpCount()}et(()=>(e(c),ie),()=>{d(i,e(c)===ie.New)}),et(()=>(e(c),ie),()=>{d(n,e(c)===ie.WarmUp)}),Pt(),qt();var Ne=Ia(),u=Pe(Ne);jt(u,{get title(){return ee},get backUrl(){return`${mt??""}/`}});var v=I(u,2),K=C(v);{var ve=s=>{var b=Ta();R(s,b)};M(K,s=>{e(A)&&s(ve)})}var fe=I(K,2);{var Te=s=>{var b=Ea(),x=Pe(b);Je(x,()=>e(ue),p=>{var B=ut(),me=Pe(B);{var j=Q=>{var V=Ra(),Y=C(V),H=C(Y);Je(H,()=>e(m),ze=>{var le=Mt();Ce(Re=>$(le,Re),[()=>(e(a),z(()=>e(a).extraStudyHandler.getCardsCount()||""))],_e),R(ze,le)}),h(Y),h(V),R(Q,V)},ae=Q=>{var V=Aa(),Y=C(V);let H;var ze=C(Y,!0);h(Y);var le=I(Y,2);let Re;var he=C(le,!0);h(le);var Ae=I(le,2);let Le;var Ke=C(Ae,!0);h(Ae);var re=I(Ae,2);let Ee;var De=C(re,!0);h(re),h(V),Ce((ce,_t,Ct,pt,wt,yt,bt,kt)=>{H=ne(Y,1,"deck-count-learn-relearn svelte-1irkfzg",null,H,ce),$(ze,_t),Re=ne(le,1,"deck-count-review svelte-1irkfzg",null,Re,Ct),$(he,pt),Le=ne(Ae,1,"deck-count-new svelte-1irkfzg",null,Le,wt),$(Ke,yt),Ee=ne(re,1,"deck-count-previously-studied svelte-1irkfzg",null,Ee,bt),$(De,kt)},[()=>({underlined:e(c)===ie.Learning||e(c)===ie.Relearning}),()=>(e(a),z(()=>e(a).getLearningRelearningCardsCount(f)||"")),()=>({underlined:e(c)===ie.ReviewYoung||e(c)===ie.ReviewMature}),()=>(e(a),z(()=>e(a).getScheduledReviewCardsCount(f)||"")),()=>({underlined:e(c)===ie.New}),()=>(e(a),z(()=>e(a).getScheduledNewOrWarmUpCardsCount(f)||"")),()=>({underlined:e(c)===ie.PreviouslyStudied}),()=>(e(a),z(()=>e(a).getScheduledPreviouslyStudiedCardsCount(f)||""))],_e),R(Q,V)};M(me,Q=>{tt(w()),z(()=>w().isExtraStudy)?Q(j):Q(ae,!1)})}R(p,B)});var L=I(x,2),U=C(L);Je(U,()=>[e(m),e(J),e(O)],p=>{const B=_e(()=>(e(m),z(()=>Me(e(m))))),me=_e(()=>(e(m),z(()=>Ue(e(m)))));Ca(p,{get app(){return e(a)},get characterData(){return e(B)},onComplete:j=>ke(j),get cardConfig(){return e(me)},get autoGrade(){return e(X)},get isRequestManualGrade(){return e(P)},set isRequestManualGrade(j){d(P,j)},get autoReviewData(){return e(_)},set autoReviewData(j){d(_,j)},$$legacy:!0})}),h(L);var q=I(L,2);{var ge=p=>{l(p,()=>[{label:"Ignore",sublabel:"(Don't Learn)",className:"review-button-fail",isComplete:!0,onclick:()=>ye()},{label:"Learn*",sublabel:"(Skip Warm-Up)",className:"review-button-hard",isComplete:!0,onclick:()=>je()},{label:""},{label:"Learn",className:"review-button-easy",isComplete:!0,onclick:()=>Be()}])},T=(p,B)=>{{var me=ae=>{l(ae,()=>[{label:""},{label:""},{label:""},{label:"Next",className:"review-button-easy",isComplete:e(o),onclick:()=>Xe()}])},j=(ae,Q)=>{{var V=H=>{l(H,()=>[{label:"Again",sublabel:"(Put Back)",className:"review-button-fail",isComplete:e(o),onclick:()=>Se()},{label:""},{label:""},{label:"Good",className:"review-button-easy",isComplete:e(o),onclick:()=>We()}])},Y=(H,ze)=>{{var le=he=>{l(he,()=>[{label:""},{label:""},{label:""},{label:"Next",className:"review-button-easy",isComplete:e(o),onclick:()=>Ye()}])},Re=(he,Ae)=>{{var Le=re=>{var Ee=_e(()=>(e(oe),e(o),z(()=>He.map((De,ce)=>({label:De,sublabel:e(oe)[ce+1],className:we(ce+1),isComplete:e(o),onclick:()=>Ze(ce+1)})))));l(re,()=>e(Ee),()=>"pulsing")},Ke=re=>{var Ee=_e(()=>(e(oe),e(o),z(()=>He.map((De,ce)=>({label:De,sublabel:e(oe)[ce+1],className:we(ce+1),isComplete:e(o),onclick:()=>xe(ce+1)})))));l(re,()=>e(Ee))};M(he,re=>{e(se)&&e(P)?re(Le):re(Ke,!1)},Ae)}};M(H,he=>{e(se)&&!e(P)?he(le):he(Re,!1)},ze)}};M(ae,H=>{tt(w()),z(()=>w().isExtraStudy)?H(V):H(Y,!1)},Q)}};M(p,ae=>{e(n),e(m),e(ue),z(()=>e(n)&&!Oe(e(m),e(ue)))?ae(me):ae(j,!1)},B)}};M(q,p=>{e(i)?p(ge):p(T,!1)})}R(s,b)};M(fe,s=>{e(g)&&e(m)!==void 0&&!e(A)&&s(Te)})}h(v),R(r,Ne),dt()}ot(["click"]);export{Ja as component,Ka as universal};
