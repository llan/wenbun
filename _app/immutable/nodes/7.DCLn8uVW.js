var kt=Object.defineProperty;var xt=(r,t,i)=>t in r?kt(r,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):r[t]=i;var De=(r,t,i)=>xt(r,typeof t!="symbol"?t+"":t,i);import"../chunks/CWj6FrbW.js";import"../chunks/C7vLGdXP.js";import{a as St,d as st,o as ot,s as ee}from"../chunks/CLpbRZ0x.js";import{Q as Tt,ag as At,a$ as Rt,b0 as Et,l as It,a7 as W,b1 as Gt,b2 as Nt,b3 as Ut,b4 as Wt,a1 as zt,ak as Ee,p as lt,e as be,ap as Dt,i as v,f as z,d as p,r as h,s as E,h as e,t as Ce,b as T,c as dt,a as Fe,aA as ct,S as N,ai as $e,aj as Ft,b5 as Pt,a9 as et,aY as Mt,G as _e,b6 as Ht}from"../chunks/DjN3b0Ki.js";import{i as O}from"../chunks/Bu_gglvj.js";import{k as Qe}from"../chunks/Bx9CPXW5.js";import{e as ut,i as vt}from"../chunks/D2VCDp_j.js";import{s as se,c as Ot}from"../chunks/C0SqAXoy.js";import{w as ft}from"../chunks/B-Jvs9zj.js";import{i as Lt}from"../chunks/CYG9lWKH.js";import{p as Xe}from"../chunks/BReWSNzY.js";import{b as gt}from"../chunks/DfA_aqBK.js";import{g as x,C as qt,h as Bt,T as tt,p as jt,A as Yt,c as at,i as Zt,W as ne}from"../chunks/DRpHFl-G.js";import{s as U,T as Kt}from"../chunks/DhJIDP9Q.js";import{s as Qt}from"../chunks/DatJtUGD.js";import{H as Xt}from"../chunks/DcL13wi7.js";const Jt=()=>performance.now(),ve={tick:r=>requestAnimationFrame(r),now:()=>Jt(),tasks:new Set};function mt(){const r=ve.now();ve.tasks.forEach(t=>{t.c(r)||(ve.tasks.delete(t),t.f())}),ve.tasks.size!==0&&ve.tick(mt)}function Vt(r){let t;return ve.tasks.size===0&&ve.tick(mt),{promise:new Promise(i=>{ve.tasks.add(t={c:r,f:i})}),abort(){ve.tasks.delete(t)}}}function qe(r,t){ft(()=>{r.dispatchEvent(new CustomEvent(t))})}function $t(r){if(r==="float")return"cssFloat";if(r==="offset")return"cssOffset";if(r.startsWith("--"))return r;const t=r.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(i=>i[0].toUpperCase()+i.slice(1)).join("")}function rt(r){const t={},i=r.split(";");for(const n of i){const[l,k]=n.split(":");if(!l||k===void 0)break;const I=$t(l.trim());t[I]=k.trim()}return t}const ea=r=>r;function it(r,t,i,n){var l=(r&Nt)!==0,k=(r&Ut)!==0,I=l&&k,y=(r&Gt)!==0,f=I?"both":l?"in":"out",D,S=t.inert,te=t.style.overflow,_,g;function a(){return ft(()=>D??(D=i()(t,(n==null?void 0:n())??{},{direction:f})))}var o={is_global:y,in(){var d;if(t.inert=S,!l){g==null||g.abort(),(d=g==null?void 0:g.reset)==null||d.call(g);return}k||_==null||_.abort(),qe(t,"introstart"),_=Je(t,a(),g,1,()=>{qe(t,"introend"),_==null||_.abort(),_=D=void 0,t.style.overflow=te})},out(d){if(!k){d==null||d(),D=void 0;return}t.inert=!0,qe(t,"outrostart"),g=Je(t,a(),_,0,()=>{qe(t,"outroend"),d==null||d()})},stop:()=>{_==null||_.abort(),g==null||g.abort()}},A=Tt;if((A.transitions??(A.transitions=[])).push(o),l&&St){var L=y;if(!L){for(var R=A.parent;R&&(R.f&At)!==0;)for(;(R=R.parent)&&(R.f&Rt)===0;);L=!R||(R.f&Et)!==0}L&&It(()=>{W(()=>o.in())})}}function Je(r,t,i,n,l){var k=n===1;if(Wt(t)){var I,y=!1;return zt(()=>{if(!y){var A=t({direction:k?"in":"out"});I=Je(r,A,i,n,l)}}),{abort:()=>{y=!0,I==null||I.abort()},deactivate:()=>I.deactivate(),reset:()=>I.reset(),t:()=>I.t()}}if(i==null||i.deactivate(),!(t!=null&&t.duration))return l(),{abort:Ee,deactivate:Ee,reset:Ee,t:()=>n};const{delay:f=0,css:D,tick:S,easing:te=ea}=t;var _=[];if(k&&i===void 0&&(S&&S(0,1),D)){var g=rt(D(0,1));_.push(g,g)}var a=()=>1-n,o=r.animate(_,{duration:f,fill:"forwards"});return o.onfinish=()=>{o.cancel();var A=(i==null?void 0:i.t())??1-n;i==null||i.abort();var L=n-A,R=t.duration*Math.abs(L),d=[];if(R>0){var ae=!1;if(D)for(var we=Math.ceil(R/16.666666666666668),j=0;j<=we;j+=1){var oe=A+L*te(j/we),Y=rt(D(oe,1-oe));d.push(Y),ae||(ae=Y.overflow==="hidden")}ae&&(r.style.overflow="hidden"),a=()=>{var F=o.currentTime;return A+L*te(F/R)},S&&Vt(()=>{if(o.playState!=="running")return!1;var F=a();return S(F,1-F),!0})}o=r.animate(d,{duration:R,fill:"forwards"}),o.onfinish=()=>{a=()=>n,S==null||S(n,1-n),l()}},{abort:()=>{o&&(o.cancel(),o.effect=null,o.onfinish=Ee)},deactivate:()=>{l=Ee},reset:()=>{n===0&&(S==null||S(1,0))},t:()=>a()}}const ta=({url:r})=>({deckId:r.searchParams.get("id")||"",isExtraStudy:r.searchParams.get("isExtraStudy")==="true",cardIds:r.searchParams.get("cardIds")||encodeURIComponent("[]")}),Za=Object.freeze(Object.defineProperty({__proto__:null,load:ta},Symbol.toStringTag,{value:"Module"}));class aa{constructor(t,i=!0){De(this,"audios");De(this,"currentIndex",0);De(this,"isPlaying",!1);De(this,"onEnded",this.handleEnded.bind(this));this.audios=t.map(n=>{const l=new Audio(n);return l.preload="auto",i&&l.load(),l})}handleEnded(){this.audios[this.currentIndex].removeEventListener("ended",this.onEnded),this.currentIndex++,this.currentIndex<this.audios.length?this.playCurrent():(this.isPlaying=!1,this.currentIndex=0)}playCurrent(){const t=this.audios[this.currentIndex];t.addEventListener("ended",this.onEnded),t.currentTime=0,t.play().catch(i=>{console.warn("Playback failed:",i),this.stop()})}play(){this.audios.length!==0&&(this.isPlaying&&this.stop(),this.isPlaying=!0,this.currentIndex=0,this.playCurrent())}stop(){if(!this.isPlaying)return;this.isPlaying=!1;const t=this.audios[this.currentIndex];t.pause(),t.currentTime=0,t.removeEventListener("ended",this.onEnded),this.currentIndex=0}}const ra={[x.Again]:"Fail",[x.Hard]:"Hard",[x.Good]:"Good",[x.Easy]:"Easy"},ia={[x.Again]:"again",[x.Hard]:"hard",[x.Good]:"good",[x.Easy]:"easy"},na={[x.Again]:"fa fa-solid fa-face-frown",[x.Hard]:"fa fa-solid fa-face-meh",[x.Good]:"fa fa-solid fa-face-smile",[x.Easy]:"fa fa-solid fa-star"};var Ve;(r=>{function t(n){const l=n.correctStrokeCount===0?1/0:n.incorrectStrokeCount/n.correctStrokeCount;return l<.25||n.incorrectStrokeCount<=2?x.Good:l<.75||n.incorrectStrokeCount<=4?x.Hard:x.Again}r.getGrade=t;function i(n){switch(n){case x.Again:return"Again";case x.Hard:return"Hard";case x.Good:return"Good";default:return"Unknown"}}r.gradeToLabel=i})(Ve||(Ve={}));var sa=(r,t)=>t(),oa=z('<button class="audio-button svelte-4rg8" aria-label="Play Audio"><i class="fa-solid fa-volume-low svelte-4rg8"></i></button>'),la=z('<div class="new-element-indicator svelte-4rg8">New Card</div>'),da=z("<div>Warm Up</div>"),ca=z('<div class="new-element-indicator is-hidden svelte-4rg8"></div>'),ua=z('<span class="svelte-4rg8"> </span>'),va=z('<span class="empty-character-box svelte-4rg8">&#x3000;</span>'),fa=z('<!> <div class="character-box-container svelte-4rg8"></div>',1),ga=(r,t)=>t(),ma=z('<button><i></i> <span class="svelte-4rg8"> </span></button>'),ha=z('<div class="character-writer svelte-4rg8"><div class="meaning svelte-4rg8"> </div> <div><div class="reading svelte-4rg8"> </div> <!></div> <div class="character-container svelte-4rg8"><div class="grid-background svelte-4rg8"><svg xmlns="http://www.w3.org/2000/svg" id="grid-background-target" class="svelte-4rg8"><line x1="0" y1="0" class="svelte-4rg8"></line><line y1="0" x2="0" class="svelte-4rg8"></line><line y1="0" class="svelte-4rg8"></line><line x1="0" class="svelte-4rg8"></line></svg></div> <div class="bottom-container svelte-4rg8"><!></div> <!></div></div>');function _a(r,t){var Ue;lt(t,!0);let i=be(500),n=be(500),l="#DDD";const k=500,I=new Audio(`${gt}/assets/sounds/correct-choice-43861.mp3`);let y=be(Dt([])),f=be(!1),D=be(!1),S=be(!1);function te(){return parseFloat(getComputedStyle(document.documentElement).fontSize)}function _(){const c=te()*3*2;v(i,Math.min(document.documentElement.clientWidth-c,500),!0),v(n,e(i),!0)}let g=Xe(t,"isRequestManualGrade",15),a=Xe(t,"autoReviewData",15),o=be(0),A=(Ue=t.characterData)==null?void 0:Ue.meanings.join("; ");function L(c){for(const u of c)if(u.startsWith(tt))return jt(u.substring(tt.length))}function R(){var c;v(D,!0),!e(S)&&(t.cardConfig.isFirstTime?(v(o,(e(o)+1)%t.characterData.characters.length),window.setTimeout(()=>{ae(e(o))},k)):(I.play(),v(o,e(o)+1),e(o)==((c=t.characterData)==null?void 0:c.characters.length)?(t.onComplete({...a()}),v(f,!0),window.setTimeout(()=>{j()},k)):window.setTimeout(()=>{ae(e(o))},k)))}let d;function ae(c){if(e(S)||!t.characterData)return;d&&(t.cardConfig.isFirstTime||d.cancelQuiz(),d.hideCharacter(),d.hideOutline());const u=L(t.characterData.tags[c]??[]);d=Xt.create("grid-background-target",t.characterData.characters[c],{width:e(i),height:e(n),padding:5,showCharacter:!1,showOutline:t.cardConfig.isShowOutline,highlightOnComplete:!1,strokeColor:t.app.getChineseToneColor(u)??"#555",drawingWidth:qt,drawingColor:"#555",onComplete:()=>{R()}}),t.cardConfig.isFirstTime?(setTimeout(()=>{e(D)||j()},k),setTimeout(()=>{d.animateCharacter({onComplete:()=>{setTimeout(()=>{d.hideOutline(),d.hideCharacter(),R()},k)}})},k)):d.quiz({onMistake:()=>{a(a().incorrectStrokeCount++,!0),a(a().totalStrokeCount++,!0)},onCorrectStroke:()=>{a(a().correctStrokeCount++,!0),a(a().totalStrokeCount++,!0)}})}function we(){var u;const c=(u=t.characterData)==null?void 0:u.audioUrl;c&&v(y,c.map(X=>{const ge=X.map(me=>Bt(t.cardConfig.lang,me));return new aa(ge)}),!0)}function j(){const c=Math.floor(Math.random()*e(y).length),u=e(y)[c];u.stop(),u.play()}function oe(){if(t.cardConfig.isWarmUp){window.alert("Can't change grade during warm-up, since grading doesn't affect scheduling in this phase.");return}g(!g())}function Y(c=0){const u=t.cardConfig.warmUpCount??0,X=t.cardConfig.warmUpMaxCount;return`${Math.round((u+c)/X*100)}%`}ot(()=>(a({correctStrokeCount:0,incorrectStrokeCount:0,totalStrokeCount:0}),_(),we(),window.addEventListener("resize",_),ae(0),()=>{v(S,!0),window.removeEventListener("resize",_)}));var F=ha(),fe=p(F),Pe=p(fe,!0);h(fe);var C=E(fe,2);let le;var Ie=p(C),de=p(Ie,!0);h(Ie);var Be=E(Ie,2);{var je=c=>{var u=oa();u.__click=[sa,j],T(c,u)};O(Be,c=>{e(y).length>0&&c(je)})}h(C);var Me=E(C,2),Ge=p(Me),ke=p(Ge),pe=p(ke);U(pe,"stroke",l);var xe=E(pe);U(xe,"stroke",l);var ye=E(xe);U(ye,"stroke",l);var Se=E(ye);U(Se,"stroke",l),h(ke),h(Ge);var Ne=E(Ge,2),Ye=p(Ne);{var Ze=c=>{var u=fa(),X=Fe(u);{var ge=m=>{var b=la();T(m,b)},me=(m,b)=>{{var Z=M=>{var J=da();let P,w;Ce((G,Q)=>{P=se(J,1,"new-element-indicator svelte-4rg8",null,P,G),w=Qt(J,"",w,Q)},[()=>({"is-complete":e(f)}),()=>({"--progress":Y(),"--next-progress":Y(1)})]),T(M,J)},K=M=>{var J=ca();T(M,J)};O(m,M=>{t.cardConfig.isWarmUp?M(Z):M(K,!1)},b)}};O(X,m=>{t.cardConfig.isFirstTime?m(ge):m(me,!1)})}var s=E(X,2);ut(s,21,()=>t.characterData.characters,vt,(m,b,Z)=>{var K=ct(),M=Fe(K);{var J=w=>{var G=ua(),Q=p(G,!0);h(G),Ce(()=>ee(Q,e(b))),T(w,G)},P=w=>{var G=va();T(w,G)};O(M,w=>{Z<e(o)||t.cardConfig.isFirstTime?w(J):w(P,!1)})}T(m,K)}),h(s),T(c,u)};O(Ye,c=>{var u;(u=t.characterData)!=null&&u.characters&&c(Ze)})}h(Ne);var He=E(Ne,2);{var Oe=c=>{var u=ma();let X;u.__click=[ga,oe];var ge=p(u),me=E(ge,2),s=p(me,!0);h(me),h(u),Ce(m=>{X=se(u,1,`auto-review-indicator-container ${ia[t.autoGrade]}`,"svelte-4rg8",X,m),se(ge,1,Ot(na[t.autoGrade]),"svelte-4rg8"),ee(s,ra[t.autoGrade])},[()=>({blinking:g(),animated:g(),"echo-once":!g()})]),T(c,u)};O(He,c=>{t.autoGrade&&c(Oe)})}h(Me),h(F),Ce(c=>{var u;ee(Pe,A),le=se(C,1,"reading-container svelte-4rg8",null,le,c),ee(de,(u=t.characterData)==null?void 0:u.reading),U(ke,"width",e(i)),U(ke,"height",e(n)),U(pe,"x2",e(i)),U(pe,"y2",e(n)),U(xe,"x1",e(i)),U(xe,"y2",e(n)),U(ye,"x1",e(i)/2),U(ye,"x2",e(i)/2),U(ye,"y2",e(n)),U(Se,"y1",e(n)/2),U(Se,"x2",e(i)),U(Se,"y2",e(n)/2)},[()=>({"is-hidden":!t.app.getConfig().zh.alwaysShowReading&&!e(f)&&!t.cardConfig.isFirstTime})]),T(r,F),dt()}st(["click"]);const Ca=r=>r;function wa(r){const t=r-1;return t*t*t+1}function nt(r){const t=typeof r=="string"&&r.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[r,"px"]}function pa(r,{delay:t=0,duration:i=400,easing:n=Ca}={}){const l=+getComputedStyle(r).opacity;return{delay:t,duration:i,easing:n,css:k=>`opacity: ${k*l}`}}function ya(r,{delay:t=0,duration:i=400,easing:n=wa,x:l=0,y:k=0,opacity:I=0}={}){const y=getComputedStyle(r),f=+y.opacity,D=y.transform==="none"?"":y.transform,S=f*(1-I),[te,_]=nt(l),[g,a]=nt(k);return{delay:t,duration:i,easing:n,css:(o,A)=>`
			transform: ${D} translate(${(1-o)*te}${_}, ${(1-o)*g}${a});
			opacity: ${f-S*A}`}}function ba(r){const t=r-1;return t*t*t+1}var ka=z('<button><div class="review-button-inner svelte-1irkfzg"><div class="review-time svelte-1irkfzg"> </div> <div class="review-label svelte-1irkfzg"> </div></div></button>'),xa=z('<div class="bottom-container svelte-1irkfzg"><div></div></div>'),Sa=z(`<div class="svelte-1irkfzg">You have done today's review.</div>`),Ta=z('<div class="counter svelte-1irkfzg"><span class="underlined svelte-1irkfzg"><!></span></div>'),Aa=z('<div class="counter svelte-1irkfzg"><span> </span> <span> </span> <span> </span> <span> </span></div>'),Ra=z('<!> <div class="character-writer-container svelte-1irkfzg"><!></div> <!>',1),Ea=z('<!> <div class="container svelte-1irkfzg"><!> <!></div>',1);function Ka(r,t){lt(t,!1);const i=N(),n=N(),l=(s,m=Ee,b)=>{let Z=_e(()=>Ht(b==null?void 0:b(),""));var K=xa(),M=p(K);ut(M,5,m,vt,(J,P)=>{var w=ka();let G;w.__click=function(...B){var H;(H=e(P).onclick)==null||H.apply(this,B)};var Q=p(w),q=p(Q),re=p(q,!0);h(q);var V=E(q,2),$=p(V,!0);h(V),h(Q),h(w),Ce(B=>{G=se(w,1,(e(P),W(()=>`review-button ${e(P).className||""}`)),"svelte-1irkfzg",G,B),ee(re,(e(P),W(()=>e(P).sublabel||" "))),ee($,(e(P),W(()=>e(P).label||" ")))},[()=>({"is-complete":e(P).isComplete})],_e),T(J,w)}),h(M),h(K),Ce(()=>se(M,1,`review-button-container ${e(Z)}`,"svelte-1irkfzg")),it(1,K,()=>ya,()=>k),it(2,K,()=>pa,()=>I),T(s,K)},k={delay:100,y:-100,duration:300,easing:ba},I={duration:200};let y=Xe(t,"data",8),f=y().deckId||"",D=y().cardIds||encodeURIComponent("[]"),S=JSON.parse(decodeURIComponent(D)),te=y().isExtraStudy?"Extra Study":"Review",_=N(),g=N(!1),a=N(new Yt);ot(async()=>{var s,m,b,Z;await e(a).init(),j=(m=(s=e(a).deckData[f])==null?void 0:s.tags)==null?void 0:m.includes(at.ZH_YUE),await R.init(j?"yue":"zh"),v(a,e(a)),we=(Z=(b=e(a).deckData[f])==null?void 0:b.tags)==null?void 0:Z.includes(at.ZH_TRAD),v(oe,e(a).isAutoGrading()),v(g,!0),y().isExtraStudy&&e(a).extraStudyHandler.registerReviewCardIdsOverride(S),de()});let o=N(!1),A=N(!1),L=N(!1),R=new Zt,d=N(void 0),ae=N(!1),we=!1,j=!1,oe=N(!1),Y=N(void 0),F=N(!1),fe=N(0);const Pe=["Fail","Hard","Good","Easy"];let C=N(void 0),le=N({1:"",2:"",3:"",4:""});function Ie(){v(o,!1),v(ae,!1),v(Y,void 0),v(F,!1)}function de(){Ie(),v(L,!0);const s=e(a).getNextCard(f);if(s===void 0){v(A,!0);return}e(a).getCard(f,s,!0)&&(v(L,!1),v(C,s),v(le,e(a).getRatingScheduledTimeStr(f,s)),v(d,e(a).getWenbunCustomState(f,s)),Pt(fe))}function Be(){e(a).startWarmUp(f,e(C)),v(ae,!0),v(C,e(C)),v(le,e(a).getRatingScheduledTimeStr(f,e(C))),v(d,e(a).getWenbunCustomState(f,e(C)))}function je(s){const m=e(a).getCardWord(f,s),b=e(a).getConfig();return R.getCharacterWriterData(m,{convertToTraditional:we,mandarinReading:b.zh.mandarinReading,isCantonese:j,isPlayAudio:b.zh.playAudio})}function Me(s){const m=e(a).getWarmUpCount(f,s),b=e(n)&&m===0;return{isFirstTime:e(i),isWarmUp:e(n)&&!He(s),warmUpCount:m,warmUpMaxCount:e(a).getMaxWarmUpCount(),isShowOutline:e(i)||b,lang:j?"yue":"zh"}}function Ge(s){v(o,!0),e(oe)&&v(Y,Ve.getGrade(s))}async function ke(s){e(a).rateCard(f,e(C),s),await e(a).save(),de()}function pe(s){switch(s){case x.Easy:return"review-button-easy";case x.Good:return"review-button-good";case x.Hard:return"review-button-hard";case x.Again:return"review-button-fail"}}async function xe(){e(a).addIgnoredMark(f,e(C)),await e(a).save(),de()}function ye(){e(a).extraStudyHandler.rateAgain(e(C)),de()}function Se(){e(a).extraStudyHandler.rateGood(e(C)),de()}async function Ne(){e(a).storeAutoGradeLog(e(_).correctStrokeCount,e(_).incorrectStrokeCount,e(Y)),e(a).rateCard(f,e(C),e(Y)),await e(a).save(),de()}function Ye(s){v(Y,s),v(F,!1)}async function Ze(){e(a).warmUpNext(f,e(C)),await e(a).save(),de()}function He(s,m){const b=e(a).getWarmUpCount(f,s);return b===void 0?!0:b>=e(a).getMaxWarmUpCount()}$e(()=>(e(d),ne),()=>{v(i,e(d)===ne.New)}),$e(()=>(e(d),ne),()=>{v(n,e(d)===ne.WarmUp)}),Ft(),Lt();var Oe=Ea(),Ue=Fe(Oe);Kt(Ue,{get title(){return te},get backUrl(){return`${gt??""}/`}});var c=E(Ue,2),u=p(c);{var X=s=>{var m=Sa();T(s,m)};O(u,s=>{e(A)&&s(X)})}var ge=E(u,2);{var me=s=>{var m=Ra(),b=Fe(m);Qe(b,()=>e(fe),w=>{var G=ct(),Q=Fe(G);{var q=V=>{var $=Ta(),B=p($),H=p(B);Qe(H,()=>e(C),We=>{var ce=Mt();Ce(Te=>ee(ce,Te),[()=>(e(a),W(()=>e(a).extraStudyHandler.getCardsCount()||""))],_e),T(We,ce)}),h(B),h($),T(V,$)},re=V=>{var $=Aa(),B=p($);let H;var We=p(B,!0);h(B);var ce=E(B,2);let Te;var he=p(ce,!0);h(ce);var Ae=E(ce,2);let Le;var Ke=p(Ae,!0);h(Ae);var ie=E(Ae,2);let Re;var ze=p(ie,!0);h(ie),h($),Ce((ue,ht,_t,Ct,wt,pt,yt,bt)=>{H=se(B,1,"deck-count-learn-relearn svelte-1irkfzg",null,H,ue),ee(We,ht),Te=se(ce,1,"deck-count-review svelte-1irkfzg",null,Te,_t),ee(he,Ct),Le=se(Ae,1,"deck-count-new svelte-1irkfzg",null,Le,wt),ee(Ke,pt),Re=se(ie,1,"deck-count-previously-studied svelte-1irkfzg",null,Re,yt),ee(ze,bt)},[()=>({underlined:e(d)===ne.Learning||e(d)===ne.Relearning}),()=>(e(a),W(()=>e(a).getLearningRelearningCardsCount(f)||"")),()=>({underlined:e(d)===ne.ReviewYoung||e(d)===ne.ReviewMature}),()=>(e(a),W(()=>e(a).getScheduledReviewCardsCount(f)||"")),()=>({underlined:e(d)===ne.New}),()=>(e(a),W(()=>e(a).getScheduledNewOrWarmUpCardsCount(f)||"")),()=>({underlined:e(d)===ne.PreviouslyStudied}),()=>(e(a),W(()=>e(a).getScheduledPreviouslyStudiedCardsCount(f)||""))],_e),T(V,$)};O(Q,V=>{et(y()),W(()=>y().isExtraStudy)?V(q):V(re,!1)})}T(w,G)});var Z=E(b,2),K=p(Z);Qe(K,()=>[e(C),e(ae),e(L)],w=>{const G=_e(()=>(e(C),W(()=>je(e(C))))),Q=_e(()=>(e(C),W(()=>Me(e(C)))));_a(w,{get app(){return e(a)},get characterData(){return e(G)},onComplete:q=>Ge(q),get cardConfig(){return e(Q)},get autoGrade(){return e(Y)},get isRequestManualGrade(){return e(F)},set isRequestManualGrade(q){v(F,q)},get autoReviewData(){return e(_)},set autoReviewData(q){v(_,q)},$$legacy:!0})}),h(Z);var M=E(Z,2);{var J=w=>{l(w,()=>[{label:"Ignore",sublabel:"(Don't Learn)",className:"review-button-fail",isComplete:!0,onclick:()=>xe()},{label:""},{label:""},{label:"Learn",className:"review-button-easy",isComplete:!0,onclick:()=>Be()}])},P=(w,G)=>{{var Q=re=>{l(re,()=>[{label:""},{label:""},{label:""},{label:"Next",className:"review-button-easy",isComplete:e(o),onclick:()=>Ze()}])},q=(re,V)=>{{var $=H=>{l(H,()=>[{label:"Again",sublabel:"(Put Back)",className:"review-button-fail",isComplete:e(o),onclick:()=>ye()},{label:""},{label:""},{label:"Good",className:"review-button-easy",isComplete:e(o),onclick:()=>Se()}])},B=(H,We)=>{{var ce=he=>{l(he,()=>[{label:""},{label:""},{label:""},{label:"Next",className:"review-button-easy",isComplete:e(o),onclick:()=>Ne()}])},Te=(he,Ae)=>{{var Le=ie=>{var Re=_e(()=>(e(le),e(o),W(()=>Pe.map((ze,ue)=>({label:ze,sublabel:e(le)[ue+1],className:pe(ue+1),isComplete:e(o),onclick:()=>Ye(ue+1)})))));l(ie,()=>e(Re),()=>"pulsing")},Ke=ie=>{var Re=_e(()=>(e(le),e(o),W(()=>Pe.map((ze,ue)=>({label:ze,sublabel:e(le)[ue+1],className:pe(ue+1),isComplete:e(o),onclick:()=>ke(ue+1)})))));l(ie,()=>e(Re))};O(he,ie=>{e(oe)&&e(F)?ie(Le):ie(Ke,!1)},Ae)}};O(H,he=>{e(oe)&&!e(F)?he(ce):he(Te,!1)},We)}};O(re,H=>{et(y()),W(()=>y().isExtraStudy)?H($):H(B,!1)},V)}};O(w,re=>{e(n),e(C),e(fe),W(()=>e(n)&&!He(e(C),e(fe)))?re(Q):re(q,!1)},G)}};O(M,w=>{e(i)?w(J):w(P,!1)})}T(s,m)};O(ge,s=>{e(g)&&e(C)!==void 0&&!e(A)&&s(me)})}h(c),T(r,Oe),dt()}st(["click"]);export{Ka as component,Za as universal};
