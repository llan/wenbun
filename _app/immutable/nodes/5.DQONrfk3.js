import"../chunks/CWj6FrbW.js";import"../chunks/Bwjk16kZ.js";import{d as Z,o as aa,s as x}from"../chunks/Bm5w9rKm.js";import{a7 as ea,E as g,aa as z,ab as G,ad as h,ae as ta,af as d,g as a,b as c,ag as t,ah as e,ac as M,ak as sa,o as ia}from"../chunks/CppPYvqM.js";import{i as ra}from"../chunks/BmZSK_NP.js";import{e as H,i as J}from"../chunks/CboPmxil.js";import{s as oa}from"../chunks/WtSHSpat.js";import{s as la}from"../chunks/pvgapcXO.js";import{b as da}from"../chunks/D1aqb1vV.js";import{i as ca}from"../chunks/DR_ajWpe.js";import{b as na}from"../chunks/BSi2MV8y.js";import{A as va,D,l as pa,a as _a}from"../chunks/BwqE_mTR.js";import{T as fa}from"../chunks/BgD2c6e2.js";import{S as ma}from"../chunks/mNDhM2q8.js";var ua=($,n,s)=>n(a(s)),ka=z("<option> </option>"),ba=($,n,s)=>n(a(s).id),wa=z('<div class="deck-card-container svelte-dfzxow"><div class="deck-card svelte-dfzxow"><div class="left"><span class="deck-card-title svelte-dfzxow"> </span> <span class="deck-card-subtitle svelte-dfzxow"> </span></div> <div class="right"><span class="deck-card-count svelte-dfzxow"> </span></div></div> <button title="Add deck" aria-label="Add deck"><i class="fa-solid fa-plus"></i></button></div>'),xa=z('<div class="top-container svelte-dfzxow"><div class="filter-container"><span class="filter-label">Filter:</span> <select class="filter-select svelte-dfzxow"><option></option><!></select></div></div> <div class="deck-list-container svelte-dfzxow"></div>',1),ga=z('<!> <div class="main-container svelte-dfzxow"><!></div>',1);function qa($,n){ea(n,!1);let s=g(new va),L=new ma,S=g(!1),_=g(""),y=g(D);aa(async()=>{await a(s).init(),await K(),c(s,a(s)),c(S,!0)});async function K(){await Promise.allSettled(D.map(async i=>{const l=await pa(i.src);l&&L.set(i.id,{cardCount:l.length})}))}async function N(i){await a(s).addDeck(i),c(s,a(s))}function O(i){i.trim()?c(y,D.filter(l=>`${l.title} ${l.subtitle}`.toLowerCase().includes(i.toLowerCase()))):c(y,D)}ca();var B=ga(),F=G(B);fa(F,{title:"Browse Decks",get backUrl(){return`${na??""}/`}});var I=d(F,2),Q=t(I);{var R=i=>{var l=xa(),f=G(l),T=t(f),m=d(t(T),2);M(()=>{a(_),sa(()=>{})}),m.__change=[ua,O,_];var A=t(m);A.value=A.__value="";var V=d(A);H(V,1,()=>_a,J,(v,r,u,k)=>{var o=ka(),p=t(o,!0);e(o);var b={};M(()=>{x(p,a(r)),b!==(b=a(r))&&(o.value=(o.__value=a(r))??"")}),h(v,o)}),e(m),e(T),e(f);var q=d(f,2);H(q,5,()=>a(y),J,(v,r)=>{var u=wa(),k=t(u),o=t(k),p=t(o),b=t(p,!0);e(p);var C=d(p,2),W=t(C,!0);e(C),e(o);var E=d(o,2),P=t(E),X=t(P);e(P),e(E),e(k);var U=d(k,2);let j;U.__click=[ba,N,r],e(u),M((w,Y)=>{x(b,a(r).title),la(C,`--subtitle-color: ${a(r).color??"#00000080"}`),x(W,a(r).subtitle),x(X,`${w??""} cards`),j=oa(U,1,"deck-add-button svelte-dfzxow",null,j,Y)},[()=>{var w;return((w=L.get(a(r).id))==null?void 0:w.cardCount)??0},()=>({invisible:a(s).decks.includes(a(r).id)})],ia),h(v,u)}),e(q),da(m,()=>a(_),v=>c(_,v)),h(i,l)};ra(Q,i=>{a(S)&&i(R)})}e(I),h($,B),ta()}Z(["change","click"]);export{qa as component};
