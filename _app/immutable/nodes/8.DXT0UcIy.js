import"../chunks/CWj6FrbW.js";import"../chunks/C9SiBo4C.js";import{s as ne,d as Xe,o as Ke}from"../chunks/C2FOGMiU.js";import{O as Ie,S as n,Z as u,_ as v,Y as r,ah as et,$ as tt,V as T,W as s,X as je,P as x,Q as oe,R as at,T as ie,g as t,b as h,ai as _,a2 as J,d as b,y as m,a1 as ot}from"../chunks/XIoSnaTS.js";import{i as Ne}from"../chunks/DAhYkV_L.js";import{S as it,A as rt,_ as U,N as l,d as R,e as st,i as nt,f as re}from"../chunks/C5zbToTu.js";import{T as lt,r as P,b as Ve}from"../chunks/CgsJgLrP.js";import{s as se}from"../chunks/new4gNWg.js";import{b as k,a as Z}from"../chunks/C2CNw8TA.js";import{b as Q}from"../chunks/CXtgs1k7.js";import{i as vt}from"../chunks/DEcBvPEb.js";import{b as dt}from"../chunks/DSrDDK85.js";var ut=n('<div class="settings-item"><label class="settings-label svelte-k8ruu5"><div><div class="settings-label-title"> </div> <div class="settings-label-help svelte-k8ruu5"> </div></div> <div class="settings-children"><!></div></label></div>');function f(z,c){Ie(c,!0);const A=it[c.key]??{label:"",help:""};var V=ut(),S=u(V),a=u(S),L=u(a),W=u(L,!0);v(L);var q=r(L,2),X=u(q,!0);v(q),v(a);var F=r(a,2),K=u(F);et(K,()=>c.children??tt),v(F),v(S),v(V),T(()=>{ne(W,A.label),ne(X,A.help)}),s(z,V),je()}var ct=(z,c)=>c(),pt=(z,c)=>c(),_t=(z,c)=>c(),ft=(z,c)=>c(),ht=n('<textarea class="profile-textarea svelte-1t4a6o"></textarea> <button class="button svelte-1t4a6o">import</button> <div class="settings-label-help svelte-1t4a6o" style="margin: 1em 0">To manually export the profile data, copy the text above and store it somewhere safe.<br/> To manually import the profile data, paste the text into the textbox and click the import button.</div> <button class="button svelte-1t4a6o">Reset Debug Profile</button>',1),yt=(z,c)=>h(c,!t(c)),bt=(z,c)=>t(c).downloadProfile(),mt=(z,c)=>c(),gt=n('<input type="number" class="svelte-1t4a6o"/>'),$t=n('<input type="number" class="svelte-1t4a6o"/>'),Pt=n("<select><option>Mix</option><option>After Reviews</option><option>Before Reviews</option></select>"),St=n('<input type="number" class="svelte-1t4a6o"/>'),wt=n("<select><option>Mix</option><option>After Reviews</option><option>Before Reviews</option></select>"),kt=n('<input type="text"/>'),Ct=n('<input type="text"/>'),xt=n('<div style="display: flex; flex-direction: row; align-items: center; gap: 0.5em;"><input type="number" step="0.01" class="svelte-1t4a6o"/></div>'),Rt=n('<input type="checkbox" class="svelte-1t4a6o"/>'),zt=n('<input type="checkbox" class="svelte-1t4a6o"/>'),Tt=n("<textarea></textarea>"),Dt=n('<input type="checkbox" class="svelte-1t4a6o"/>'),At=n("<select><option>Pinyin (wén)</option><option>Numeric (wen2)</option><option>Zhuyin (ㄨㄣˊ)</option></select>"),Lt=n('<input type="checkbox" class="svelte-1t4a6o"/>'),Ft=n('<input type="checkbox" class="svelte-1t4a6o"/>'),Ot=(z,c,A)=>c(t(A)),Bt=n("<option> </option>"),Mt=n("<div><div>Load Preset</div> <div><select></select></div></div>"),Nt=n('<input type="color" class="svelte-1t4a6o"/>'),Vt=n('<input type="color" class="svelte-1t4a6o"/>'),It=n('<input type="color" class="svelte-1t4a6o"/>'),jt=n('<input type="color" class="svelte-1t4a6o"/>'),Gt=n('<input type="color" class="svelte-1t4a6o"/>'),Ht=n(`<div class="top-settings-section svelte-1t4a6o"><button class="button svelte-1t4a6o">Save</button> <button class="button svelte-1t4a6o">Discard Changes</button></div> <div class="settings-section svelte-1t4a6o"><div class="section-title svelte-1t4a6o">Profile</div> <div class="section-container svelte-1t4a6o"><!> <button class="button svelte-1t4a6o">manual import/export</button> <button class="button svelte-1t4a6o"><i class="fa-solid fa-download"></i>&nbsp;
                    export profile data (download)</button> <button class="button svelte-1t4a6o"><i class="fa-solid fa-upload"></i>&nbsp;
                    import profile data (upload)</button></div></div> <div class="settings-section svelte-1t4a6o"><div class="section-title svelte-1t4a6o">Learning</div> <div class="section-container svelte-1t4a6o"><!> <!> <!> <!> <!></div></div> <div class="settings-section svelte-1t4a6o"><div class="section-title svelte-1t4a6o">FSRS</div> <div class="section-container svelte-1t4a6o"><!> <!> <!> <!> <!> <!></div></div> <div class="settings-section svelte-1t4a6o"><div class="section-title svelte-1t4a6o">Chinese</div> <div class="section-container svelte-1t4a6o"><!> <!> <!> <!> <!> <!> <!> <!> <!> <!></div></div> <div class="settings-section svelte-1t4a6o"><div class="section-container svelte-1t4a6o"><a class="button svelte-1t4a6o" href="https://github.com/ray-pH/wenbun" aria-label="GitHub Repository" target="_blank"><i class="fa-brands fa-github"></i>&nbsp;
                    GitHub Repository</a> <a class="button svelte-1t4a6o" href="https://discord.gg/pVUuqJqywt" aria-label="GitHub Repository" target="_blank"><i class="fa-brands fa-discord"></i>&nbsp;
                    Discord Community Server</a></div></div>`,1),Ut=n('<!> <div class="main-container svelte-1t4a6o"><!></div>',1);function oa(z,c){Ie(c,!1);const A=x(),V=x();let S=x(new rt),a=x(),L=x();Ke(async()=>{await t(S).init(),h(a,U.cloneDeep(t(S).getConfig())),h(L,U.cloneDeep(t(a))),h(j,t(a).learningSteps.join(" ")),h(G,t(a).previouslyStudiedLearningSteps.join(" ")),h(H,t(a).FSRSParams.join(",")),h(M,t(S).exportProfile()),h(ee,t(M)),h(S,t(S))});async function W(){await t(S).saveConfig(t(a)),h(L,U.cloneDeep(t(a)))}function q(){h(a,U.cloneDeep(t(L)))}async function X(){window.confirm("Are you sure you want to reset to the debug profile?")&&(await t(S).debug(),h(S,t(S)))}let F=x("");function K(y){const O=re[y];O&&_(a,t(a).zh.toneColors=O),h(F,"")}let j=x(""),G=x(""),H=x(""),le=x(!1),M=x(""),ee=x("");function Ge(){t(S).tryImportProfile(t(M)).then(y=>{ve(y)})}function He(){t(S).tryUploadProfile().then(y=>{ve(y)})}function ve(y){y?window.alert("Successfully imported profile data"):window.alert("Failed to import profile data")}function Ue(){return new Promise(y=>{if(!t(A))y(!0);else{const O=window.confirm("You have unsaved changes. Are you sure you want to leave?");y(O)}})}oe(()=>(t(a),t(L)),()=>{h(A,!U.isEqual(t(a),t(L)))}),oe(()=>(t(a),t(j),t(G),t(H)),()=>{if(t(a)){const y=t(j).split(" ").map(p=>p.trim()).filter(p=>p);y.length<4&&y.every(p=>p.match(/^\d+[m|d]$/))&&_(a,t(a).learningSteps=y);const N=t(G).split(" ").map(p=>p.trim()).filter(p=>p);N.length<4&&N.every(p=>p.match(/^\d+[m|d]$/))&&_(a,t(a).previouslyStudiedLearningSteps=N);const I=t(H).split(",").map(p=>p.trim()).filter(p=>p);I.length===21&&I.every(p=>!isNaN(parseFloat(p)))&&_(a,t(a).FSRSParams=I.map(p=>parseFloat(p)))}}),oe(()=>(t(M),t(ee)),()=>{h(V,t(M)!==t(ee))}),at(),vt();var de=Ut(),ue=ie(de);lt(ue,{title:"Settings",get backUrl(){return`${dt??""}/`},isSettings:!0,backConfirmCallback:Ue});var ce=r(ue,2),Ze=u(ce);{var qe=y=>{var O=Ht(),N=ie(O),E=u(N);E.__click=[ct,W];var I=r(E,2);I.__click=[pt,q],v(N);var Y=r(N,2),p=r(u(Y),2),pe=u(p);{var Ee=i=>{var d=ht(),e=ie(d);Ve(e);var o=r(e,2);o.__click=[_t,Ge];var g=r(o,4);g.__click=[ft,X],T(()=>o.disabled=!t(V)),k(e,()=>t(M),$=>h(M,$)),s(i,d)};Ne(pe,i=>{t(le)&&i(Ee)})}var _e=r(pe,2);_e.__click=[yt,le];var fe=r(_e,2);fe.__click=[bt,S];var Ye=r(fe,2);Ye.__click=[mt,He],v(p),v(Y);var te=r(Y,2),he=r(u(te),2),ye=u(he);f(ye,{key:"newCardPerDay",children:(i,d)=>{var e=gt();P(e),k(e,()=>t(a).newCardPerDay,o=>_(a,t(a).newCardPerDay=o)),s(i,e)},$$slots:{default:!0}});var be=r(ye,2);f(be,{key:"maxReviewsPerDay",children:(i,d)=>{var e=$t();P(e),k(e,()=>t(a).maxReviewsPerDay,o=>_(a,t(a).maxReviewsPerDay=o)),s(i,e)},$$slots:{default:!0}});var me=r(be,2);f(me,{key:"newCardOrder",children:(i,d)=>{var e=Pt();T(()=>{t(a),J(()=>{})});var o=u(e),g={},$=r(o),C={},w=r($),D={};v(e),T(()=>{g!==(g=(m(l),b(()=>l.Mix)))&&(o.value=(o.__value=(m(l),b(()=>l.Mix)))??""),C!==(C=(m(l),b(()=>l.AfterReviews)))&&($.value=($.__value=(m(l),b(()=>l.AfterReviews)))??""),D!==(D=(m(l),b(()=>l.BeforeReviews)))&&(w.value=(w.__value=(m(l),b(()=>l.BeforeReviews)))??"")}),Q(e,()=>t(a).newCardOrder,B=>_(a,t(a).newCardOrder=B)),s(i,e)},$$slots:{default:!0}});var ge=r(me,2);f(ge,{key:"newPreviouslyStudiedCardPerDay",children:(i,d)=>{var e=St();P(e),k(e,()=>t(a).newPreviouslyStudiedCardPerDay,o=>_(a,t(a).newPreviouslyStudiedCardPerDay=o)),s(i,e)},$$slots:{default:!0}});var Je=r(ge,2);f(Je,{key:"newPreviouslyStudiedCardOrder",children:(i,d)=>{var e=wt();T(()=>{t(a),J(()=>{})});var o=u(e),g={},$=r(o),C={},w=r($),D={};v(e),T(()=>{g!==(g=(m(l),b(()=>l.Mix)))&&(o.value=(o.__value=(m(l),b(()=>l.Mix)))??""),C!==(C=(m(l),b(()=>l.AfterReviews)))&&($.value=($.__value=(m(l),b(()=>l.AfterReviews)))??""),D!==(D=(m(l),b(()=>l.BeforeReviews)))&&(w.value=(w.__value=(m(l),b(()=>l.BeforeReviews)))??"")}),Q(e,()=>t(a).newPreviouslyStudiedCardOrder,B=>_(a,t(a).newPreviouslyStudiedCardOrder=B)),s(i,e)},$$slots:{default:!0}}),v(he),v(te);var ae=r(te,2),$e=r(u(ae),2),Pe=u($e);f(Pe,{key:"learningSteps",children:(i,d)=>{var e=kt();P(e),se(e,1,"svelte-1t4a6o",null,{},{invalid:!1}),k(e,()=>t(j),o=>h(j,o)),s(i,e)},$$slots:{default:!0}});var Se=r(Pe,2);f(Se,{key:"previouslyStudiedLearningSteps",children:(i,d)=>{var e=Ct();P(e),se(e,1,"svelte-1t4a6o",null,{},{invalid:!1}),k(e,()=>t(G),o=>h(G,o)),s(i,e)},$$slots:{default:!0}});var we=r(Se,2);f(we,{key:"desiredRetention",children:(i,d)=>{var e=xt(),o=u(e);P(o),v(e),k(o,()=>t(a).desiredRetention,g=>_(a,t(a).desiredRetention=g)),s(i,e)},$$slots:{default:!0}});var ke=r(we,2);f(ke,{key:"enableShortTerm",children:(i,d)=>{var e=Rt();P(e),Z(e,()=>t(a).enableShortTerm,o=>_(a,t(a).enableShortTerm=o)),s(i,e)},$$slots:{default:!0}});var Ce=r(ke,2);f(Ce,{key:"enableFuzz",children:(i,d)=>{var e=zt();P(e),Z(e,()=>t(a).enableFuzz,o=>_(a,t(a).enableFuzz=o)),s(i,e)},$$slots:{default:!0}});var Qe=r(Ce,2);f(Qe,{key:"FSRSParams",children:(i,d)=>{var e=Tt();Ve(e),se(e,1,"",null,{},{invalid:!1}),k(e,()=>t(H),o=>h(H,o)),s(i,e)},$$slots:{default:!0}}),v($e),v(ae);var xe=r(ae,2),Re=r(u(xe),2),ze=u(Re);f(ze,{key:"zhAlwaysShowReading",children:(i,d)=>{var e=Dt();P(e),Z(e,()=>t(a).zh.alwaysShowReading,o=>_(a,t(a).zh.alwaysShowReading=o)),s(i,e)},$$slots:{default:!0}});var Te=r(ze,2);f(Te,{key:"zhMandarinReading",children:(i,d)=>{var e=At();T(()=>{t(a),J(()=>{})});var o=u(e),g={},$=r(o),C={},w=r($),D={};v(e),T(()=>{g!==(g=(m(R),b(()=>R.Pinyin)))&&(o.value=(o.__value=(m(R),b(()=>R.Pinyin)))??""),C!==(C=(m(R),b(()=>R.PinyinNumeric)))&&($.value=($.__value=(m(R),b(()=>R.PinyinNumeric)))??""),D!==(D=(m(R),b(()=>R.Zhuyin)))&&(w.value=(w.__value=(m(R),b(()=>R.Zhuyin)))??"")}),Q(e,()=>t(a).zh.mandarinReading,B=>_(a,t(a).zh.mandarinReading=B)),s(i,e)},$$slots:{default:!0}});var De=r(Te,2);f(De,{key:"zhPlayAudio",children:(i,d)=>{var e=Lt();P(e),Z(e,()=>t(a).zh.playAudio,o=>_(a,t(a).zh.playAudio=o)),s(i,e)},$$slots:{default:!0}});var Ae=r(De,2);f(Ae,{key:"zhIsColorBasedOnTone",children:(i,d)=>{var e=Ft();P(e),Z(e,()=>t(a).zh.isColorBasedOnTone,o=>_(a,t(a).zh.isColorBasedOnTone=o)),s(i,e)},$$slots:{default:!0}});var Le=r(Ae,2);f(Le,{key:"zhToneColors",children:(i,d)=>{var e=Mt(),o=r(u(e),2),g=u(o);T(()=>{t(F),J(()=>{})}),g.__change=[Ot,K,F],st(g,5,()=>(m(re),b(()=>Object.keys(re))),nt,($,C)=>{var w=Bt(),D=u(w,!0);v(w);var B={};T(()=>{ne(D,t(C)),B!==(B=t(C))&&(w.value=(w.__value=t(C))??"")}),s($,w)}),v(g),v(o),v(e),Q(g,()=>t(F),$=>h(F,$)),s(i,e)},$$slots:{default:!0}});var Fe=r(Le,2);f(Fe,{key:"zhTone1",children:(i,d)=>{var e=Nt();P(e),k(e,()=>t(a).zh.toneColors[0],o=>_(a,t(a).zh.toneColors[0]=o)),s(i,e)},$$slots:{default:!0}});var Oe=r(Fe,2);f(Oe,{key:"zhTone2",children:(i,d)=>{var e=Vt();P(e),k(e,()=>t(a).zh.toneColors[1],o=>_(a,t(a).zh.toneColors[1]=o)),s(i,e)},$$slots:{default:!0}});var Be=r(Oe,2);f(Be,{key:"zhTone3",children:(i,d)=>{var e=It();P(e),k(e,()=>t(a).zh.toneColors[2],o=>_(a,t(a).zh.toneColors[2]=o)),s(i,e)},$$slots:{default:!0}});var Me=r(Be,2);f(Me,{key:"zhTone4",children:(i,d)=>{var e=jt();P(e),k(e,()=>t(a).zh.toneColors[3],o=>_(a,t(a).zh.toneColors[3]=o)),s(i,e)},$$slots:{default:!0}});var We=r(Me,2);f(We,{key:"zhToneNeutral",children:(i,d)=>{var e=Gt();P(e),k(e,()=>t(a).zh.toneColors[4],o=>_(a,t(a).zh.toneColors[4]=o)),s(i,e)},$$slots:{default:!0}}),v(Re),v(xe),ot(2),T(()=>{E.disabled=!t(A),I.disabled=!t(A)}),s(y,O)};Ne(Ze,y=>{t(a)&&y(qe)})}v(ce),s(z,de),je()}Xe(["click","change"]);export{oa as component};
