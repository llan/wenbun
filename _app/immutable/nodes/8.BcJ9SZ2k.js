import"../chunks/CWj6FrbW.js";import"../chunks/DUOQ2h4l.js";import{ak as ae,p as Ie,a9 as o,al as Te,am as D,an as qe,f as A,a as et,t as L,b as f,c as Ee,s as r,X as Jt,i as t,n,d as a,j as d,P as mt,r as e,e as u,aq as Kt,ap as Vt}from"../chunks/C5etlkrB.js";import{i as N}from"../chunks/Cc2rhPc8.js";import{e as Zt,i as te}from"../chunks/Dnr6C7Qa.js";import{T as Oe,s as Ne,r as at}from"../chunks/BvNWHEz1.js";import{s as gt}from"../chunks/DzZJzTEu.js";import{s as M}from"../chunks/XkQyc0Ir.js";import{b as rt}from"../chunks/10tJ-hDV.js";import{b as ee}from"../chunks/W8I556om.js";import{i as Re}from"../chunks/BkP1o4TQ.js";import{p as $e}from"../chunks/DgBratTy.js";import{b as Ge}from"../chunks/_1toS6uJ.js";import{A as ze,E as B}from"../chunks/AIxcQUCD.js";import{D as He}from"../chunks/Cy3mxnRm.js";import{L as Me}from"../chunks/DB2kamp7.js";const Be=({url:x})=>({deckId:x.searchParams.get("id")||""}),fa=Object.freeze(Object.defineProperty({__proto__:null,load:Be},Symbol.toStringTag,{value:"Module"}));ae(["click"]);var Ye=(x,c)=>d(c,!t(c)),Qe=(x,c)=>c(),Ue=A(`<div class="section-help svelte-1rh9dw7">*Adjustment can be negative</div> <div class="section-row svelte-1rh9dw7"><div>Change today's <b>new card</b> limit by</div> <div><input type="number" class="short-input svelte-1rh9dw7"/></div></div> <div class="section-row svelte-1rh9dw7"><div>Change today's <b>previously studied</b> card limit by</div> <div><input type="number" class="short-input svelte-1rh9dw7"/></div></div> <div class="section-row svelte-1rh9dw7"><div>Change today's <b>review</b> limit by</div> <div><input type="number" class="short-input svelte-1rh9dw7"/></div></div> <button class="button">Adjust</button>`,1),We=(x,c)=>d(c,!t(c)),Xe=A("<option> </option>"),Fe=A("<option> </option>"),Je=A('<div class="section-row svelte-1rh9dw7"><div>Group :</div> <div><select></select></div></div>'),Ke=(x,c)=>c(),Ve=A('<div class="section-help svelte-1rh9dw7">Study more without affecting the SRS schedule</div> <div class="section-row svelte-1rh9dw7"><div>Count :</div> <input type="number"/></div> <div class="section-row svelte-1rh9dw7"><div>Type :</div> <div><select></select></div></div> <!> <div class="section-description svelte-1rh9dw7"><span class="desc"> </span> <span class="subdesc svelte-1rh9dw7"> </span></div> <button class="button">Extra Study</button>',1),Ze=A('<div class="deck-info svelte-1rh9dw7"><span class="deck-card-title"> </span> <span class="deck-card-subtitle svelte-1rh9dw7"> </span> <div class="loading svelte-1rh9dw7"><!></div></div> <div class="table-container"><table class="count-table svelte-1rh9dw7"><tbody><tr class="row-count-new svelte-1rh9dw7"><td>New</td><td class="count svelte-1rh9dw7"> </td></tr><tr class="row-count-learn-relearn svelte-1rh9dw7"><td>Learning</td><td class="count svelte-1rh9dw7"> </td></tr><tr class="row-count-previously-studied svelte-1rh9dw7"><td>Previously Studied</td><td class="count svelte-1rh9dw7"> </td></tr><tr class="row-count-review svelte-1rh9dw7"><td>Review</td><td class="count svelte-1rh9dw7"> </td></tr></tbody></table></div> <div class="progress-container svelte-1rh9dw7"><div class="section-title svelte-1rh9dw7">Progress</div> <div class="progress-bar-container svelte-1rh9dw7"><div class="bar ignored svelte-1rh9dw7" title="Ignored"></div> <div class="bar previously-studied svelte-1rh9dw7" title="Previously Studied"></div> <div class="bar young svelte-1rh9dw7" title="Young"></div> <div class="bar mature svelte-1rh9dw7" title="Mature"></div> <div class="bar rest svelte-1rh9dw7"></div></div> <div><span> </span> <span style="opacity: 0.5;"> </span></div></div> <div class="section-container svelte-1rh9dw7"><button class="section-title-button svelte-1rh9dw7"><div class="section-title svelte-1rh9dw7">Quick Adjust</div> <div><i></i></div></button> <!></div> <div class="section-container svelte-1rh9dw7"><button class="section-title-button svelte-1rh9dw7"><div class="section-title svelte-1rh9dw7">Extra Study</div> <div><i></i></div></button> <!></div>',1),ta=A('<!> <div class="container svelte-1rh9dw7"><!></div> <div class="bottom-bar svelte-1rh9dw7"><a><!></a></div>',1);function ba(x,c){Ie(c,!1);const i=o(),k=o(),_=o(),yt=o(),xt=o(),Y=o(),R=o();let Q=$e(c,"data",8),s=o(new ze),kt=o(!1),st=o(!1),St=o(!1);Te(async()=>{await t(s).init(),Ct();const v=await t(s).initProfile();d(St,!0),v&&Ct()});function Ct(){var v,p;d(s,t(s)),d(I,((p=(v=t(s).deckData[Q().deckId??""])==null?void 0:v.groups[0])==null?void 0:p.label)??""),d(kt,!0),d(st,t(s).getNextCard(Q().deckId??"")===void 0)}function re(v){return He.find(p=>p.id===v)??{id:v,title:v,subtitle:""}}let U=o(!1),W=o(20),S=o(B.StudiedCards),I=o("");function se(){const v=t(s).extraStudyHandler.getCardIds(t(i).id,t(Y));t(s).extraStudyHandler.startExtraStudy(t(i).id,v)}let X=o(!1),F=o(0),J=o(0),K=o(0);async function ie(){t(s).adjustCardLimit(t(i).id,t(F),t(J),t(K)),d(F,0),d(J,0),d(K,0),await t(s).save(),d(s,t(s))}D(()=>mt(Q()),()=>{d(i,re(Q().deckId??""))}),D(()=>(t(s),t(i)),()=>{d(k,t(s).getDeckProgress(t(i).id))}),D(()=>(t(s),t(i)),()=>{d(_,t(s).getDeckProgressNormalized(t(i).id))}),D(()=>t(k),()=>{d(yt,t(k).youngCount+t(k).matureCount)}),D(()=>t(k),()=>{d(xt,t(k).totalCount-t(k).ignoredCount)}),D(()=>(t(S),t(W),t(I)),()=>{d(Y,{type:t(S),count:t(W),group:t(I)})}),D(()=>(t(s),t(i),t(Y)),()=>{d(R,t(s).extraStudyHandler.getDescription(t(i).id,t(Y)))}),qe(),Re();var Pt=ta(),jt=et(Pt);Oe(jt,{title:"Overview"});var it=r(jt,2),de=a(it);{var ve=v=>{var p=Ze(),dt=et(p),vt=a(dt),ce=a(vt,!0);e(vt);var ot=r(vt,2),ue=a(ot,!0);e(ot);var At=r(ot,2),_e=a(At);{var pe=l=>{Me(l)};N(_e,l=>{t(St)||l(pe)})}e(At),e(dt);var nt=r(dt,2),It=a(nt),Tt=a(It),lt=a(Tt),qt=r(a(lt)),we=a(qt,!0);e(qt),e(lt);var ct=r(lt),Et=r(a(ct)),he=a(Et,!0);e(Et),e(ct);var ut=r(ct),Ot=r(a(ut)),fe=a(Ot,!0);e(Ot),e(ut);var Nt=r(ut),Rt=r(a(Nt)),be=a(Rt,!0);e(Rt),e(Nt),e(Tt),e(It),e(nt);var _t=r(nt,2),pt=r(a(_t),2),$t=a(pt),Gt=r($t,2),zt=r(Gt,2),Ht=r(zt,2),me=r(Ht,2);e(pt);var Mt=r(pt,2),wt=a(Mt),ge=a(wt,!0);e(wt);var Bt=r(wt,2),ye=a(Bt);e(Bt),e(Mt),e(_t);var ht=r(_t,2),Z=a(ht);Z.__click=[Ye,X];var Yt=r(a(Z),2),xe=a(Yt);let Qt;e(Yt),e(Z);var ke=r(Z,2);{var Se=l=>{var C=Ue(),w=r(et(C),2),P=r(a(w),2),b=a(P);at(b),e(P),e(w);var m=r(w,2),T=r(a(m),2),$=a(T);at($),e(T),e(m);var G=r(m,2),q=r(a(G),2),E=a(q);at(E),e(q),e(G);var ft=r(G,2);ft.__click=[Qe,ie],rt(b,()=>t(F),g=>d(F,g)),rt($,()=>t(J),g=>d(J,g)),rt(E,()=>t(K),g=>d(K,g)),f(l,C)};N(ke,l=>{t(X)&&l(Se)})}e(ht);var Ut=r(ht,2),tt=a(Ut);tt.__click=[We,U];var Wt=r(a(tt),2),Ce=a(Wt);let Xt;e(Wt),e(tt);var Pe=r(tt,2);{var je=l=>{var C=Ve(),w=r(et(C),2),P=r(a(w),2);at(P),e(w);var b=r(w,2),m=r(a(b),2),T=a(m);L(()=>{t(S),Vt(()=>{})}),Zt(T,5,()=>(mt(B),n(()=>Object.values(B))),te,(h,j)=>{var y=Xe(),z=a(y,!0);e(y);var O={};L(()=>{u(z,t(j)),O!==(O=t(j))&&(y.value=(y.__value=t(j))??"")}),f(h,y)}),e(T),e(m),e(b);var $=r(b,2);{var G=h=>{var j=Je(),y=r(a(j),2),z=a(y);L(()=>{t(I),Vt(()=>{t(s),t(i)})}),Zt(z,5,()=>(t(s),t(i),n(()=>t(s).getGroupLabels(t(i).id))),te,(O,bt)=>{var H=Fe(),Ae=a(H,!0);e(H);var Ft={};L(()=>{u(Ae,t(bt)),Ft!==(Ft=t(bt))&&(H.value=(H.__value=t(bt))??"")}),f(O,H)}),e(z),e(y),e(j),ee(z,()=>t(I),O=>d(I,O)),f(h,j)};N($,h=>{t(S),mt(B),n(()=>t(S)===B.Group)&&h(G)})}var q=r($,2),E=a(q),ft=a(E,!0);e(E);var g=r(E,2),De=a(g,!0);e(g),e(q);var Le=r(q,2);Le.__click=[Ke,se],L(()=>{u(ft,(t(R),n(()=>t(R).desc))),u(De,(t(R),n(()=>t(R).subdesc)))}),rt(P,()=>t(W),h=>d(W,h)),ee(T,()=>t(S),h=>d(S,h)),f(l,C)};N(Pe,l=>{t(U)&&l(je)})}e(Ut),L((l,C,w,P,b,m)=>{u(ce,(t(i),n(()=>t(i).title))),u(ue,(t(i),n(()=>t(i).subtitle))),u(we,l),u(he,C),u(fe,w),u(be,P),M($t,`width: ${t(_),n(()=>t(_).ignored)??""}%`),M(Gt,`width: ${t(_),n(()=>t(_).previouslyStudied)??""}%`),M(zt,`width: ${t(_),n(()=>t(_).young)??""}%`),M(Ht,`width: ${t(_),n(()=>t(_).mature)??""}%`),M(me,`width: ${t(_),n(()=>t(_).rest)??""}%`),u(ge,t(yt)),u(ye,`/ ${t(xt)??""}`),Qt=gt(xe,1,"fa-solid",null,Qt,b),Xt=gt(Ce,1,"fa-solid",null,Xt,m)},[()=>(t(s),t(i),n(()=>t(s).getScheduledNewOrWarmUpCardsCount(t(i).id))),()=>(t(s),t(i),n(()=>t(s).getLearningRelearningCardsCount(t(i).id))),()=>(t(s),t(i),n(()=>t(s).getScheduledPreviouslyStudiedCardsCount(t(i).id))),()=>(t(s),t(i),n(()=>t(s).getScheduledReviewCardsCount(t(i).id))),()=>({"fa-chevron-down":t(X),"fa-chevron-right":!t(X)}),()=>({"fa-chevron-down":t(U),"fa-chevron-right":!t(U)})],Jt),f(v,p)};N(de,v=>{t(kt)&&v(ve)})}e(it);var Dt=r(it,2),V=a(Dt);let Lt;var oe=a(V);{var ne=v=>{var p=Kt("You're done for today");f(v,p)},le=v=>{var p=Kt("Study");f(v,p)};N(oe,v=>{t(st)?v(ne):v(le,!1)})}e(V),e(Dt),L(v=>{Lt=gt(V,1,"button svelte-1rh9dw7",null,Lt,v),Ne(V,"href",`${Ge??""}/review?id=${t(i),n(()=>t(i).id)??""}`)},[()=>({disabled:t(st)})],Jt),f(x,Pt),Ee()}ae(["click"]);export{ba as component,fa as universal};
